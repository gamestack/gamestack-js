{"version":3,"sources":["../../../ecma/Gamestack/concat/Gamestack.js"],"names":["Gamestack","GamestackEngine","lib","game_windows","all_objects","DEBUG","gui_mode","__gameWindow","__sprites","__animations","spriteTypes","systemSpriteTypes","samples","log_modes","log_mode","recursionCount","__gameWindowList","getObjectById","id","x","length","interlog","message","div","isNaN","create_id","S4","Math","random","toString","substring","error","quit","Error","console","info","m","GameStack","log","Extendors","hasInit","obj","args","f","hasOnComplete","hasMultiOnComplete","hasOnRun","hasMultiOnRun","hasOnCollide","hasMultiOnCollide","collideable","collision_callback","onCollide","collideables","callback","spatial","Size","s","size","Vector","Pos","p","position","Rot","r","rotation","Position","Rotate","Rotation","informable","name","getArg","description","tweenable","curve_string","setTweenCurve","c","cps","split","alert","s1","toLowerCase","s2","curve","TWEEN","Easing","Linear","None","$","each","ix","easing","iy","easeType","curvesToArray","indexOf","push","applyParentalArgs","parent","Sprite","parent_id","object_id","ChainSet","Info","posable","rotable","Collision","spriteRectanglesCollide","obj1","obj2","gw","camPos","padding","paddingX","round","paddingY","y","left","right","top","bottom","_gameWindow","setGameWindow","gameWindow","ExtendEvents","extendedObject","extendedKey","extendor","extendorKey","evtLink","GSEventLink","onRun","onComplete","removeOffscreenObjects","item","onScreen","__keepAlive","keepAlive","remove","removeDeadObjects","isDead","getGameWindow","assignAll","object","keys","__gameStack","list","onResult","i","ready_callstack","ready","reload","callReady","funx","objects","call","InputSystem","init","__running","fallback","k","hasOwnProperty","normalArgs","a","normal","str","replace","isNormalStringMatch","str1","str2","instance_type_pairs","objectList","constructor_name","constructor","type","getById","select","objects_out","__inst","GamestackApi","get","post","contents","jstr","GSO","run_ext","complete_ext","caller","callkey","GameImage","src","onCreate","String","Object","image","document","createElement","ext","lastIndexOf","onerror","__error","domElement","data","onload","Quick2d","__gameInstance","Sound","module","exports","JSON","stringify","$Q","selector","$GFunx","on","evt_key","selectorObject","controller_ix","criterion","between","cparts","__targetType","__targetName","before","trim","evt_profile","cix","contains_any","button_mode","GamepadAdapter","item1","item2","onUpdate","sprite","collidesRectangular","condition","key","evt_parts","run","mykey","number","parseFloat","e","propkey","spr","object_out","mainSelector","msfChar","__targetClassName","output","cleanSelectorString","after","getParts","complete","c1","test_str","start_pos","end_pos","contains","contains_all","cList","c2","test_selector_method","Q_TestStrings","test","query","events","mousemove","leftclick","rightclick","middleclick","wheelup","wheelDown","keymap","keyReplace","fromCharCode","extendKey","onFinish","down","extend","downCall","upCall","up","window","setInterval","im","kmapItem","onkeydown","onkeyup","event","gs_key_string","keyCode","evt_object","canvases","getElementsByTagName","getMousePos","pageX","pageY","clientX","body","scrollLeft","documentElement","clientY","scrollTop","offsetLeft","style","fullMoveInputSystem","pos","Array","el","applyMouseMove","addEventListener","onmousedown","value","which","preventDefault","onmouseup","file_system","localizedSource","hostUrl","gs_folder_ix","loadJSON","filepath","getJSON","loadJSONLevel","sprites","xitem","yitem","iz","zitem","add","GameWindow","canvas","update","camera","append","width","height","Camera","target","adjustSize","update_ext","onresize","ctx","getContext","listout","player","def_update","_gw","before_draw_ext","__isDrawable","Canvas","draw","draw_ext","w","h","parentNode","clientWidth","clientHeight","getElementById","setAttribute","WIDTH","HEIGHT","onBottom","GSEvent","apply","splice","collect","ixG","time","requestAnimationFrame","animate","__stats","begin","__statsMS","__statsMB","isAtPlay","clearRect","end","Stats","showPanel","dom","appendChild","marginLeft","FullScreenGameWindow","background","Animation","imgDom","frameSize","frameBounds","min","max","VectorFrameBounds","termPoint","frameOffset","apply2DFrames","flipX","selected_frame","frames","timer","duration","seesaw_mode","reverse_frames","reverse","__frametype","framePos","fcount","quitLoop","frames_reversed","slice","pop","concat","reverseFrames","engage","call_on_run","tween","Tween","to","call_on_complete","isComplete","start","delay","CanvasStack","__levelMaker","active","drawPortion","drawFrameWithRotation","img","fx","fy","fw","fh","deg","canvasContextObj","flipY","save","rad","PI","translate","rotate","scale","drawImage","restore","drawData","putImageData","frame","selected_animation","camera_pos","z","scrollFactor","noScroll","targetSize","realWidth","realHeight","offset","HTMLImageElement","CollisionSettings","fourway","four_way","pixel","stop","GravityForce","subjects","clasticObjects","topClastics","Vector3","accel","itemx","accelY","__inAir","groundMaxY","itemy","collide_stop","collide_stop_top","Force","ControllerEventKeys","left_stick","right_stick","gamepads","__gamepads","intervals","controller_stack","__gamepadMaster","gamepad","index","buttons","axes","mainLoop","clearInterval","gps","navigator","getGamepads","process","game_pad_index","game_pad","gp","stick_left","stick_right","extendFunc","f1","f2","fc","current_cb","parts","parseInt","gpEvents","process_buttons","process_axes","axis1","axia2","ceil","pressed","clearance_1","gpc","bkey","gpix","GamepadEvents","makeArray","siblings","sibling","sibs","sib","child_id","parent_key","child_key","InputEvent","btnix","button_ix","gamepad_ix","six","stickix","stick_ix","inputKey","keyboardKeys","keyitem","CollisionEvent","arg2","arg3","BoolEvent","GSProton","emission_amount_min","emission_amount_max","radius","mass","emissions_frequency","gravity","proton","usingAttraction","usingRepulsion","usingPointZone","pointZoneX","pointZoneY","usingBlendAlpha","attraction","repulsion","startAlpha","endAlpha","startColor_asRandom","startColor","startScale","endScale","endColor_asRandom","endColor","positionX_asRandom","positionY_asRandom","positionX","positionY","vSpeedMin","vSpeedMax","vSpeedRotationMin","vSpeedRotationMax","lifeMin","lifeMax","initializers","behaviors","replacement","ticker","collideableArray","minRot","maxRot","replaceBehaviorByType","Proton","V","Span","grav","Gravity","minV","maxV","emitter","floor","particles","initializes","isRectangularCollision","collide","emit_mode","Emitter","emission_amount","rps","rate","Rate","allNumbers","ImageTarget","Mass","Life","PointZone","Alpha","Color","Infinity","easeInSine","Scale","attractionX","attractionY","attractionMin","attractionMax","Attraction","repulsionX","repulsionY","repulsionMin","repulsionMax","Repulsion","Radius","addInitialize","b","addBehaviour","emit","addEmitter","renderer","Renderer","blendFunc","tick","stopEmit","ProtonPresets","head","innerHTML","HtmlExtra","applyCSSArgs","norms","widthFloat","heightFloat","topFloat","bottomFloat","color","backgroundColor","text","fontFamily","font","border","fontSize","fontsize","targetBottom","get_float_pixels","targetTop","fadeTime","in","out","v","targetLeft","targetRight","innerText","d","fadeInTime","fadeOutTime","float","dimen","fun","show_interval","o","opacity","setTimeout","hide_interval","TextDisplay","create_dom","leftFloat","rightFloat","display","textAlign","zIndex","textContent","fadeIn","ImageStatDisplay","text_id","img_id","Bar","backgroundSize","backgroundPosition","BarFill","BarDisplay","fill_src","fill","fill_width","fill_height","fill_color","bar_src","bar","bar_width","bar_height","bar_color","TextBubble","stay","borderRadius","borderColor","paddingBottom","Level","backgrounds","terrains","interactives","threes","Curves","linearNone","t","easeInQuadratic","easeOutQuadratic","easeInOutQuadratic","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuartic","easeOutQuartic","easeInOutQuartic","easeInQuintic","easeOutQuintic","easeInOutQuintic","inOutCurves","quadratic","cubic","quartic","quintic","linear","InOut","Line","points","pointDisp","num","curveMethod","curve_size","current_point","abs","trig_distance_xy","TransposeByRotation","cx","cy","angle","radians","cos","sin","nx","ny","np","highlight_sprites","point","sub","WaveLine","curve_key","curve_options","is_highlighted","iterations","max_size","growth","tposition","n","found","equals","curveCall","existing_canvas","context","fillStyle","fillRect","lineWidth","strokeStyle","beginPath","moveTo","lineTo","closePath","stroke","position_old","test_graph_size","get_line_segment","yTrack","max_recursion","dist","ptrack","pct","mult","ShapeLine","targetTotalPoints","total","elipse","center","perim","sqrt","step","Fill","quad","stepX","stepY","p1","Motion","state_save","TweenMotion","transition","trans","transition_options","curvesList","tweens","targetCheck","motion_curve","line","easeInOutQuad","t1","t2","minPointDist","first_segment","extendLinePoints","segment","next_points","last_point","sr","GeoMath","rotatePointsXY","curve_iterations","LineMotion","Highlight","Eliptical","Quadrilateral","Projectile","animation","origin","highlighted","anime","rot_offset","speed","numberShots","disp","__playerInst","bx","by","bw","bh","half","shot","setAnimation","stats","damage","options","setSize","lp","Shapes","circle","freq","square","rect","triangle","base","Shot","imageOrAnimation","rot_disp","rot_disp_per_unit","curve_growth","velocity","Rectangle","VectorBounds","get_curve_from_string","pointDist","get_curve_string","t_points","next_segment","t_len","transpose","point_highlighter","theta","sound","onLoad","loop","val","volume","play","SoundList","sounds","singleFrame","after_load","apply_args","life","animations","motions","shots","__initializers","collision_bounds","acceleration","rot_speed","rot_accel","onInit","SpriteInitializers","f_init","framesize","__mapSize","mx","my","wth","htw","keyString1","keyString2","extendedFunc","ef","lineObject","curveKey","motionCurveOptions","__crtLineIx","pctFloat","ixChange","prep_key","bullet","rotPlus","CurvedLine","Curve","SegmentSize","MaxSize","Growth","subsprite","assertSpeed","diff","prop","amt","diff_min_y","diff_min_x","diff_max_y","diff_max_x","dimens","minkey","apart","ct","diffX","distX","overlap_x","diffY","distY","overlap_y","collide_stop_x","file_path","SpriteInitializersOptions","Clastics","top_collideable","forces","force","fourside_collideable","MainGravity","very_light","light","medium","strong","very_strong","ControllerStickMotion","player_move_x","__lib","accelX","decelX","__falling","decelY","player_move_xy","decel","player_rotate_x","valid_check","undefined","v1","v2","Vector2","VectorMath","Background","source_objects","members","rows","cols","flip","sf","approxRows","approxCols","xBacksTotal","yBacksTotal","minX","maxX","minY","maxY","campos","cleanCheck","cancat","Interactive","collision_settings","Terrain","colliders","THREE_EXT","defaults","DodecahedronGeometry","detail","SphereGeometry","widthSegments","heightSegments","BoxGeometry","depth","CylinderGeometry","radiusTop","radiusBottom","TorusGeometry","tube","radialSegments","tubularSegments","Three","THREE","scene","Scene","geometry","AmbientLight","WebGLRenderer","preserveDrawingBuffer","alpha","PerspectiveCamera","loader","TextureLoader","load","texture","material","MeshPhongMaterial","map","__init","mesh","Mesh","render","__ServerSideFile","file_upload","toDataURL","relpath","content","clear","pixels","Uint8Array","gl","readPixels","RGBA","UNSIGNED_BYTE","ImageData","Uint8ClampedArray","decycle","paths","derez","path","nu","$ref","prototype","retrocycle","px","rez","eval","root","factory","POOL_MAX","TIME_STEP","USE_CLOCK","MEASURE","EULER","RK2","VERLET","PARTICLE_CREATED","PARTICLE_UPDATE","PARTICLE_SLEEP","PARTICLE_DEAD","PROTON_UPDATE","PROTON_UPDATE_AFTER","EMITTER_ADDED","EMITTER_REMOVED","amendChangeTabsBug","TextureBuffer","TextureCanvasBuffer","proParticleCount","integrationType","Util","initValue","emitters","renderers","oldTime","pool","Pool","integrator","NumericalIntegration","addRender","dispatchEvent","removeEmitter","Date","getTime","elapsed","getCount","destroy","release","EventDispatcher","initialize","removeEventListener","removeAllEventListeners","hasEventListener","_listeners","listener","arr","l","eventName","eventTarget","ret","listeners","handler","isArray","destroyArray","array","destroyObject","getVector2D","postionOrX","vector2d","Vector2D","classApply","argArray","factoryFunction","bind","judgeVector2D","pOBJ","result","setVector2DByObject","particle","copy","addPrototypeByObject","prototypeObject","filters","singlePrototype","getSpanValue","setPrototypeByObject","setSpanValue","pan","getValue","inherits","subClass","superClass","_super_","create","F","getImageData","imagedata","getImage","drawCanvas","loadAndSetImage","Image","loadedImage","transform","_width","WebGLUtil","nhpot","_height","DomUtil","createCanvas","self","myImage","hexToRGB","hex16","charAt","g","rgbToHex","rbg","Function","oThis","TypeError","aArgs","arguments","fToBind","fNOP","fBound","ipot","makeTranslation","tx","ty","makeRotation","angleInRadians","makeScale","sx","sy","matrixMultiply","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","$id","$width","$height","$position","element","transformDom","$div","$x","$y","$scale","$rotate","WebkitTransform","MozTransform","OTransform","msTransform","MStack","mats","Mat3","set","multiply","Particle","ID","reset","getDirection","atan2","age","energy","dead","sleep","ease","setEasingByName","easeLinear","old","behaviours","removeAllBehaviours","rgb","applyBehaviour","behaviour","parents","addBehaviours","removeBehaviour","cID","params","clone","count","puid","__puid","PUID","_getList","uid","_id","_uids","nid","hash","MathUtils","randomAToB","INT","randomFloating","randomZone","degreeTransform","toColor16","getRGB","randomColor","integrate","damping","eulerIntegrate","multiplyScalar","setX","setY","getGradient","addVectors","addXY","addScalar","subVectors","divideScalar","negate","dot","lengthSq","normalize","distanceTo","distanceToSquared","tha","dx","dy","setLength","oldLength","lerp","toArray","Polar2D","setR","setTha","toVector","getX","getY","getSpan","ColorSpan","colorArr","mat3","mat","Float32Array","mat1","mat2","inverse","multiplyVec2","vec","Behaviour","normalizeForce","normalizeValue","numpan","timepan","numPan","timePan","startTime","nextTime","Initialize","InitializeUtil","bindEmitter","lifePan","zone","getPosition","vector","P","Velocity","rpan","thapan","rPan","thaPan","normalizeVelocity","vr","polar2d","massPan","oldRadius","imagetarget","targetPosition","radiusSq","attractionForce","RandomDrift","driftX","driftY","panFoce","G","collisionPool","delta","newPool","otherParticle","overlap","averageMass1","averageMass2","distance","totalMass","CrossZone","crossType","crossing","same","alphaA","alphaB","scaleA","scaleB","rotationA","rotationB","color1","color2","beginRGB","endRGB","GravityWell","centerPoint","distanceVec","distanceSq","factor","pObj","emitTime","emitTotalTimes","removeAllParticles","createParticle","setupParticle","addSelfInitialize","initAll","removeInitialize","initializer","removeInitializers","emitting","BehaviourEmitter","selfBehaviours","addSelfBehaviour","removeSelfBehaviour","FollowEmitter","mouseTarget","_allowEmitting","initEventHandler","mousemoveHandler","mousedownHandler","mousedown","mouseupHandler","mouseup","layerX","layerY","offsetX","offsetY","easeInQuad","pow","easeOutQuad","easeInQuart","easeOutQuart","easeInOutQuart","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInBack","easeOutBack","easeInOutBack","easeName","getRenderer","addEventHandler","resize","setStroke","thinkness","createImageData","PixelRender","setMaxRadius","WebGLRender","blendEquation","A","B","setType","PixiRender","DomRender","CanvasRender","EaselRender","BaseRender","onProtonUpdate","onParticleCreated","onParticleUpdate","onParticleDead","onProtonUpdateAfter","onEmitterAdded","onEmitterRemoved","addEmitterListener","setImgInDIV","bakOldRadius","arc","removeChild","regX","regY","addChild","graphics","createjs","Graphics","beginStroke","beginFill","drawCircle","shape","Shape","scaleX","scaleY","bufferCache","buffer","getBuffer","bufferContext","globalAlpha","globalCompositeOperation","rectangle","imageData","setPixel","elementwidth","antialias","stencil","initVar","initShaders","initBuffers","FUNC_ADD","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","umat","smat","mstack","viewport","circleCanvasURL","createCircle","getVertexShader","vsSource","join","getFragmentShader","fsSource","texturebuffers","getShader","fs","shader","createShader","FRAGMENT_SHADER","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fragmentShader","vertexShader","sprogram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","useProgram","vpa","getAttribLocation","tca","enableVertexAttribArray","tMatUniform","getUniformLocation","samplerUniform","useTex","uniform1i","unitIBuffer","createBuffer","bindBuffer","ELEMENT_ARRAY_BUFFER","vs","bufferData","Uint16Array","STATIC_DRAW","ids","idx","unitI33","stripBuffer","raidus","circleCanvasRadius","setImgInCanvas","_w","_h","_scaleX","_scaleY","createTexture","vcBuffer","tcBuffer","ARRAY_BUFFER","bindTexture","TEXTURE_2D","texImage2D","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_NEAREST","generateMipmap","textureLoaded","textureWidth","textureHeight","tmat","imat","oldScale","updateMatrix","uniform3f","uniformMatrix3fv","vertexAttribPointer","FLOAT","drawElements","TRIANGLES","UNSIGNED_SHORT","moveOriginMatrix","translationMatrix","angel","rotationMatrix","scaleMatrix","matrix","Zone","LineZone","x1","y1","x2","y2","direction","minx","miny","maxx","maxy","xxyy","gradient","getLength","C","D","getDistance","getSymmetric","tha2","tha1","oldx","oldy","getRange","CircleZone","setCenter","RectZone","ImageZone","vectors","setVectors","j","length1","length2","getBound","getColor","Debug","setStyle","drawZone","drawRect","drawEmitter","setTest","getTest","lastTime","vendors","cancelAnimationFrame","currTime","timeToCall","clearTimeout","mode","container","cssText","children","addPanel","panel","beginTime","performance","now","prevTime","fpsPanel","Panel","msPanel","memory","memPanel","REVISION","usedJSHeapSize","jsHeapSizeLimit","setMode","fg","bg","PR","devicePixelRatio","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","textBaseline","fillText","maxValue","_tweens","getAll","removeAll","preserve","_object","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_repeat","_repeatDelayTime","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onCompleteCallback","_onStopCallback","field","properties","property","stopChainedTweens","numChainedTweens","amount","repeat","times","repeatDelay","yoyo","interpolation","chain","onStart","onStop","isFinite","tmp","Quadratic","In","Out","Cubic","Quartic","Quintic","Sinusoidal","Exponential","Circular","Elastic","Back","Bounce","fn","Utils","Bezier","pw","bn","Bernstein","CatmullRom","p0","Factorial","p2","p3","v0","t3","define","amd"],"mappings":"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","file":"Gamestack.js","sourcesContent":["/**@author\r\n Jordan Edward Blake\r\n * */\r\n\r\n/**@copyright\r\n\r\n Copyright 2016\r\n\r\n **/\r\n\r\n/**\r\n * Object, instance of GamestackLibrary() : references Gamestack classes\r\n * attaches to window object || module.exports (when loading via require)\r\n * */\r\n\r\nlet Gamestack = {};\r\n\r\nlet GamestackEngine = function () {\r\n\r\n    var lib = {\r\n\r\n        game_windows:[],\r\n\r\n        all_objects:[],\r\n\r\n        DEBUG: false,\r\n\r\n        gui_mode: true,\r\n\r\n        __gameWindow: {}\r\n        ,\r\n\r\n        __sprites: [],\r\n\r\n        __animations: [],\r\n\r\n\r\n        spriteTypes: [],\r\n\r\n        systemSpriteTypes: ['player', 'enemy', 'background', 'interactive', 'terrain', 'weapon', 'subsprite'],\r\n\r\n        samples: {}\r\n        ,\r\n\r\n        log_modes: ['reqs', 'info', 'warning'],\r\n\r\n        log_mode: \"all\",\r\n\r\n        recursionCount: 0,\r\n\r\n        __gameWindowList: [],\r\n\r\n\r\n        getObjectById(id){\r\n\r\n            for (var x = 0; x < this.all_objects.length; x++) {\r\n                if (this.all_objects[x].id == id) {\r\n\r\n                    return this.all_objects[x];\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n        }\r\n        ,\r\n\r\n        interlog: function (message, div) //recursive safe :: won't go crazy with recursive logs\r\n        {\r\n            this.recursionCount++;\r\n\r\n            if (!isNaN(div) && this.recursionCount % div == 0) {\r\n                //   console.log('Interval Log:'+  message);\r\n\r\n            }\r\n\r\n        }\r\n        ,\r\n\r\n\r\n        create_id: function () {\r\n            var S4 = function () {\r\n                return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n            };\r\n            return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\r\n\r\n        },\r\n\r\n\r\n        error: function (quit, message) {\r\n\r\n            if (quit) {\r\n                throw new Error(message);\r\n\r\n            }\r\n            else {\r\n                console.error('E!' + message);\r\n\r\n            }\r\n\r\n        }\r\n        ,\r\n\r\n        info: function (m) {\r\n\r\n            if (GameStack.DEBUG) {\r\n\r\n                console.info('Info:' + m);\r\n\r\n            }\r\n        }\r\n        ,\r\n\r\n\r\n        log: function (m) {\r\n\r\n            if (GameStack.DEBUG) {\r\n\r\n                console.log('GameStack:' + m);\r\n\r\n            }\r\n        }\r\n        ,\r\n\r\n        Extendors:{\r\n\r\n            hasInit:function(obj, args, f)\r\n            {\r\n\r\n\r\n            },\r\n\r\n            hasOnComplete:function(obj, args, f)\r\n            {\r\n\r\n\r\n            },\r\n\r\n            hasMultiOnComplete:function(obj, args, f)\r\n            {\r\n\r\n\r\n            },\r\n\r\n            hasOnRun:function(obj, args, f)\r\n            {\r\n\r\n\r\n            },\r\n\r\n            hasMultiOnRun:function(obj, args, f)\r\n            {\r\n\r\n\r\n            },\r\n\r\n            hasOnCollide(obj, args, f)\r\n            {\r\n\r\n\r\n\r\n            },\r\n\r\n            hasMultiOnCollide(obj, args, f)\r\n            {\r\n\r\n\r\n\r\n            },\r\n\r\n            collideable(obj, args)\r\n            {\r\n\r\n                obj.collision_callback = function(){};\r\n\r\n                obj.onCollide = args.onCollide || function(collideables, callback)\r\n                {\r\n                    if(typeof(collideables) == 'function')\r\n                    {\r\n                        callback = collideables;\r\n\r\n                    }\r\n\r\n                    this.collision_callback = callback || function(){};\r\n\r\n                };\r\n\r\n            },\r\n\r\n            spatial(obj)\r\n            {\r\n                obj.Size = function(s){\r\n                    this.size = new Gamestack.Vector(s, s, s);\r\n                    return this;\r\n                };\r\n\r\n                obj.Pos = function(p){\r\n                    this.position = new Gamestack.Vector(p, p, p);\r\n                    return this;\r\n                };\r\n\r\n                obj.Rot = function(r){\r\n                    this.rotation = new Gamestack.Vector(r, r, r);\r\n                    return this;\r\n                };\r\n\r\n                obj.Position = obj.Pos;\r\n\r\n                obj.Rotate = obj.Rot;\r\n\r\n                obj.Rotation = obj.Rot;\r\n\r\n            },\r\n\r\n            informable(obj, args)\r\n            {\r\n                obj.name = Gamestack.getArg(args, 'name', \"__\");\r\n\r\n                obj.description = Gamestack.getArg(args, 'description', false);\r\n            },\r\n\r\n            tweenable(obj, args)\r\n            {\r\n\r\n                obj.curve_string = args.curve_string || \"linearNone\";\r\n\r\n                obj.setTweenCurve=function(c) {\r\n\r\n                    c = c || \"linear_none\";\r\n\r\n                var cps = c.split('_');\r\n\r\n                alert(cps);\r\n\r\n                var s1 = cps[0].toLowerCase(), s2 = cps[1].toLowerCase();\r\n\r\n                var curve = TWEEN.Easing.Linear.None;\r\n\r\n                obj.curve_string = 'linear_none'\r\n\r\n                $.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n                    $.each(TWEEN.Easing[ix], function (iy, easeType) {\r\n\r\n                        if (ix == s1 && iy == s2) {\r\n\r\n                            // alert('setting curve');\r\n\r\n                            curve = TWEEN.Easing[ix][iy];\r\n\r\n                            obj.curve_string = ix + '_' + iy;\r\n\r\n                        }\r\n\r\n                    });\r\n\r\n\r\n                });\r\n\r\n                   obj.curve = curve;\r\n\r\n                return curve;\r\n\r\n            };\r\n\r\n                obj.curvesToArray=function() {\r\n\r\n                var c = [];\r\n\r\n                GameStack.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n                    GameStack.each(easing, function (iy, easeType) {\r\n\r\n                        if (['in', 'out', 'inout', 'none'].indexOf(iy.toLowerCase()) >= 0) {\r\n\r\n                            c.push(ix + \"_\" + iy);\r\n\r\n                        }\r\n\r\n                    });\r\n\r\n                });\r\n\r\n                return c;\r\n\r\n            };\r\n\r\n            },\r\n\r\n            applyParentalArgs(obj, args)\r\n            {\r\n\r\n                if(args.parent instanceof Gamestack.Sprite)\r\n                {\r\n                    alert('parent was Sprite()');\r\n\r\n                    obj.parent = args.parent;\r\n\r\n                    obj.parent_id = obj.parent.id;\r\n\r\n                }\r\n                else\r\n                {\r\n                    obj.parent_id = args.parent_id || args.object_id || \"__blank\"; //The parent object\r\n\r\n                    obj.parent = Gamestack.getObjectById(obj.parent_id);\r\n                }\r\n\r\n                return obj.parent;\r\n\r\n            }\r\n\r\n\r\n        },\r\n\r\n        ChainSet: {\r\n\r\n            informable: function (obj) {\r\n\r\n                obj.Info = function (name, description) {\r\n\r\n                    this.name = name;\r\n\r\n                    this.description = description;\r\n\r\n                    return this;\r\n                };\r\n\r\n            },\r\n\r\n            posable: function (obj) {\r\n\r\n                obj.Position = function () {\r\n                    if (typeof(p) == 'number') {\r\n                        this.position = new Gamestack.Vector(p, p, p);\r\n\r\n                    }\r\n                    else if (typeof(p) == 'object') {\r\n\r\n                        this.position = p;\r\n\r\n                    }\r\n\r\n                    return this;\r\n\r\n                };\r\n\r\n\r\n            },\r\n\r\n            rotable: function (obj) {\r\n\r\n                obj.Rotation = function () {\r\n                    if (typeof(p) == 'number') {\r\n                        this.position = new Gamestack.Vector(p, p, p);\r\n\r\n                    }\r\n                    else if (typeof(p) == 'object') {\r\n\r\n                        this.position = p;\r\n\r\n                    }\r\n\r\n                    return this;\r\n\r\n                };\r\n\r\n\r\n            }\r\n        },\r\n\r\n\r\n        //animate() : main animation call, run the once and it will recurse with requestAnimationFrame(this.animate);\r\n\r\n\r\n        Collision: {\r\n\r\n            spriteRectanglesCollide(obj1, obj2, gw)\r\n            {\r\n                gw = gw || Gamestack.game_windows[0];\r\n\r\n                var camPos = new Gamestack.Vector(0, 0, 0);\r\n\r\n                obj1.padding = obj1.padding || new Gamestack.Vector(0, 0, 0);\r\n\r\n                var paddingX = Math.round(obj1.padding.x * obj1.size.x),\r\n\r\n                    paddingY = Math.round(obj1.padding.y * obj1.size.y), left = obj1.position.x + paddingX + camPos.x,\r\n\r\n                    right = obj1.position.x + obj1.size.x - paddingX + camPos.x,\r\n\r\n                    top = obj1.position.y + camPos.y + paddingY, bottom = obj1.position.y + obj1.size.y - paddingY+ camPos.y;\r\n\r\n                if (right > obj2.position.x && left < obj2.position.x + obj2.size.x &&\r\n                    bottom > obj2.position.y && top < obj2.position.y + obj2.size.y) {\r\n\r\n                    return true;\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n        ,\r\n\r\n        _gameWindow: {}\r\n        ,\r\n\r\n        setGameWindow: function (gameWindow) {\r\n\r\n            this._gameWindow = gameWindow;\r\n\r\n        }\r\n        ,\r\n\r\n\r\n        ExtendEvents: function (extendedObject, extendedKey, extendor, extendorKey) {\r\n            var evtLink = new GSEventLink(extendedObject, extendedKey, extendor, extendorKey);\r\n\r\n            this.all_objects.push(new GSEventLink(extendedObject, extendedKey, extendor, extendorKey));\r\n\r\n            var parent = extendedObject;\r\n\r\n            // console.log(parent);\r\n\r\n            if (parent) {\r\n                console.log('Gamestack:EXTENDING EVENTS:' + extendedKey + \":\" + extendorKey);\r\n\r\n                if (parent.onRun) //Any extendable object has an onRun ... OR\r\n                {\r\n                    parent.onRun(extendor, extendorKey);\r\n\r\n                }\r\n                if (parent.onComplete) //object has an onComplete\r\n                {\r\n                    parent.onComplete(extendor, extendorKey);\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n        },\r\n\r\n        removeOffscreenObjects: function (gw) {\r\n\r\n            gw = gw || Gamestack.game_windows[0];\r\n\r\n            Gamestack.each(Gamestack.all_objects, function (ix, item) {\r\n\r\n                if (item instanceof Gamestack.Sprite && item.onScreen() == false && !item.__keepAlive && !item.keepAlive) {\r\n\r\n                    gw.remove(item);\r\n\r\n                }\r\n            });\r\n        },\r\n\r\n        removeDeadObjects: function (gw) {\r\n\r\n            gw = gw || Gamestack.game_windows[0];\r\n\r\n            Gamestack.each(Gamestack.all_objects, function (ix, item) {\r\n\r\n                if (item instanceof Gamestack.Sprite && item.isDead()) {\r\n\r\n                   // console.log('removing:' + item.image.domElement.src);\r\n                    gw.remove(item);\r\n\r\n                }\r\n            });\r\n        },\r\n\r\n        getGameWindow: function () {\r\n\r\n\r\n            return this._gameWindow;\r\n\r\n        }\r\n        ,\r\n\r\n        assignAll: function (object, args, keys) {\r\n\r\n            __gameStack.each(keys, function (ix, item) {\r\n\r\n                object[ix] = args[ix];\r\n\r\n            });\r\n\r\n\r\n        }\r\n        ,\r\n\r\n\r\n        each: function (list, onResult, onComplete) {\r\n            for (var i in list) {\r\n                onResult(i, list[i]);\r\n            }\r\n\r\n            if (typeof(onComplete) === 'function') {\r\n                onComplete(false, list)\r\n            }\r\n            ;\r\n\r\n        }\r\n        ,\r\n\r\n        ready_callstack: [],\r\n\r\n        ready: function (callback) {\r\n\r\n            this.ready_callstack.push(callback);\r\n\r\n        }\r\n\r\n        ,\r\n\r\n        reload: function () {\r\n            this.callReady();\r\n\r\n        },\r\n\r\n        callReady: function () {\r\n\r\n            var funx = this.ready_callstack;\r\n\r\n            var gameWindow = this._gameWindow, lib = this, objects = this.__gameWindow.objects;\r\n\r\n            //call every function in the ready_callstack\r\n\r\n\r\n            this.each(funx, function (ix, call) {\r\n\r\n                call(lib, gameWindow, objects);\r\n\r\n            });\r\n\r\n            this.InputSystem.init();\r\n\r\n            this.__running = true;\r\n\r\n        }\r\n        ,\r\n\r\n        getArg: function (args, keys, fallback) {\r\n\r\n            if (typeof(keys) == 'string') {\r\n                keys = [keys]; //always array\r\n            }\r\n            for (var x = 0; x < keys.length; x++) {\r\n                var k = keys[x];\r\n\r\n                if (args && args.hasOwnProperty(k)) {\r\n                    return args[k]; //return first argument match\r\n                }\r\n            }\r\n            return fallback;\r\n        }\r\n        ,\r\n\r\n        normalArgs: function (args) {\r\n\r\n            var a = {};\r\n\r\n            function normal(str) {\r\n                return str.toLowerCase().replace('-', '').replace(' ', '').replace('_', '')\r\n            };\r\n\r\n            for (var x in args) {\r\n                a[normal(x)] = args[x];\r\n            }\r\n\r\n            return a;\r\n        }\r\n        ,\r\n\r\n        isNormalStringMatch: function (str1, str2) {\r\n\r\n            return str1.toLowerCase().replace(' ', '') == str2.toLowerCase().replace(' ', '');\r\n\r\n        },\r\n\r\n        instance_type_pairs: function () {\r\n\r\n            //get an array of all instance/type pairs added to the library\r\n\r\n            //example : [ {constructor_name:Sprite, type:enemy_basic}, {constructor_name:Animation, type:enemy_attack}  ];\r\n\r\n            var objectList = [];\r\n\r\n            this.each(this.all_objects, function (ix, item) {\r\n\r\n                objectList.push({constructor_name: item.constructor.name, type: item.type});\r\n\r\n            });\r\n\r\n            return objectList;\r\n\r\n        },\r\n\r\n        getById: function (id) {\r\n\r\n            for (var x in this.all_objects) {\r\n                if (this.all_objects[x].id == id) {\r\n                    return this.all_objects[x];\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        select: function (constructor_name, name, type /*ignoring spaces and CAPS/CASE on type match*/) {\r\n\r\n            var objects_out = [];\r\n\r\n            var __inst = this;\r\n\r\n            this.each(this.all_objects, function (ix, item) {\r\n\r\n                if (constructor_name == '*' || item.constructor.name == constructor_name) {\r\n\r\n                    if (type == '*' || __inst.isNormalStringMatch(type, item.type)) {\r\n\r\n                        if (name == '*' || __inst.isNormalStringMatch(name, item.name)) {\r\n\r\n                            objects_out.push(item);\r\n\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            });\r\n\r\n            return objects_out;\r\n        }\r\n    }\r\n\r\n    return lib;\r\n\r\n};\r\n\r\n\r\nlet GamestackApi =\r\n    {\r\n        get: function () {\r\n\r\n\r\n        },\r\n\r\n        post: function (object) {\r\n            //TODO decycle the object before saving\r\n\r\n            if (!object.id) {\r\n                object.id = Gamestack.create_id();\r\n\r\n            }\r\n\r\n            var name = object.name, type = object.constructor.name, contents = jstr(object), id = object.id;\r\n\r\n\r\n        }\r\n\r\n    };\r\n\r\nclass GSO //Gamestack-Overrideable\r\n{\r\n    constructor(args={})\r\n    {\r\n\r\n        this.run_ext = args.run_ext || [];\r\n\r\n        this.complete_ext = args.complete_ext || [];\r\n\r\n    }\r\n\r\n\r\n    /*****\r\n     * Overridable / Extendable functions\r\n     * -allows stacking of external object-function calls\r\n     ******/\r\n\r\n    onRun(caller, callkey) {\r\n        this.run_ext = this.run_ext || [];\r\n\r\n        if (this.run_ext.indexOf(caller[callkey]) == -1) {\r\n            this.run_ext.push({caller: caller, callkey: callkey});\r\n        }\r\n    }\r\n\r\n    onComplete(caller, callkey) {\r\n        this.complete_ext = this.complete_ext || [];\r\n\r\n        if (this.complete_ext.indexOf(caller[callkey]) == -1) {\r\n            this.complete_ext.push({caller: caller, callkey: callkey});\r\n        }\r\n    }\r\n\r\n    call_on_run() {\r\n        //call any function extension that is present\r\n        for (var x = 0; x < this.run_ext.length; x++) {\r\n            this.run_ext[x].caller[this.run_ext[x].callkey]();\r\n        }\r\n    }\r\n\r\n    call_on_complete() {\r\n        //call any function extension that is present\r\n        for (var x = 0; x < this.complete_ext.length; x++) {\r\n            this.complete_ext[x].caller[this.complete_ext[x].callkey]();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n/**\r\n * GameImage\r\n *\r\n * Simple GameImage\r\n * @param   {string} src source name/path of the targeted image-file\r\n\r\n * @returns {GameImage} object of GameImage()\r\n\r\n * */\r\n\r\nclass GameImage {\r\n\r\n    constructor(src, onCreate) {\r\n\r\n        // GameStack.log('initializing image');\r\n\r\n        if (!src || src instanceof String && !['.jpg', '.png', '.gif'].indexOf(src.toLowerCase()) >= 0) {\r\n            console.info('Requested an UNDEFINED or Non-Image-File for image src');\r\n            return {};\r\n        }\r\n\r\n        if (src instanceof Object && src.src) {\r\n\r\n            //alert('getting image from image');\r\n\r\n            this.image = document.createElement('IMG');\r\n\r\n            this.image.src = src.src;\r\n\r\n            this.src = src.src;\r\n\r\n        }\r\n\r\n        else if (typeof(src) == 'string') {\r\n\r\n            let ext = src.substring(src.lastIndexOf('.'), src.length);\r\n\r\n            this.image = document.createElement('IMG');\r\n\r\n            this.image.src = src;\r\n\r\n            this.src = this.image.src;\r\n\r\n        }\r\n\r\n        if (!this.image) {\r\n            this.image = {error: \"Image not instantiated, set to object by default\"};\r\n\r\n            return {};\r\n\r\n        }\r\n        else {\r\n            this.image.onerror = function () {\r\n                this.__error = true;\r\n            };\r\n\r\n        }\r\n\r\n        this.domElement = this.image;\r\n\r\n        if (src.data || src.image && src.image.data) {\r\n            console.info('GameImage() : found and applied image.data');\r\n            this.data = src.data;\r\n\r\n        }\r\n\r\n\r\n        var __inst = this;\r\n\r\n        this.image.onload = function () {\r\n\r\n            if (typeof(this.onCreate) == 'function') {\r\n\r\n                this.onCreate(this.image);\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    getImage() {\r\n        return this.image;\r\n    }\r\n\r\n}\r\n\r\n\r\n//GameStack: a main / game lib object::\r\n//TODO: fix the following set of mixed references:: only need to refer to (1) lib-object-instance\r\nlet GameStack = new GamestackEngine();\r\nGamestack = GameStack;\r\nlet __gameStack = GameStack;\r\nlet Quick2d = GameStack; //Exposing 'Quick2d' as synonymous reference to Gamestack\r\nlet __gameInstance = Gamestack;\r\n\r\nGamestack.Sound = Sound;\r\nGamestack.GameImage = GameImage;\r\n\r\nif (typeof module !== 'undefined' && module.exports) {\r\n\r\n    //This library is being instaniated via require() aka node.js require or similar library loader\r\n    module.exports = Gamestack;\r\n\r\n} else {\r\n\r\n\r\n}\r\n\r\n/***************\r\n * TODO : fix the above duplicate references, which exist now for backward compatibility with previouslyh authored code\r\n *\r\n *  -apply find and replace accross the codebase\r\n *\r\n * ****************/\r\n\r\n/********\r\n * jstr() : public function for stringified objects and arrays (uses pretty print style)\r\n * *********/\r\n\r\nfunction jstr(obj) {\r\n\r\n    return JSON.stringify(obj);\r\n\r\n};\r\n\r\nGamestack.jstr = jstr;\r\n\r\n/**********\r\n * $Q : Selector Function\r\n *  -allows string selection of library collections, etc...\r\n * Example Calls\r\n * **********/\r\n\r\n\r\nfunction $Q(selector) {\r\n\r\n    //declare events:\r\n\r\n\r\n    var $GFunx = {};\r\n\r\n    $GFunx.each = function (callback) {\r\n\r\n        var objects = [];\r\n\r\n        for (var x = 0; x < this.length; x++) {\r\n            if (typeof x == 'number') {\r\n\r\n                callback(x, this[x]);\r\n            }\r\n\r\n        }\r\n\r\n\r\n    };\r\n\r\n    $GFunx.on = function (evt_key, selectorObject, controller_ix, callback) //handle each event such as on('collide') OR on('stick_left_0') << first controller stick_left\r\n    {\r\n\r\n        var criterion = $Q.between('[', ']', evt_key);\r\n\r\n        if (criterion.indexOf('===') >= 0) {\r\n            criterion = criterion.replace('===', '=');\r\n        }\r\n\r\n        if (criterion.indexOf('==') >= 0) {\r\n            criterion = criterion.replace('==', '=').replace('==', 0);\r\n        }\r\n\r\n        var cparts = criterion.split('=');\r\n\r\n        var __targetType = \"*\", __targetName = \"*\";\r\n\r\n        if (evt_key.indexOf('[') >= 0) {\r\n            evt_key = $Q.before('[', evt_key).trim();\r\n\r\n        }\r\n\r\n\r\n        var padding = 0;\r\n\r\n        //if controller_ix is function, and callback not present, then controller_ix is the callback aka optional argument\r\n\r\n        if (controller_ix && typeof controller_ix == 'function' && !callback) {\r\n            callback = controller_ix;\r\n            controller_ix = 0;\r\n        }\r\n\r\n        //if controller_ix is function, and callback not present, then selectorObject is the callback aka optional argument\r\n\r\n        if (selectorObject && typeof selectorObject == 'function' && !callback) {\r\n\r\n            callback = selectorObject;\r\n\r\n            selectorObject = $Q('*');\r\n\r\n            controller_ix = 0;\r\n        }\r\n        ;\r\n\r\n        var evt_profile = {};\r\n\r\n        //which controller?\r\n\r\n        evt_profile.cix = controller_ix;\r\n\r\n        //Need the control key: 'left_stick', 'button_0', etc..\r\n\r\n        evt_profile.evt_key = evt_key;\r\n\r\n        if ($Q.contains_any(['stick', 'button', 'click', 'key'], evt_profile.evt_key)) {\r\n\r\n            var button_mode = evt_profile.evt_key.indexOf('button') >= 0;\r\n\r\n            Gamestack.GamepadAdapter.on(evt_profile.evt_key, 0, function (x, y) {\r\n\r\n                callback(x, y);\r\n\r\n            });\r\n\r\n            console.info('detected input event key in:' + evt_profile.evt_key);\r\n\r\n            console.info('TODO: rig events');\r\n\r\n        }\r\n\r\n        //TODO: test collision events:\r\n\r\n        else if ($Q.contains_any(['collide', 'collision', 'hit', 'touch'], evt_profile.evt_key)) {\r\n\r\n            console.info('Rigging a collision event');\r\n\r\n            console.info('detected collision event key in:' + evt_profile.evt_key);\r\n\r\n            console.info('TODO: rig collision events');\r\n\r\n            this.each(function (ix, item1) {\r\n\r\n                console.info('Collision Processing 1:' + item1.name);\r\n                console.info('Collision Processing 1:' + item1.type);\r\n\r\n                selectorObject.each(function (iy, item2) {\r\n\r\n                    console.info('Collision Processing 2:' + item2.name);\r\n                    console.info('Collision Processing 2:' + item2.type);\r\n\r\n                    if (typeof(item1.onUpdate) == 'function') {\r\n\r\n                        item1.onUpdate(function (sprite) {\r\n\r\n                            if (item1.collidesRectangular(item2, padding)) {\r\n\r\n                                callback(item1, item2);\r\n\r\n                            }\r\n                            ;\r\n\r\n                        });\r\n\r\n                    }\r\n\r\n\r\n                });\r\n\r\n            });\r\n\r\n\r\n        }\r\n\r\n\r\n        else {\r\n            console.info('Rigging a property event');\r\n\r\n            //TODO: test property-watch events:\r\n\r\n            console.info('detected property threshhold event key in:' + evt_profile.evt_key);\r\n\r\n            console.info('TODO: rig property events');\r\n\r\n            var condition = \"_\", key = criterion || evt_profile.evt_key;\r\n\r\n            if (key.indexOf('[') >= 0 || key.indexOf(']') >= 0) {\r\n                key = $Q.between('[', ']', key);\r\n\r\n            }\r\n\r\n            var evt_parts = [];\r\n\r\n            var run = function () {\r\n                console.error('Sprite property check was not set correctly');\r\n\r\n            };\r\n\r\n            if (key.indexOf('>=') >= 0) {\r\n                condition = \">=\";\r\n\r\n\r\n            }\r\n            else if (key.indexOf('<=') >= 0) {\r\n                condition = \"<=\";\r\n            }\r\n            else if (key.indexOf('>') >= 0) {\r\n                condition = \">\";\r\n            }\r\n            else if (key.indexOf('<') >= 0) {\r\n                condition = \"<\";\r\n            }\r\n\r\n            else if (key.indexOf('=') >= 0) {\r\n                condition = \"=\";\r\n            }\r\n\r\n            evt_parts = key.split(condition);\r\n\r\n            for (var x = 0; x < evt_parts.length; x++) {\r\n                evt_parts[x] = evt_parts[x].replace('=', '').replace('=', '').trim(); //remove any trailing equals and trim()\r\n\r\n            }\r\n\r\n            var mykey, number;\r\n\r\n            // alert(evt_parts[0]);\r\n\r\n            try {\r\n\r\n                mykey = evt_parts[0];\r\n\r\n                number = parseFloat(evt_parts[1]);\r\n\r\n            }\r\n            catch (e) {\r\n                console.log(e);\r\n            }\r\n\r\n            console.info('Gamestack:Processing condition with:' + condition);\r\n\r\n            switch (condition) {\r\n\r\n                case \">=\":\r\n\r\n\r\n                    run = function (obj, key) {\r\n                        if (obj[key] >= number) {\r\n                            callback();\r\n                        }\r\n                    };\r\n\r\n                    break;\r\n\r\n                case \"<=\":\r\n\r\n                    run = function (obj, key) {\r\n                        if (obj[key] <= number) {\r\n                            callback();\r\n                        }\r\n                    };\r\n\r\n                    break;\r\n\r\n\r\n                case \">\":\r\n\r\n                    run = function (obj, key) {\r\n                        if (obj[key] > number) {\r\n                            callback();\r\n                        }\r\n                    };\r\n\r\n                    break;\r\n\r\n                case \"<\":\r\n\r\n                    run = function (obj, key) {\r\n                        if (obj[key] < number) {\r\n                            callback();\r\n                        }\r\n                    };\r\n\r\n                    break;\r\n\r\n                case \"=\":\r\n\r\n                    run = function (obj, key) {\r\n                        if (obj[key] == number) {\r\n                            callback();\r\n                        }\r\n                    };\r\n\r\n                    break;\r\n\r\n            }\r\n\r\n\r\n            /************\r\n             * Attach update to each member\r\n             *\r\n             * **************/\r\n\r\n            var keys = mykey.split('.'), propkey = \"\";\r\n\r\n            this.each(function (ix, item) {\r\n\r\n                var object = {};\r\n\r\n                if (keys.length == 1) {\r\n                    object = item;\r\n\r\n                    propkey = mykey;\r\n\r\n                }\r\n                else if (keys.length == 2) {\r\n                    object = item[keys[0]];\r\n\r\n                    propkey = keys[1];\r\n\r\n\r\n                }\r\n\r\n                else if (keys.length == 3) {\r\n                    object = item[keys[0]][keys[1]];\r\n\r\n                    propkey = keys[2];\r\n\r\n                }\r\n                else {\r\n                    console.error(\":length of '.' notation out of range. We use max length of 3 or prop.prop.key.\");\r\n\r\n                }\r\n\r\n                if (typeof item.onUpdate == 'function') {\r\n\r\n\r\n                    var spr = item;\r\n\r\n                    item.onUpdate(function (sprite) {\r\n\r\n                        run(object, propkey);\r\n\r\n                    });\r\n\r\n                }\r\n\r\n            });\r\n\r\n        }\r\n\r\n    };\r\n\r\n    var object_out = new Object();\r\n\r\n    //handle selector / selection of objects:\r\n\r\n    if (typeof(selector) !== 'string') {\r\n\r\n        if (typeof(selector) !== 'object') {\r\n            selector = {};\r\n        }\r\n\r\n        object_out = selector;\r\n    }\r\n    else {\r\n\r\n\r\n        if (selector && selector !== '*') {\r\n\r\n            var s = selector || '';\r\n\r\n            console.info('selector:' + s);\r\n\r\n\r\n            var mainSelector = $Q.before('[', s).trim(), msfChar = mainSelector.substring(0, 1);\r\n\r\n            var __targetClassName = \"*\";\r\n\r\n            var output = [];\r\n\r\n            var cleanSelectorString = function (str) {\r\n                return str.replace(\",\", \"\");\r\n            };\r\n\r\n            switch (msfChar.toLowerCase()) {\r\n                case \".\":\r\n\r\n                    console.info('Selecting by \".\" or class');\r\n\r\n                    __targetClassName = cleanSelectorString($Q.after('.', mainSelector));\r\n\r\n                    console.info('Target class is:' + __targetClassName);\r\n\r\n                    break;\r\n\r\n                case \"*\":\r\n\r\n                    console.info('Selecting by \"*\" or ANY object in the library instance');\r\n\r\n                    __targetClassName = \"*\";\r\n\r\n                    break;\r\n\r\n            }\r\n\r\n            var criterion = $Q.between('[', ']', s), cparts = criterion.split('=');\r\n\r\n            var __targetType = \"*\", __targetName = \"*\";\r\n\r\n            var getParts = function () {\r\n\r\n                if (cparts.length >= 2) {\r\n\r\n                    switch (cparts[0].toLowerCase()) {\r\n\r\n                        case \"name\":\r\n\r\n                            //get all objects according to name=name\r\n\r\n                            console.log('Q():Detected parts in selector:' + jstr(cparts));\r\n\r\n                            __targetName = cleanSelectorString(cparts[1]);\r\n\r\n                            break;\r\n\r\n                        case  \"type\":\r\n\r\n                            console.log('Q():Detected parts in selector:' + jstr(cparts));\r\n\r\n                            __targetType = cleanSelectorString(cparts[1]);\r\n\r\n                            break;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if (cparts.length >= 4) {\r\n\r\n                    cparts[2] = cparts[2].replace(\",\", \"\");\r\n\r\n                    switch (cparts[2].toLowerCase()) {\r\n\r\n                        case \"name\":\r\n\r\n                            //get all objects according to name=name\r\n\r\n                            console.log('Q():Detected parts in selector:' + jstr(cparts));\r\n\r\n                            __targetName = cleanSelectorString(cparts[3]);\r\n\r\n                            break;\r\n\r\n                        case  \"type\":\r\n\r\n                            console.log('Q():Detected parts in selector:' + jstr(cparts));\r\n\r\n                            __targetType = cleanSelectorString(cparts[3]);\r\n\r\n                            break;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            };\r\n\r\n            getParts(cparts);\r\n\r\n            object_out = GameStack.select(__targetClassName, __targetName, __targetType);\r\n\r\n        }\r\n        else if (selector == '*') {\r\n            object_out = GameStack.all_objects;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    for (var x in $GFunx) {\r\n\r\n        object_out[x] = $GFunx[x];\r\n\r\n    }\r\n    ;\r\n\r\n    return object_out;\r\n\r\n}\r\n\r\n\r\n$Q.each = function (obj, callback, complete) {\r\n\r\n    for (var x in obj) {\r\n        callback(obj);\r\n\r\n    }\r\n\r\n    if (typeof(complete) == 'function') {\r\n        complete(obj);\r\n\r\n    }\r\n\r\n};\r\n\r\n\r\n$Q.before = function (c1, test_str) {\r\n    var start_pos = 0;\r\n    var end_pos = test_str.indexOf(c1, start_pos);\r\n    return test_str.substring(start_pos, end_pos);\r\n};\r\n\r\n\r\n$Q.contains = function (c1, test_str) {\r\n    return test_str.indexOf(c1) >= 0;\r\n};\r\n\r\n$Q.contains_all = function (cList, test_str) {\r\n    for (var x = 0; x < cList.length; x++) {\r\n        if (test_str.indexOf(cList[x]) < 0) {\r\n            return false;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    return true;\r\n\r\n};\r\n\r\n$Q.contains_any = function (cList, test_str) {\r\n\r\n    for (var x = 0; x < cList.length; x++) {\r\n        if (test_str.indexOf(cList[x]) >= 0) {\r\n            return true;\r\n\r\n        }\r\n    }\r\n\r\n    return false;\r\n\r\n};\r\n\r\n$Q.after = function (c1, test_str) {\r\n    var start_pos = test_str.indexOf(c1) + 1;\r\n    var end_pos = test_str.length;\r\n    return test_str.substring(start_pos, end_pos);\r\n};\r\n\r\n$Q.between = function (c1, c2, test_str) {\r\n    var start_pos = test_str.indexOf(c1) + 1;\r\n    var end_pos = test_str.indexOf(c2, start_pos);\r\n    return test_str.substring(start_pos, end_pos)\r\n};\r\n\r\n\r\n$Q.test_selector_method = function () { //leftover method of hand-testing\r\n    var Q_TestStrings = ['*', '.Sprite', '*[type=\"enemy_type_0\"]', '.Sprite[type=\"enemy_type_0\"]'];\r\n\r\n    for (var x = 0; x < Q_TestStrings.length; x++) {\r\n        var test = Q_TestStrings[x];\r\n\r\n        console.info('testing:' + test);\r\n\r\n        $Q(test);\r\n    }\r\n\r\n    console.log('Testing stick left');\r\n\r\n    this.on('stick_left_0');\r\n\r\n    console.log('Testing button');\r\n\r\n    this.on('button_0');\r\n\r\n\r\n    console.log('Testing collide');\r\n\r\n    this.on('collide');\r\n\r\n\r\n    console.log('Testing button');\r\n\r\n    this.on('collide');\r\n\r\n    console.log('Testing prop');\r\n\r\n    this.on('health>=0');\r\n\r\n\r\n};\r\n\r\n\r\nGamestack.$Q = $Q;\r\n\r\nGamestack.query = $Q;\r\n\r\n/********************\r\n * GameStack.InputSystem\r\n * -Various PC Input Events\r\n ********************/\r\n\r\nGamestack.InputSystem = {\r\n\r\n    //PC input events\r\n\r\n    events:{\r\n\r\n        mousemove: [],\r\n        leftclick:{},\r\n        rightclick:{},\r\n        middleclick: [],\r\n        wheelup: [],\r\n        wheelDown: []\r\n    },\r\n\r\n    keymap:{},\r\n\r\n    keyReplace: function (str) {\r\n        return str.toLowerCase().replace('space', ' ').replace('left', String.fromCharCode(37)).replace('left', String.fromCharCode(37)).replace('up', String.fromCharCode(38)).replace('right', String.fromCharCode(39)).replace('down', String.fromCharCode(40));\r\n    },\r\n\r\n    extendKey: function (evt_key, callback, onFinish) {\r\n\r\n        evt_key = this.keyReplace(evt_key);\r\n\r\n        Gamestack.InputSystem.keymap[evt_key] = {\r\n\r\n            down: false,\r\n\r\n            callback: function () {\r\n                callback(evt_key);\r\n\r\n            }\r\n\r\n        };\r\n\r\n        return Gamestack.InputSystem.keymap[evt_key];\r\n\r\n    },\r\n\r\n    extend: function (evt_key, downCall, upCall, onFinish) {\r\n\r\n        evt_key = evt_key.toLowerCase();\r\n\r\n        Gamestack.InputSystem[evt_key] = {\r\n\r\n            down: downCall,\r\n\r\n            up: upCall\r\n\r\n        };\r\n\r\n        return Gamestack.InputSystem[evt_key];\r\n\r\n    },\r\n\r\n\r\n    init: function () {\r\n\r\n\r\n        window.setInterval(function () {\r\n\r\n            Gamestack.each(GameStack.InputSystem.keymap, function (im, kmapItem) {\r\n\r\n                if (kmapItem.down == true) {\r\n\r\n                    kmapItem.callback();\r\n\r\n                }\r\n\r\n            });\r\n\r\n        }, 10);\r\n\r\n        document.onkeydown = document.onkeyup = function (e) {\r\n\r\n            e = e || event; // to deal with IE\r\n\r\n            var gs_key_string = 'key_' + String.fromCharCode(e.keyCode),\r\n\r\n                evt_object = Gamestack.InputSystem['keymap'][gs_key_string] ||  Gamestack.InputSystem['keymap'][gs_key_string.toLowerCase()];\r\n\r\n            if (evt_object) {\r\n                evt_object.down = e.type == 'keydown';\r\n\r\n            }\r\n\r\n        }\r\n\r\n        var canvases = document.getElementsByTagName('CANVAS');\r\n\r\n\r\n        function getMousePos(e, c) {\r\n\r\n            var x;\r\n            var y;\r\n            if (e.pageX || e.pageY) {\r\n                x = e.pageX;\r\n                y = e.pageY;\r\n            } else {\r\n                x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n                y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n            }\r\n            x -= c.offsetLeft;\r\n            y -= c.style.top;\r\n            return {x: x, y: y};\r\n        }\r\n\r\n\r\n        function fullMoveInputSystem(event, c) {\r\n\r\n            var pos = getMousePos(event, c);\r\n            var InputSystem = GameStack.InputSystem;\r\n            for (var x in InputSystem.events) {\r\n\r\n                if (InputSystem.events[x] instanceof Array && x == 'mousemove') {\r\n\r\n                    GameStack.each(InputSystem.events[x], function (ix, el) {\r\n\r\n                        el.down(pos.x, pos.y);\r\n                    });\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n        ;\r\n\r\n\r\n        for (var x = 0; x < canvases.length; x++) {\r\n            var c = canvases[x];\r\n\r\n            function applyMouseMove(e) {\r\n                fullMoveInputSystem(e, c);\r\n\r\n            }\r\n\r\n            document.addEventListener(\"mousemove\", applyMouseMove);\r\n\r\n            c.onmousedown = function (e) {\r\n\r\n                //    alert(JSON.stringify(GameStack.InputSystem, true, 2));\r\n\r\n                var value = e.which;\r\n                var pos = getMousePos(e, c);\r\n                var InputSystem = GameStack.InputSystem;\r\n\r\n\r\n                e.preventDefault();\r\n\r\n                switch (e.which) {\r\n                    case 1:\r\n\r\n                        for (var x in InputSystem.events) {\r\n\r\n\r\n                            if (InputSystem.events[x] instanceof Array && x == 'leftclick') {\r\n\r\n\r\n                                GameStack.each(InputSystem.events[x], function (ix, el) {\r\n\r\n\r\n                                    el.down(pos.x, pos.y);\r\n                                });\r\n                            }\r\n\r\n\r\n                        }\r\n\r\n                        break;\r\n                    case 2:\r\n                        // alert('Middle Mouse button pressed.');\r\n\r\n\r\n                        for (var x in GameStack.InputSystem.events) {\r\n\r\n\r\n                            if (InputSystem.events[x] instanceof Array && x == 'middleclick') {\r\n\r\n\r\n                                GameStack.each(InputSystem.events[x], function (ix, el) {\r\n\r\n                                    el.down(pos.x, pos.y);\r\n                                });\r\n                            }\r\n\r\n\r\n                        }\r\n                        break;\r\n                    case 3:\r\n                        //  alert('Right Mouse button pressed.');\r\n\r\n\r\n                        for (var x in GameStack.InputSystem.events) {\r\n\r\n\r\n                            if (InputSystem.events[x] instanceof Array && x == 'rightclick') {\r\n\r\n\r\n                                GameStack.each(InputSystem.events[x], function (ix, el) {\r\n\r\n                                    el.down(pos.x, pos.y);\r\n                                });\r\n\r\n                                return false;\r\n                            }\r\n\r\n\r\n                        }\r\n\r\n                        break;\r\n                    default:\r\n\r\n                        return 0;\r\n                    //alert('You have a strange Mouse!');\r\n\r\n                }\r\n\r\n\r\n                e.preventDefault();\r\n                return 0;\r\n            };\r\n\r\n            c.onmouseup = function (e) {\r\n\r\n                //    alert(JSON.stringify(GameStack.InputSystem, true, 2));\r\n\r\n                var value = e.which;\r\n                var pos = getMousePos(e, c);\r\n                var InputSystem = GameStack.InputSystem;\r\n\r\n\r\n                e.preventDefault();\r\n\r\n                switch (e.which) {\r\n                    case 1:\r\n\r\n                        for (var x in InputSystem.events) {\r\n\r\n\r\n                            if (InputSystem.events[x] instanceof Array && x == 'leftclick') {\r\n\r\n\r\n                                GameStack.each(InputSystem.events[x], function (ix, el) {\r\n\r\n                                    el.up(pos.x, pos.y);\r\n                                });\r\n                            }\r\n\r\n\r\n                        }\r\n\r\n                        break;\r\n                    case 2:\r\n                        // alert('Middle Mouse button pressed.');\r\n\r\n\r\n                        for (var x in GameStack.InputSystem.events) {\r\n\r\n\r\n                            if (InputSystem.events[x] instanceof Array && x == 'middleclick') {\r\n\r\n\r\n                                GameStack.each(InputSystem.events[x], function (ix, el) {\r\n\r\n                                    el.up(pos.x, pos.y);\r\n                                });\r\n                            }\r\n\r\n\r\n                        }\r\n                        break;\r\n                    case 3:\r\n                        //  alert('Right Mouse button pressed.');\r\n\r\n\r\n                        for (var x in GameStack.InputSystem.events) {\r\n\r\n\r\n                            if (InputSystem.events[x] instanceof Array && x == 'rightclick') {\r\n\r\n\r\n                                GameStack.each(InputSystem.events[x], function (ix, el) {\r\n\r\n                                    el.up(pos.x, pos.y);\r\n                                });\r\n\r\n\r\n                                return false;\r\n\r\n                            }\r\n\r\n\r\n                        }\r\n\r\n                        break;\r\n                    default:\r\n\r\n                        return 0;\r\n                    //alert('You have a strange Mouse!');\r\n\r\n                }\r\n\r\n\r\n            };\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\n//Override the existing window.onload function\r\n\r\nwindow.onload = function () {\r\n\r\n    __gameStack.callReady();\r\n\r\n}\r\n\r\n\r\nGamestack.file_system = {\r\n\r\n    localizedSource: function (src, hostUrl) {\r\n\r\n        hostUrl = hostUrl || \"../\";\r\n\r\n        var gs_folder_ix = src.indexOf('assets/game');\r\n\r\n        return hostUrl + src.substring(gs_folder_ix, src.length);\r\n\r\n    },\r\n\r\n    loadJSON: function (filepath, callback) {\r\n\r\n        $.getJSON(filepath, function (data) {\r\n\r\n            callback(false, data);\r\n\r\n        });\r\n    },\r\n\r\n    loadJSONLevel: function (filepath, gw, callback) {\r\n\r\n        if(typeof(gw) == 'function' || !gw)\r\n        {\r\n            callback = gw || callback || function(){  };\r\n\r\n            gw = Gamestack.game_windows[0];\r\n        }\r\n\r\n\r\n        $.getJSON(filepath, function (data) {\r\n\r\n            //localize .src up to three levels of recursion (.src must be altered to refer locally)\r\n\r\n            $.each(data.sprites, function (ix, xitem) {\r\n\r\n                if (typeof(xitem.src) == 'string') {\r\n\r\n                    xitem.src = Gamestack.file_system.localizedSource(xitem.src);\r\n                }\r\n\r\n                __gameStack.each(xitem, function (iy, yitem) {\r\n\r\n                    if (yitem.src) {\r\n\r\n                        yitem.src = Gamestack.file_system.localizedSource(yitem.src);\r\n\r\n                    }\r\n\r\n                    __gameStack.each(yitem, function (iz, zitem) {\r\n\r\n                        if (zitem.src) {\r\n                            zitem.src = Gamestack.file_system.localizedSource(zitem.src);\r\n\r\n                        }\r\n\r\n\r\n                    });\r\n\r\n\r\n                });\r\n\r\n                xitem = new Gamestack.Sprite(xitem);\r\n\r\n                gw.add(xitem);\r\n                //sprite.image = sprite.selected_animation.image;\r\n\r\n\r\n                if (ix >= data.sprites.length - 1) {\r\n\r\n                    //last sprite is loaded //WHY DOESN't this work?\r\n\r\n                    callback(false, data);\r\n                }\r\n\r\n\r\n\r\n            });\r\n\r\n\r\n        });\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n/*\r\n * Canvas\r\n *    draw animations, textures to the screen\r\n * */\r\n\r\nGamestack.ready(function (lib) {\r\n\r\n    Gamestack.log('GameStack:lib :: ready');\r\n\r\n\r\n});\r\n\r\n\r\n/**\r\n * Instantiates a GameWindow object\r\n * @param   {Object} args : the object of arguments\r\n * @param   {Object} args.canvas : the canvas object of the window: GameWindow constructor will create one if not supplied in args\r\n *\r\n * @param   {Object} args.ctx : the canvas context\r\n *\r\n * @param   {Array} args.sprites : the list of sprites, to be applied with GameWindow\r\n *\r\n * @param   {Array} args.forces : the list of forces, such as gravity, to be applied with GameWindow\r\n *\r\n\r\n * @returns {GameWindow} object of GameWindow()\r\n * */\r\n\r\n\r\nclass GameWindow\r\n{\r\n    constructor({canvas = false, objects, update, camera}={})\r\n    {\r\n        this.objects = objects || [];\r\n\r\n        this.canvas = canvas || false;\r\n\r\n        if(!canvas)\r\n        {\r\n            console.info('GameWindow() had no {canvas:canvas} argument. Creating a new canvas in document.body...');\r\n            this.canvas = document.createElement('CANVAS');\r\n            document.body.append(this.canvas);\r\n        }\r\n\r\n        document.body.style.position = \"absolute\";\r\n\r\n        document.body.style.width = \"100%\";\r\n\r\n        document.body.style.height = \"100%\";\r\n\r\n        this.camera = new Gamestack.Camera();\r\n\r\n        this.camera.target = false;\r\n\r\n        __gameStack.camera = this.camera;\r\n\r\n        if (typeof update == 'function') {\r\n            this.onUpdate(update);\r\n\r\n        }\r\n\r\n        var __inst = this;\r\n\r\n        this.adjustSize();\r\n\r\n        this.update_ext = [];\r\n\r\n        window.onresize = function () {\r\n\r\n            __inst.adjustSize();\r\n\r\n        };\r\n\r\n        this.ctx = this.canvas.getContext('2d');\r\n\r\n        Gamestack.game_windows.push(this);\r\n\r\n    }\r\n\r\n    uniques(list) {\r\n\r\n        var listout = [];\r\n\r\n        $Q.each(list, function (ix, item) {\r\n\r\n            if (!listout.indexOf(item.id) >= 0) {\r\n\r\n                var str = item.name;\r\n\r\n                listout.push({\"sprite\": item});\r\n\r\n            }\r\n\r\n        });\r\n\r\n        return listout;\r\n\r\n    }\r\n\r\n    setPlayer(player) {\r\n        this.player = player;\r\n\r\n        if (!this.objects.indexOf(player) >= 0) {\r\n            this.objects.push(player);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    onUpdate(f)\r\n    {\r\n\r\n        this.update_ext.push(f);\r\n\r\n\r\n    }\r\n\r\n    update() {\r\n\r\n        GameStack.each(this.objects, function (ix, item) {\r\n\r\n            if (item && typeof(item.def_update) == 'function') {\r\n\r\n                item.def_update(item);\r\n\r\n            }\r\n\r\n            if (item && typeof(item.update) == 'function') {\r\n                item.update(item);\r\n\r\n            }\r\n\r\n        });\r\n\r\n        for(var x in this.update_ext)\r\n        {\r\n            this.update_ext[x]();\r\n\r\n        }\r\n\r\n    }\r\n\r\n    draw() {\r\n\r\n        var _gw = this;\r\n\r\n\r\n        if(this.before_draw_ext)\r\n        {\r\n            this.before_draw_ext();\r\n        }\r\n\r\n        GameStack.each(this.objects, function (ix, item) {\r\n\r\n            if (['Sprite', 'Background', 'Interactive', 'Terrain'].indexOf(item.constructor.name) >= 0 || item.__isDrawable) {\r\n\r\n                Gamestack.Canvas.draw(item, _gw.ctx);\r\n            }\r\n\r\n        });\r\n\r\n        if(this.draw_ext)\r\n        {\r\n            this.draw_ext();\r\n        }\r\n\r\n\r\n    }\r\n\r\n    onDraw(f) {\r\n\r\n        this.draw_ext = function(){ f(); };\r\n\r\n    }\r\n\r\n    onBeforeDraw(f) {\r\n\r\n        this.before_draw_ext = function(){ f(); };\r\n\r\n    }\r\n\r\n    adjustSize(w, h) { //fill to parent size\r\n\r\n        w = w || this.canvas.parentNode.clientWidth;\r\n\r\n        h = h || this.canvas.parentNode.clientHeight;\r\n\r\n        var c = document.getElementById('#gs-container');\r\n\r\n        if (c) {\r\n            c.setAttribute('width', w)\r\n        }\r\n        ;\r\n\r\n        if (c) {\r\n            c.setAttribute('height', h)\r\n        }\r\n        ;\r\n\r\n        __gameStack.WIDTH = w;\r\n\r\n        __gameStack.HEIGHT = h;\r\n\r\n        this.canvas.width = w;\r\n\r\n        this.canvas.height = h;\r\n\r\n    }\r\n\r\n    add(obj, onBottom) {\r\n    //1: if Sprite(), Add object to the existing __gameWindow\r\n\r\n    var __inst = this;\r\n\r\n    if (obj instanceof Gamestack.Camera) {\r\n\r\n        this.camera = obj;\r\n\r\n    }\r\n    else if (obj instanceof Gamestack.GSEvent) {\r\n\r\n        if (__gameStack.__running) {\r\n\r\n            return console.error('Events can only be added before Gamstack.animate() is called::aka before the main update / loop begins');\r\n        }\r\n        else {\r\n\r\n            obj.apply();\r\n\r\n\r\n        }\r\n\r\n    }\r\n    else {\r\n\r\n        if(onBottom)\r\n        {\r\n            this.objects.splice(0, 0, obj);\r\n        }\r\n        else {\r\n\r\n            this.objects.push(obj);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    this.collect(obj);\r\n\r\n    return obj;\r\n\r\n}\r\n\r\n\r\n\r\n    remove(obj) {\r\n\r\n    //1: if Sprite(), Add object to the existing __gameWindow\r\n\r\n    var ix = this.objects.indexOf(obj);\r\n\r\n    if (ix >= 0) {\r\n        this.objects.splice(ix, 1);\r\n    }\r\n\r\n\r\n        var ixG = Gamestack.all_objects.indexOf(obj);\r\n\r\n        if (ixG >= 0) {\r\n            Gamestack.all_objects.splice(ixG, 1);\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    collect(obj) {\r\n\r\n    Gamestack.all_objects.push(obj);\r\n\r\n}\r\n\r\n    animate(time) {\r\n\r\n        var __inst = this;\r\n\r\n        requestAnimationFrame(function(){\r\n\r\n            __inst.animate();\r\n\r\n        });\r\n\r\n\r\n        if (Gamestack.__stats) {\r\n        Gamestack.__stats.begin();\r\n        Gamestack.__statsMS.begin();\r\n        Gamestack.__statsMB.update();\r\n    }\r\n\r\n    __gameStack.isAtPlay = true;\r\n\r\n    if (window.TWEEN)\r\n        TWEEN.update(time);\r\n\r\n    __inst.update();\r\n\r\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n    this.draw();\r\n\r\n    if (Gamestack.__stats) {\r\n        Gamestack.__stats.end();\r\n        Gamestack.__statsMS.end();\r\n    }\r\n\r\n}\r\n\r\n    start() {\r\n\r\n    if (typeof(Stats) == 'function') //Stats library exists\r\n    {\r\n        //basic stat animation\r\n        Gamestack.__stats = new Stats();\r\n        Gamestack.__stats.showPanel(0); // 0: fps, 1: ms, 2: mb, 3+: custom\r\n\r\n        Gamestack.__stats.dom.style.left = '30%';\r\n\r\n        this.canvas.parentNode.appendChild(Gamestack.__stats.dom);\r\n\r\n        //basic stat animation\r\n        Gamestack.__statsMS = new Stats();\r\n        Gamestack.__statsMS.showPanel(1); // 0: fps, 1: ms, 2: mb, 3+: custom\r\n\r\n        Gamestack.__statsMS.dom.style.left = '30%';\r\n\r\n        Gamestack.__statsMS.dom.style.marginLeft = '90px';\r\n\r\n        this.canvas.parentNode.appendChild(Gamestack.__statsMS.dom);\r\n\r\n        //basic stat animation\r\n        Gamestack.__statsMB = new Stats();\r\n        Gamestack.__statsMB.showPanel(2); // 0: fps, 1: ms, 2: mb, 3+: custom\r\n\r\n        Gamestack.__statsMB.dom.style.left = '30%';\r\n\r\n        Gamestack.__statsMB.dom.style.marginLeft = '180px';\r\n\r\n        this.canvas.parentNode.appendChild(Gamestack.__statsMB.dom);\r\n\r\n    }\r\n\r\n    this.animate();\r\n}\r\n\r\n}\r\n\r\n\r\nclass FullScreenGameWindow extends GameWindow {\r\n\r\n    constructor(args={canvas = false, objects, update, camera}={}) {\r\n\r\n        super(args);\r\n\r\n        if (!this.canvas) {\r\n            console.info('creating new canvas');\r\n            this.canvas = document.createElement('CANVAS');\r\n\r\n            document.body.append(this.canvas);\r\n\r\n        }\r\n\r\n        this.canvas.style.position = 'absolute';\r\n\r\n        this.canvas.style.width = '100%';\r\n\r\n        this.canvas.style.height = '100%';\r\n\r\n        this.canvas.style.background = 'black';\r\n\r\n        var c = this.canvas;\r\n\r\n        this.ctx = this.canvas.getContext('2d');\r\n\r\n        __gameStack.canvas = this.canvas;\r\n\r\n        __gameStack.ctx = this.ctx;\r\n\r\n        this.adjustSize();\r\n\r\n        __gameStack.__gameWindow = this;\r\n    }\r\n\r\n    adjustSize(w, h) {\r\n        w = w || this.canvas.clientWidth;\r\n\r\n        h = h || this.canvas.clientHeight;\r\n\r\n        var c = document.getElementById('#gs-container');\r\n\r\n        if (c) {\r\n            c.setAttribute('width', w)\r\n        }\r\n        ;\r\n\r\n        if (c) {\r\n            c.setAttribute('height', h)\r\n        }\r\n        ;\r\n\r\n        __gameStack.WIDTH = w;\r\n\r\n        __gameStack.HEIGHT = h;\r\n\r\n        this.canvas.width = w;\r\n\r\n        this.canvas.height = h;\r\n\r\n    }\r\n}\r\n;\r\n\r\nGamestack.GameWindow = GameWindow;\r\n\r\n\r\n\r\n\r\n\r\n\r\n;\r\n(function(){\r\n    console.log('Animation class... creating');\r\n\r\n    /**\r\n     * Gamestack.Animation: Takes an object of arguments and returns Animation() object.\r\n     * @param   {Object} args object of arguments\r\n     * @param   {string} args.name optional\r\n     * @param   {string} args.description optional\r\n     * @param   {string} args.type optional\r\n     * @param   {Vector} args.size of the Animation object, has x and y properties\r\n     * @param   {Vector} args.frameSize the size of frames in Animation, having x and y properties\r\n     * @param   {VectorFrameBounds} args.frameBounds the bounds of the Animation having min, max, and termPoint properties\r\n     * @param   {number} args.delay optional, the seconds to delay before running animation when started by the start() function\r\n\r\n     * @param   {number} args.duration how many milliseconds the animation should take to complete\r\n     *\r\n     * @returns {Animation} an Animation object\r\n     */\r\n\r\n\r\n    class Animation {\r\n\r\n    constructor(args = {}) {\r\n\r\n        args = args || {};\r\n\r\n        if(typeof args == 'string')\r\n        {\r\n\r\n            this.image = new Gamestack.GameImage(args);\r\n            args = {};\r\n        }\r\n\r\n        for (var x in this.args) {\r\n            this[x] = args[x];\r\n\r\n        }\r\n\r\n        this.name = args.name || \"__animationName\";\r\n\r\n        this.description = args.description || \"__animationDesc\";\r\n\r\n        if(!this.image)\r\n        {\r\n            this.image = new Gamestack.GameImage(args.src || args.image);\r\n\r\n        }\r\n\r\n        var __inst = this, imgDom = this.image.domElement;\r\n\r\n        this.frameSize = new Gamestack.Vector(args.frameSize || new Gamestack.Vector(0, 0));\r\n\r\n\r\n        this.image.domElement.onload = function()\r\n        {\r\n            if(__inst.frameSize.x == 0 && __inst.frameSize.y == 0)\r\n            {\r\n\r\n                __inst.frameSize = new Gamestack.Vector(imgDom.width, imgDom.height);\r\n\r\n            }\r\n        }\r\n\r\n        if (args.frameBounds && args.frameBounds.min && args.frameBounds.max) {\r\n\r\n            this.frameBounds = new Gamestack.VectorFrameBounds(args.frameBounds.min, args.frameBounds.max, args.frameBounds.termPoint);\r\n\r\n        }\r\n        else\r\n        {\r\n            this.frameBounds = new Gamestack.VectorFrameBounds(new Gamestack.Vector(0, 0, 0), new Gamestack.Vector(0, 0, 0), new Gamestack.Vector(0, 0, 0))\r\n\r\n        }\r\n\r\n        this.frameOffset = this.getArg(args, 'frameOffset', new Gamestack.Vector(0, 0, 0));\r\n\r\n        this.apply2DFrames();\r\n\r\n        this.flipX = this.getArg(args, 'flipX', false);\r\n\r\n        this.cix = 0;\r\n\r\n        this.selected_frame = this.frames[0] || {};\r\n\r\n        this.timer = 0;\r\n\r\n        this.duration = args.duration || 2000;\r\n\r\n        this.seesaw_mode = args.seesaw_mode || false;\r\n\r\n        this.reverse_frames = args.reverse_frames || false;\r\n\r\n        this.run_ext = args.run_ext || [];\r\n\r\n        this.complete_ext = args.complete_ext || [];\r\n\r\n        Gamestack.ChainSet.informable(this);\r\n\r\n    }\r\n\r\n    /*****\r\n    * Overridable / Extendable functions\r\n    * -allows stacking of external object-function calls\r\n    ******/\r\n\r\n    onRun(call) {\r\n\r\n        if (this.run_ext.indexOf(call) == -1) {\r\n            this.run_ext.push(call);\r\n        }\r\n    }\r\n\r\n    onComplete(call) {\r\n\r\n        if (this.complete_ext.indexOf(call) == -1) {\r\n            this.complete_ext.push(call);\r\n        }\r\n    }\r\n\r\n    call_on_run() {\r\n        //call any function extension that is present\r\n        for (var x = 0; x < this.run_ext.length; x++) {\r\n            this.run_ext[x]();\r\n        }\r\n    }\r\n\r\n    call_on_complete() {\r\n        //call any function extension that is present\r\n        for (var x = 0; x < this.complete_ext.length; x++) {\r\n            this.complete_ext[x]();\r\n        }\r\n    }\r\n\r\n    reverseFrames() {\r\n\r\n        this.frames.reverse();\r\n\r\n    }\r\n\r\n    singleFrame(frameSize) {\r\n\r\n        this.__frametype = 'single';\r\n\r\n        this.frameSize = frameSize || this.frameSize;\r\n\r\n        this.selected_frame = {\r\n            image: this.image,\r\n            frameSize: this.frameSize,\r\n            framePos: {x: 0, y: 0}\r\n        };\r\n\r\n        this.frames[0] = this.selected_frame;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n    }\r\n\r\n    apply2DFrames() {\r\n\r\n        this.frames = [];\r\n\r\n        var fcount = 0;\r\n\r\n        var quitLoop = false;\r\n\r\n        for (let y = this.frameBounds.min.y; y <= this.frameBounds.max.y; y++) {\r\n\r\n            for (let x = this.frameBounds.min.x; x <= this.frameBounds.max.x; x++) {\r\n\r\n                let framePos = {\r\n                    x: x * this.frameSize.x + this.frameOffset.x,\r\n                    y: y * this.frameSize.y + this.frameOffset.y\r\n                };\r\n\r\n                this.frames.push({image: this.image, frameSize: this.frameSize, framePos: framePos});\r\n\r\n                if (x >= this.frameBounds.termPoint.x && y >= this.frameBounds.termPoint.y) {\r\n\r\n                    quitLoop = true;\r\n\r\n                    break;\r\n                }\r\n\r\n                fcount += 1;\r\n\r\n                if (quitLoop)\r\n                    break;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.frames[0] = !this.frames[0] ? {\r\n            image: this.image,\r\n            frameSize: this.frameSize,\r\n            framePos: {x: this.frameBounds.min.x, y: this.frameBounds.min.y}\r\n        } : this.frames[0];\r\n\r\n\r\n        if (this.seesaw_mode) {\r\n            console.log('ANIMATION: applying seesaw');\r\n\r\n            var frames_reversed = this.frames.slice().reverse();\r\n\r\n            this.frames.pop();\r\n\r\n            this.frames = this.frames.concat(frames_reversed);\r\n\r\n        }\r\n        if (this.reverse_frames) {\r\n            this.reverseFrames();\r\n        }\r\n\r\n        // this.selected_frame = this.frames[this.cix % this.frames.length] || this.frames[0];\r\n\r\n    }\r\n\r\n    update() {\r\n\r\n        this.selected_frame = this.frames[Math.round(this.cix) % this.frames.length];\r\n\r\n    }\r\n\r\n    reset() {\r\n\r\n        this.apply2DFrames();\r\n\r\n        this.cix = 0;\r\n\r\n    }\r\n\r\n    continuous() {\r\n\r\n        if (this.__frametype == 'single') {\r\n            return 0;\r\n\r\n        }\r\n\r\n        this.apply2DFrames();\r\n\r\n        //update once:\r\n        this.update();\r\n\r\n        if (this.cix == 0) {\r\n\r\n            this.engage();\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    engage(duration, complete) {\r\n\r\n        this.call_on_run();\r\n\r\n        duration = duration || this.duration || this.frames.length * 20;\r\n\r\n        if (this.__frametype == 'single') {\r\n            return 0;\r\n\r\n        }\r\n\r\n        let __inst = this;\r\n\r\n\r\n        //we have a target\r\n        this.tween = new TWEEN.Tween(this)\r\n            .easing(__inst.curve || TWEEN.Easing.Linear.None)\r\n\r\n            .to({cix: __inst.frames.length - 1}, duration)\r\n            .onUpdate(function () {\r\n                //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n                //   __inst.cix = Math.ceil(__inst.cix);\r\n\r\n                __inst.update();\r\n\r\n            })\r\n            .onComplete(function () {\r\n                //console.log(objects[0].position.x, objects[0].position.y);\r\n\r\n                __inst.cix = 0;\r\n\r\n\r\n                __inst.call_on_complete();\r\n\r\n\r\n                __inst.isComplete = true;\r\n\r\n            });\r\n\r\n        this.tween.start();\r\n\r\n    }\r\n\r\n    animate() {\r\n\r\n        this.apply2DFrames();\r\n\r\n        this.timer += 1;\r\n\r\n        if (this.delay == 0 || this.timer % this.delay == 0) {\r\n\r\n            if (this.cix >= this.frames.length - 1) {\r\n                this.call_on_complete();\r\n\r\n            }\r\n\r\n            this.cix = this.cix >= this.frames.length - 1 ? this.frameBounds.min.x : this.cix + 1;\r\n\r\n            this.update();\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n;\r\n\r\n        Gamestack.Animation = Animation;\r\n\r\n})();\r\n;\r\n\r\n(function(){\r\n    console.log('Camera class... creating');\r\n\r\n    /**\r\n     * Gamestack.Camera : has simple x, y, z, position / Vector values\r\n     *\r\n     * @returns {Vector}\r\n     */\r\n\r\n\r\n    class Camera\r\n{\r\n\r\n    constructor(args)\r\n    {\r\n\r\n      this.position = new Gamestack.Vector(0, 0, 0);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nGamestack.Camera = Camera;\r\n\r\n})();\r\n;\r\n\r\n/**\r\n * instantiates Gamestack.js Canvas (CanvasLib) controller\r\n\r\n @description\r\n This Canvas library handles the low-level drawing of Sprite() objects on HTML5Canvas.\r\n -draws Sprites(), handling their rotation, size, and other parameters.\r\n * @returns {CanvasLib} a CanvasLib object\r\n */\r\n\r\n(function(){\r\n    console.log('CanvasStack class... creating');\r\n\r\nclass CanvasStack {\r\n\r\n    constructor() {\r\n\r\n        return {\r\n\r\n            __levelMaker: false,\r\n\r\n            draw: function (sprite, ctx, camera) {\r\n\r\n                camera = camera || Gamestack.game_windows[0].camera || {position:new Gamestack.Vector(0, 0, 0)};\r\n\r\n                if (sprite.active && (this.__levelMaker || sprite.onScreen(__gameStack.WIDTH, __gameStack.HEIGHT))) {\r\n\r\n                    this.drawPortion(sprite, ctx, camera);\r\n\r\n                }\r\n\r\n            },\r\n            drawFrameWithRotation: function (img, fx, fy, fw, fh, x, y, width, height, deg, canvasContextObj, flipX, flipY) {\r\n\r\n                canvasContextObj.save();\r\n                deg = Math.round(deg);\r\n                deg = deg % 360;\r\n                var rad = deg * Math.PI / 180;\r\n                //Set the origin to the center of the image\r\n                canvasContextObj.translate(x, y);\r\n                canvasContextObj.rotate(rad);\r\n                //Rotate the canvas around the origin\r\n\r\n                canvasContextObj.translate(0, canvasContextObj.width);\r\n\r\n                if (flipX) {\r\n\r\n                    canvasContextObj.scale(-1, 1);\r\n                } else {\r\n\r\n                }\r\n\r\n                if (flipY) {\r\n\r\n                    canvasContextObj.scale(1, -1);\r\n                } else {\r\n\r\n                }\r\n\r\n                //draw the image\r\n                canvasContextObj.drawImage(img, fx, fy, fw, fh, width / 2 * (-1), height / 2 * (-1), width, height);\r\n                //reset the canvas\r\n\r\n                canvasContextObj.restore();\r\n            },\r\n\r\n\r\n\r\n            drawData:function(x, y, w, h, data, ctx){\r\n\r\n                ctx.putImageData(data, x, y, 0, 0, w, h);\r\n\r\n            },\r\n\r\n\r\n            /*\r\n             * drawPortion:\r\n             *\r\n             *   expects: (sprite{selected_animation{selected_frame{frameSize, framePos } offset?, gameSize? }  })\r\n             *\r\n             *\r\n             * */\r\n\r\n            drawPortion: function (sprite, ctx, camera) {\r\n\r\n                var frame;\r\n\r\n                if (sprite.active) {\r\n\r\n                    if (sprite.selected_animation instanceof Object && sprite.selected_animation.hasOwnProperty('selected_frame')) {\r\n\r\n                        frame = sprite.selected_animation.selected_frame;\r\n\r\n                    }\r\n                    else {\r\n\r\n                       // console.error('Sprite is missing arguments');\r\n                        //delay the draw\r\n\r\n                        return;\r\n\r\n                    }\r\n\r\n                    var p = sprite.position;\r\n\r\n                    var camera_pos = camera.position || {x: 0, y: 0, z: 0};\r\n\r\n                    if(!sprite.hasOwnProperty('scrollFactor'))\r\n                    {\r\n                        sprite.scrollFactor = 1.0;\r\n                    }\r\n\r\n                    var x = p.x, y = p.y, scrollFactor = sprite.scrollFactor >= 0 && sprite.scrollFactor <= 1.0 ? sprite.scrollFactor : 1.0;\r\n\r\n                    if(sprite.noScroll)\r\n                    {\r\n                        scrollFactor = 0;\r\n                    }\r\n\r\n\r\n                    x -= camera_pos.x * scrollFactor || 0;\r\n                    y -= camera_pos.y * scrollFactor || 0;\r\n                    //optional animation : gameSize\r\n\r\n                    var targetSize = sprite.size || sprite.selected_animation.size;\r\n\r\n                    var realWidth = targetSize.x;\r\n                    var realHeight = targetSize.y;\r\n\r\n                    //optional animation : offset\r\n\r\n                    if (sprite.selected_animation && sprite.selected_animation.hasOwnProperty('offset')) {\r\n                        x += sprite.selected_animation.offset.x;\r\n\r\n                        y += sprite.selected_animation.offset.y;\r\n\r\n                    }\r\n\r\n                    var rotation;\r\n\r\n                    if (typeof(sprite.rotation) == 'object') {\r\n\r\n                        rotation = sprite.rotation.x;\r\n\r\n\r\n                    }\r\n                    else {\r\n                        rotation = sprite.rotation;\r\n\r\n                    }\r\n\r\n                    var frame = sprite.selected_animation.selected_frame;\r\n\r\n                    if (frame && frame.image && frame.image.data) {\r\n\r\n                        ctx.putImageData(frame.image.data, x, y, 0, 0, sprite.size.x, sprite.size.y);\r\n\r\n                    }\r\n                    else {\r\n\r\n                        if(sprite.selected_animation.image.domElement instanceof HTMLImageElement) {\r\n\r\n                            this.drawFrameWithRotation(sprite.selected_animation.image.domElement, frame.framePos.x, frame.framePos.y, frame.frameSize.x, frame.frameSize.y, Math.round(x + (realWidth / 2)), Math.round(y + (realHeight / 2)), realWidth, realHeight, rotation % 360, ctx, sprite.flipX,  sprite.flipY);\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n    Gamestack.Canvas = new CanvasStack();\r\n\r\n    Gamestack.CanvasStack = CanvasStack;\r\n})();\r\n\r\n\r\n\r\n\r\n;\r\n\r\n(function(){\r\n    console.log('CollisionSettings class... creating');\r\n\r\n    class CollisionSettings\r\n{\r\n    constructor(args={})\r\n    {\r\n        this.fourway = args.fourway || args.four_way || false;\r\n\r\n        this.top = this.four_way || args.top || false;\r\n\r\n        this.bottom = this.four_way || args.bottom || false;\r\n\r\n        this.left = this.four_way || args.left || false;\r\n\r\n        this.right = this.four_way || args.right || false;\r\n\r\n        this.pixel = args.pixel || false;\r\n\r\n        this.stop = args.stop || false;\r\n\r\n        this.padding = args.padding || new Gamestack.Vector(0, 0, 0); // 0-1.0\r\n\r\n    }\r\n\r\n}\r\n\r\nGamestack.CollisionSettings = CollisionSettings;\r\n\r\n})();;\r\n /**\r\n * GravityForce, calling new GravityForce() is equivalent to calling new Force()\r\n  *\r\n  * Takes an object of arguments and returns GravityForce() Object.\r\n  *@param   {Object} args the object of arguments\r\n * @param   {string} args.name optional\r\n * @param   {string} args.description optional\r\n * @param   {Array} args.subjects the subjects to be pulled by the GravityForce\r\n * @param   {Array} args.clasticObjects any clastic object that should have collision-stop behavior with args.subjects when collision occurs\r\n * @param   {Vector} args.max the speed of gravity AKA terminal velocity\r\n * @param   {number} args.accel the increment to use when accelerating speed of fall\r\n *\r\n * @returns {Motion} a Motion object\r\n */\r\n\r\n\r\n\r\n (function(){\r\n     console.log('Force class... creating');\r\n\r\n\r\n     class GravityForce\r\n{\r\n    constructor(args)\r\n    {\r\n\r\n        this.name = args.name || \"\";\r\n\r\n        this.description = args.description || \"\";\r\n\r\n        this.subjects = args.subjects || [];\r\n\r\n        this.clasticObjects = args.clasticObjects || [];\r\n\r\n        this.topClastics = args.topClastics || [];\r\n\r\n        this.max = args.max || new Vector3(3, 3, 3);\r\n         this.accel = args.accel || new Vector3(1.3, 1.3, 1.3);\r\n\r\n\r\n        for(var x in this.clasticObjects)\r\n        {\r\n            if(!this.clasticObjects[x] instanceof Gamestack.Sprite)\r\n            {\r\n                this.clasticObjects[x] = Gamestack.getById(this.clasticObjects[x].id);\r\n            }\r\n\r\n        }\r\n\r\n\r\n        for(var x in this.topClastics)\r\n        {\r\n            if(!this.topClastics[x] instanceof Gamestack.Sprite)\r\n            {\r\n                this.topClastics[x] = Gamestack.getById(this.topClastics[x].id);\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n        for(var x in this.subjects)\r\n        {\r\n            if(!this.subjects[x] instanceof Gamestack.Sprite)\r\n            {\r\n                this.subjects[x] = Gamestack.getById(this.subjects[x].id);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    update()\r\n    {\r\n\r\n      var  subjects = this.subjects;\r\n\r\n       var clasticObjects =  this.clasticObjects;\r\n\r\n        var topClastics =  this.topClastics;\r\n\r\n      var  accel =  this.accel || {};\r\n\r\n        var max =  this.max || {};\r\n\r\n        __gameStack.each(subjects, function(ix, itemx){\r\n\r\n           itemx.accelY(accel, max);\r\n\r\n           itemx.__inAir = true;\r\n\r\n\r\n            if(itemx.position.y >= itemx.groundMaxY)\r\n            {\r\n\r\n\r\n                itemx.position.y = itemx.groundMaxY;\r\n\r\n            }\r\n\r\n            itemx.groundMaxY = 3000000; //some crazy number you'll never reach in-game\r\n\r\n            __gameStack.each(clasticObjects, function(iy, itemy){\r\n\r\n                itemx.collide_stop(itemy);\r\n\r\n            });\r\n\r\n            __gameStack.each(topClastics, function(iy, itemy){\r\n\r\n                itemx.collide_stop_top(itemy);\r\n\r\n            });\r\n\r\n        });\r\n    }\r\n};\r\n\r\nlet Force = GravityForce;\r\n\r\n Gamestack.Force = Force;\r\n\r\n Gamestack.GravityForce = GravityForce;\r\n\r\n })();\r\n\r\n\r\n\r\n;\r\n\r\n/**\r\n * ControllerEventKeys()\r\n *\r\n * <ul >\r\n *  <li> an object representation of the controller\r\n *  <li> all keys are set to false\r\n * </ul>\r\n * @returns {ControllerEventKeys} object of ControllerEventKeys()\r\n * */\r\n\r\n\r\nclass ControllerEventKeys\r\n{\r\n    constructor()\r\n    {\r\n        return {\r\n\r\n            left_stick:false,\r\n\r\n            right_stick:false,\r\n\r\n            0:false,\r\n\r\n            1:false,\r\n\r\n            2:false,\r\n\r\n            3:false,\r\n\r\n            4:false,\r\n\r\n            5:false,\r\n\r\n            6:false,\r\n\r\n            7:false,\r\n\r\n            8:false,\r\n\r\n            9:false,\r\n\r\n            10:false,\r\n\r\n            11:false,\r\n\r\n            12:false,\r\n\r\n            13:false,\r\n\r\n            14:false,\r\n\r\n            15:false,\r\n\r\n            16:false,\r\n\r\n            17:false,\r\n\r\n            18:false,\r\n\r\n            19:false\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nGamestack.ControllerEventKeys = ControllerEventKeys;\r\n\r\n\r\n/**\r\n * GamepadAdapter()\r\n *\r\n * <ul >\r\n *  <li> supports game-controller input for web-games\r\n *  <li> accesses live gamepad input from the HTML5 Gamepad Api\r\n * </ul>\r\n *\r\n * [See Live Demos with Suggested Usage-Examples]{@link http://www.google.com}\r\n * @returns {GamepadAdapter} object of GamepadAdapter()\r\n * */\r\n\r\n\r\nGameStack.gamepads = GameStack.gamepads || __gameInstance.gamepads;\r\n\r\nclass GamepadAdapter {\r\n\r\n    constructor() {\r\n\r\n        this.__gamepads = [];\r\n\r\n        this.intervals = [];\r\n\r\n        let controller_stack = this;\r\n\r\n        let __gamepadMaster = this;\r\n\r\n        this.events = [];\r\n\r\n        window.addEventListener(\"gamepadconnected\", function(e) {\r\n            console.log(\"Gamepad connected at index %d: %s. %d buttons, %d axes.\",\r\n                e.gamepad.index, e.gamepad.id,\r\n                e.gamepad.buttons.length, e.gamepad.axes.length);\r\n\r\n            if(__gamepadMaster.mainLoop)\r\n            {\r\n                window.clearInterval(__gamepadMaster.mainLoop);\r\n            }\r\n\r\n            __gamepadMaster.mainLoop = window.setInterval(function () {\r\n\r\n                var gps = navigator.getGamepads();\r\n\r\n                __gamepadMaster.gps = gps;\r\n\r\n                for(var x = 0; x < gps.length; x++) {\r\n\r\n                    var events = __gamepadMaster.__gamepads[x] ? __gamepadMaster.__gamepads[x] : {};\r\n\r\n                    __gamepadMaster.process(__gamepadMaster.gps[x], events);\r\n\r\n                }\r\n\r\n            }, 20);\r\n\r\n\r\n        });\r\n\r\n\r\n    }\r\n\r\n    gamepads()\r\n    {\r\n\r\n        return  navigator.getGamepads();\r\n\r\n    }\r\n\r\n\r\n    disconnect_all() {\r\n\r\n        for (var x = 0; x < this.intervals.length; x++) {\r\n\r\n            window.clearInterval(this.intervals[x]);\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    disconnect_by_index(game_pad_index) {\r\n\r\n        window.clearInterval(this.intervals[game_pad_index]);\r\n\r\n    }\r\n\r\n    hasAnyPad() {\r\n        return \"getGamepads\" in navigator;\r\n\r\n    }\r\n\r\n    Event(key, game_pad, callback) {\r\n        return {\r\n\r\n            key: key, game_pad:game_pad, callback: callback\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    GamepadEvents(args)\r\n    {\r\n\r\n        var gp = {};\r\n\r\n        gp.stick_left = args.stick_left || function(x, y)\r\n            {\r\n\r\n                //  console.log('Def call');\r\n\r\n            }\r\n\r\n\r\n        gp.stick_right = args.stick_right ||  function(x, y)\r\n            {\r\n\r\n            }\r\n\r\n        gp.buttons = [];\r\n\r\n        gp.extendFunc = function(f1, f2)\r\n        {\r\n\r\n            var fc = f2;\r\n\r\n            return function(x, y){\r\n\r\n                f2(x, y);\r\n\r\n                f1(x, y);\r\n\r\n            }\r\n\r\n        };\r\n\r\n        gp.on = function(key, callback)\r\n        {\r\n\r\n            if(this[key] && key !== \"on\")\r\n            {\r\n\r\n                var current_cb =  typeof(this[key]) == 'function' ? this[key] : function(x, y){};\r\n\r\n                this[key] = this.extendFunc(callback, current_cb);\r\n\r\n\r\n            }\r\n\r\n            else if(key.indexOf('button') >= 0 && key.indexOf('_') >= 0 )\r\n            {\r\n                var parts = key.split('_');\r\n\r\n                var number;\r\n\r\n                try\r\n                {\r\n\r\n                    number = parseInt(parts[1]);\r\n\r\n\r\n                    var current_cb =  typeof(this['buttons'][number]) == 'function' ? this['buttons'][number] : function(x, y){};\r\n\r\n                    this['buttons'][number] = this.extendFunc(callback, current_cb);\r\n\r\n                }\r\n                catch (e)\r\n                {\r\n                    console.error('could not parse \"on\" event with ' + key);\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        gp.constructor = {name:\"GamepadEvents\"};\r\n\r\n        this.__gamepads.push(gp);\r\n\r\n        Gamestack.gamepads = this.__gamepads;\r\n\r\n        return gp;\r\n\r\n    }\r\n\r\n    getGamepads()\r\n    {\r\n        return Gamestack.gamepads;\r\n\r\n    }\r\n\r\n    process(gp, gpEvents)\r\n    {\r\n\r\n        this.process_buttons(gp, gpEvents);\r\n\r\n        this.process_axes(gp, gpEvents);\r\n\r\n    }\r\n\r\n    process_axes(gp, events)\r\n    {\r\n\r\n        if(!gp || !gp['axes'])\r\n        {\r\n\r\n            return false;\r\n\r\n        }\r\n\r\n\r\n\r\n        for (var i = 0; i < gp.axes.length; i += 2) {\r\n\r\n            var axis1 = gp.axes[i], axia2 = gp.axes[i + 1];\r\n\r\n            var ix = (Math.ceil(i / 2) + 1), x = gp.axes[i], y = gp.axes[i + 1];\r\n\r\n            if(ix == 1 && events.stick_left)\r\n            {\r\n                events.stick_left(x, y);\r\n\r\n            }\r\n\r\n            if(ix == 2 && events.stick_right)\r\n            {\r\n                events.stick_right(x, y);\r\n\r\n            }\r\n\r\n            if (this.events && this.events['stick_' + i] && typeof(this.events['stick_' + i].callback) == 'function') {\r\n                this.events['stick_' + i].callback();\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    process_buttons(gp, events) {\r\n\r\n        if(!gp || !gp['buttons'])\r\n        {\r\n            return false;\r\n\r\n        }\r\n\r\n        for (var i = 0; i < gp.buttons.length; i++) {\r\n\r\n            if(!events.buttons)\r\n                break;\r\n\r\n            else if (events.buttons.length > i && typeof(events.buttons[i]) == 'function') {\r\n                events.buttons[i](gp.buttons[i].pressed);\r\n            }\r\n            else if (events.buttons.length > i && typeof( events.buttons[i]) == 'object' && typeof(events.buttons[i].update) == 'function') {\r\n                events.buttons[i].update(events.buttons[i].pressed);\r\n\r\n            }\r\n            var clearance_1 = this.events && this.events[i], gpc, bkey = \"button_\" + i;\r\n\r\n            if (clearance_1) {\r\n                gpc = this.events[bkey] && !isNaN(this.events[bkey].game_pad) ? this.gamepads[this.events[bkey].game_pad] : this.events[bkey].game_pad;\r\n            }\r\n            ;\r\n\r\n            if (clearance_1 && gpc && typeof(this.events[bkey].callback) == 'function') {\r\n                //call the callback\r\n                this.events[i].callback();\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    on(key, gpix, callback) {\r\n\r\n        if(gpix >= this.__gamepads.length)\r\n        {\r\n\r\n            this.__gamepads.push(this.GamepadEvents({}));\r\n\r\n        }\r\n\r\n        this.__gamepads[gpix].on(key, callback);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n/**\r\n * ControllerSetting()\r\n * takes arguments of button(string) || stick(string), plus event(function),\r\n *\r\n * @returns {ControllerSetting\r\n * }\r\n */\r\n\r\n\r\n/**********\r\n * NOTE: here we bind the instance, and NOT the instantiator.\r\n *\r\n * *********/\r\n\r\nif(!__gameInstance.GamepadAdapter)\r\n{\r\n    Gamestack.GamepadAdapter = new GamepadAdapter();\r\n\r\n    // __gameInstance.gamepads.push(gamepad);\r\n\r\n}\r\n;function makeArray(obj) {\r\n\r\n    if (obj instanceof Array) {\r\n\r\n    }\r\n    else {\r\n        obj = [obj];\r\n    }\r\n    return obj;\r\n};\r\n\r\n\r\n\r\n\r\n(function(){\r\n    console.log('GSEvent class... creating');\r\n\r\n\r\nclass GSEvent {\r\n\r\n    constructor(args = {}) {\r\n\r\n        this.name = args.name || \"blankEvent\";\r\n\r\n        this.objects = args.objects || args.object || args.obj || [];\r\n\r\n        this.siblings = args.siblings || args.sibling || args.sibs || args.sib || [];\r\n\r\n    }\r\n}\r\n\r\n\r\nfunction GSEventLink(extendedObject, extendedKey, extendor, extendorKey) {\r\n    this.parent_id = extendedObject.id,\r\n\r\n        this.child_id = extendor.id,\r\n\r\n        this.parent_key = extendedKey,\r\n\r\n        this.child_key = extendorKey;\r\n};\r\n\r\n\r\nclass InputEvent extends GSEvent {\r\n    constructor(args) {\r\n        super(args);\r\n\r\n        //Run the Q() function\r\n\r\n        var btnix = args.btnix || args.button_ix || false,\r\n\r\n            gpix = args.gpix || args.gamepad_ix || 0,\r\n\r\n            callback = args.callback || function () {\r\n\r\n\r\n\r\n                };\r\n\r\n        var six = args.stickix || args.six || args.stick_ix || false;\r\n\r\n        var inputKey = six !== false ? 'stick_' + six : btnix !== false ? 'button_' + btnix : false;\r\n\r\n        //Keys:\r\n\r\n        var keyboardKeys = args.keys || false;\r\n\r\n        if (keyboardKeys instanceof Array) {\r\n\r\n            keyboardKeys = makeArray(keyboardKeys);\r\n\r\n            Gamestack.each(keyboardKeys, function (ix, keyitem) {\r\n\r\n                Gamestack.InputSystem.extendKey('key_' + keyitem.toLowerCase(), function () {\r\n\r\n                    callback(keyitem.toLowerCase());\r\n\r\n                });\r\n\r\n            });\r\n\r\n        }\r\n\r\n        if (inputKey && gpix >= 0) {\r\n\r\n            Gamestack.GamepadAdapter.on(inputKey, gpix, function (x, y) {\r\n\r\n                callback(x, y);\r\n\r\n            });\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n;\r\n\r\n\r\nclass CollisionEvent extends GSEvent {\r\n    constructor(args = {}, arg2, arg3) {\r\n        super(args);\r\n\r\n        //TODO:error if Gamestack is animating :: only before animate\r\n\r\n        var callback = function(){};\r\n\r\n        if(args && arg2 && arg3)\r\n        {\r\n            this.objects = makeArray(args);\r\n\r\n            this.siblings = makeArray(arg2);\r\n\r\n            callback = arg3;\r\n\r\n        }\r\n        else {\r\n\r\n            callback = args.callback || function () {\r\n                };\r\n\r\n        }\r\n\r\n        $Q(this.objects).on('collide', $Q(this.siblings), function (obj1, obj2) {\r\n\r\n            callback(obj1, obj2);\r\n\r\n        });\r\n\r\n    }\r\n}\r\n;\r\n\r\n\r\nclass BoolEvent extends GSEvent {\r\n    constructor(args) {\r\n        super(args);\r\n\r\n        this.on = args.on || function () {\r\n                console.info('CustomBoolEvent():needs .on function(){} returning bool argument');\r\n            }\r\n        /*Defaults to false to avoid broken code*/\r\n\r\n        this.callback = args.callback || function () {\r\n                console.info('CustomBoolEvent():needs .callback function(){} argument');\r\n            };\r\n\r\n        var __inst = this;\r\n\r\n      console.info('CustomBoolEvent():: this class is due for completion soon, still in development.');\r\n\r\n    }\r\n\r\n\r\n}\r\n;\r\n\r\n\r\n    Gamestack.GSEvent= GSEvent;\r\n\r\n    Gamestack.GSEventLink= GSEventLink;\r\n\r\n    Gamestack.InputEvent= InputEvent;\r\n\r\n    Gamestack.CollisionEvent= CollisionEvent;\r\n\r\n    Gamestack.BoolEvent= BoolEvent;\r\n\r\n})();;/*\r\n * Gamestack.GSProton: -An implementation of the Proton.js particle engine.\r\n * :instantiable\r\n * :data-persistent / json format\r\n * :reloadable\r\n * :__presets : various GSProton objects for in-game-use\r\n *\r\n * */\r\n\r\n(function(){\r\n    console.log('CanvasStack class... creating');\r\n\r\n\r\n    /**\r\n     * Gamestack.GSProton: Takes arguments of image, canvas, parent, collideables?\r\n\r\n     * @param   {image} the img\r\n     * @param   {canvas} canvas to draw on\r\n     * @param   {parent} the parent, either a position{x,y,z} or object with a 'position' property having x,y,z\r\n     * @returns {GSProton} a GSProton object\r\n     */\r\n\r\nclass GSProton {\r\n\r\n    constructor(image, canvas, parent, collideables) {\r\n\r\n        var args = {image:image, canvas:canvas, parent:parent, collideables:collideables};\r\n\r\n        if(image.image && image.canvas) //image is a GS Proton passed back through constructor as first argument --enable data persistence\r\n        {\r\n\r\n            args = image;\r\n\r\n        }\r\n\r\n        args.canvas = args.canvas || Gamestack.canvas;\r\n\r\n        args.parent = args.parent || new Gamestack.Vector(0, 0, 0);\r\n\r\n        args.image = args.image || new Gamestack.GameImage;\r\n\r\n        this.name = args.name || \"__NO-Name\";\r\n\r\n        this.description = args.description || \"__NO-Description\";\r\n\r\n        this.image = args.image;\r\n\r\n        this.active = false;\r\n\r\n        this.image =args.image;\r\n\r\n        this.canvas = args.canvas;\r\n\r\n        this.emission_amount_min = 1;\r\n\r\n        this.emission_amount_max = 1;\r\n\r\n        this.radius = 0;\r\n\r\n\r\n        this.mass = 1;\r\n\r\n        this.emissions_frequency = 5;\r\n\r\n        this.gravity = 0;\r\n\r\n        this.proton = {};\r\n\r\n        this.usingAttraction = false;\r\n\r\n        this.usingRepulsion = false;\r\n\r\n        this.usingPointZone = false;\r\n\r\n        this.pointZoneX = 0;\r\n\r\n        this.pointZoneY = 0;\r\n\r\n        this.usingBlendAlpha = false;\r\n\r\n        this.attraction = {\r\n\r\n          position:new Vector(0, 0),\r\n\r\n            min:0,\r\n\r\n            max:0\r\n\r\n        };\r\n\r\n        this.repulsion = {\r\n\r\n            position:new Gamestack.Vector(0, 0),\r\n\r\n            min:0,\r\n\r\n            max:0\r\n\r\n        };\r\n\r\n        this.startAlpha = 1.0;\r\n\r\n        this.endAlpha = 1.0;\r\n\r\n        this.startColor_asRandom = true;\r\n\r\n        this.startColor = \"#FFFFFF\";\r\n\r\n        this.startScale = 1.0;\r\n\r\n        this.endScale = 1.0;\r\n\r\n        this.endColor_asRandom = true;\r\n\r\n        this.endColor = \"#FFFFFF\";\r\n\r\n        this.positionX_asRandom = false;\r\n\r\n        this.positionY_asRandom = false;\r\n\r\n        this.positionX = 0;\r\n\r\n        this.positionY = 0;\r\n\r\n        this.vSpeedMin = 0.5;\r\n\r\n        this.vSpeedMax = 1.5;\r\n\r\n        this.vSpeedRotationMin = 0;\r\n\r\n        this.vSpeedRotationMax = 360;\r\n\r\n        this.lifeMin = 5;\r\n\r\n        this.lifeMax = 10;\r\n\r\n        for(var x in this)\r\n        {\r\n            if(args.hasOwnProperty(x))\r\n            {\r\n\r\n                this[x] = args[x];\r\n\r\n            }\r\n\r\n        }\r\n\r\n        //the following instantiate to empty []\r\n\r\n        this.initializers = [];\r\n\r\n        this.behaviors = [];\r\n\r\n    }\r\n\r\n    replaceBehaviorByType(constructor, replacement) {\r\n\r\n        for (var x in this.behaviors) //remove any existing object by type\r\n        {\r\n            if (this.behaviors[x] instanceof constructor) {\r\n\r\n                this.behaviors.splice(x, 1);\r\n\r\n            }\r\n        }\r\n\r\n        this.behaviors.push(replacement);\r\n\r\n        this.ticker = 0;\r\n\r\n    }\r\n\r\n    Collideables(collideableArray) {\r\n        this.collideables = collideableArray;\r\n    }\r\n\r\n    Rotation(minRot, maxRot) {\r\n\r\n        maxRot = maxRot || minRot; //they are either positive-number or the same\r\n        this.vSpeedRotationMin = minRot;\r\n\r\n        this.vSpeedRotationMax = maxRot;\r\n\r\n        this.replaceBehaviorByType(Proton.V, new Proton.V(new Proton.Span(this.vSpeedMin, this.vSpeedMax), new Proton.Span(this.vSpeedRotationMin, this.vSpeedRotationMax), 'polar'));\r\n\r\n    }\r\n\r\n    Gravity(grav) {\r\n\r\n        this.gravity = grav;\r\n\r\n        this.replaceBehaviorByType(Proton.Gravity, new Proton.Gravity(this.gravity));\r\n\r\n    }\r\n\r\n    Velocity(minV, maxV) {\r\n\r\n        maxV = maxV || minV; //they are either positive-number or the same\r\n        this.vSpeedMin = minV;\r\n\r\n        this.vSpeedMax = maxV;\r\n\r\n        this.replaceBehaviorByType(Proton.V, new Proton.V(new Proton.Span(this.vSpeedMin, this.vSpeedMax), new Proton.Span(this.vSpeedRotationMin, this.vSpeedRotationMax), 'polar'));\r\n\r\n    }\r\n\r\n    Attraction(position, min, max)\r\n    {\r\n        this.usingAttraction = true;\r\n\r\n       this.attraction.position = position;\r\n\r\n       this.attraction.min = min;\r\n\r\n       this.attraction.max = max;\r\n    }\r\n\r\n    Repulsion(x, y, min, max)\r\n    {\r\n        this.usingRepulsion = true;\r\n\r\n        this.repulsion.position = position;\r\n\r\n        this.repulsion.min = min;\r\n\r\n        this.repulsion.max = max;\r\n    }\r\n\r\n    onUpdate() {\r\n\r\n    }\r\n\r\n    isRectangularCollision(obj1, obj2) {\r\n\r\n        return obj1.position.x + obj1.size.x > obj2.position.x &&\r\n            obj1.position.y + obj1.size.y > obj2.position.y &&\r\n            obj1.position.x < obj2.position.x + obj2.size.x &&\r\n            obj1.position.y < obj2.position.y + obj2.size.y;\r\n\r\n    }\r\n\r\n    collide(obj1, obj2) {\r\n        console.log('collide() function UNSET');\r\n\r\n    }\r\n\r\n    update(collideables) {\r\n\r\n        collideables = collideables || this.collideables || [];\r\n\r\n        this.ticker += 1;\r\n\r\n        if (this.ticker % 100 == 0) {\r\n\r\n            console.log('Proton:update():');\r\n            console.log(this.emitter);\r\n\r\n        }\r\n\r\n        if (this.positionX_asRandom) {\r\n            this.emitter.p.x = Math.floor(Math.random() * canvas.width);\r\n        }\r\n        else {\r\n            this.emitter.p.x = this.positionX;\r\n\r\n        }\r\n\r\n\r\n        if (this.positionY_asRandom) {\r\n            this.emitter.p.y = Math.floor(Math.random() * canvas.width);\r\n        }\r\n        else {\r\n            this.emitter.p.y = this.positionY;\r\n\r\n        }\r\n\r\n        var particles = this.emitter.particles;\r\n\r\n\r\n        for (var x = 0; x < particles.length; x++) {\r\n            var p = {\r\n\r\n                size: {\r\n                    x: Math.round(this.emitter.initializes[0].w * this.emitter.scale),\r\n\r\n                    y: Math.round(this.emitter.initializes[0].h * this.emitter.scale)\r\n\r\n                },\r\n\r\n                position: particles[x].p\r\n\r\n            };\r\n            for (var y = 0; y < collideables.length; y++) {\r\n\r\n                if (collideables[y].hasOwnProperty('position') && collideables[y].hasOwnProperty('size') && this.isRectangularCollision(p, collideables[y])) {\r\n\r\n                    this.collide(p, collideables[y])\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n        this.proton = new Proton;\r\n\r\n        this.emit_mode = this.emit_mode || \"\";\r\n\r\n        this.emitter = new Proton.Emitter();\r\n\r\n        this.emission_amount = this.emission_amount || 10;\r\n\r\n        this.emissions_frequency = this.emissions_frequency || 10;\r\n\r\n        var rps = 5 / this.emissions_frequency;\r\n\r\n        this.emitter.rate = new Proton.Rate([this.emission_amount_min, this.emission_amount_max], rps);\r\n\r\n        function allNumbers(list)\r\n        {\r\n            for(var x in list)\r\n            {\r\n                if(typeof(list[x]) == 'number')\r\n                {\r\n\r\n\r\n                }\r\n                else\r\n                {\r\n                    return false\r\n                }\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        };\r\n\r\n        this.initializers = [];\r\n\r\n        this.behaviors = [];\r\n\r\n        this.initializers.push(new Proton.ImageTarget(this.image));\r\n        this.initializers.push(new Proton.Mass(this.mass));\r\n        this.initializers.push(new Proton.Life(this.lifeMin, this.lifeMax));\r\n\r\n        this.initializers.push(new Proton.V(new Proton.Span(this.vSpeedMin, this.vSpeedMax), new Proton.Span(this.vSpeedRotationMin, this.vSpeedRotationMax), 'polar'));\r\n\r\n\r\n\r\n\r\n        if(this.usingPointZone)\r\n        {\r\n\r\n            this.initializers.push(new Proton.Position(new Proton.PointZone(this.pointZoneX, this.pointZoneY)));\r\n\r\n        }\r\n\r\n\r\n\r\n        this.behaviors.push(new Proton.Gravity(this.gravity));\r\n\r\n        this.behaviors.push(new Proton.Alpha(1, [this.startAlpha, this.endAlpha]));\r\n\r\n        this.behaviors.push(new Proton.Color(this.startColor_asRandom ? 'random' : this.startColor, this.endColor_asRandom ? 'random' : this.endColor, Infinity, Proton.easeInSine));\r\n\r\n        this.behaviors.push(new Proton.Scale(this.startScale, this.endScale));\r\n\r\n        if(allNumbers([this.attractionX, this.attractionY, this.attractionMin, this.attractionMax]))\r\n        {\r\n            console.info('Creating attraction');\r\n\r\n            this.behaviors.push(new Proton.Attraction({x:this.attractionX,y:this.attractionY}, this.attractionMin, this.attractionMax));\r\n\r\n        }\r\n\r\n        if(allNumbers([this.repulsionX, this.repulsionY, this.repulsionMin, this.repulsionMax]))\r\n        {\r\n            console.info('Creating repulsion');\r\n\r\n            this.behaviors.push(new Proton.Repulsion({x:this.repulsionX,y:this.repulsionY}, this.repulsionMin, this.repulsionMax));\r\n\r\n        }\r\n\r\n        if(this.usingAttraction)\r\n        {\r\n           this.behaviors.push(new Proton.Attraction(this.attraction.position, this.attraction.min, this.attraction.max));\r\n\r\n        }\r\n\r\n        if(this.usingRepulsion)\r\n        {\r\n            this.behaviors.push(new Proton.Repulsion(this.repulsion.position, this.repulsion.min, this.repulsion.max));\r\n\r\n        }\r\n\r\n        if(this.radius > 0)\r\n        {\r\n            this.initializers.push(new Proton.Radius(this.radius));\r\n\r\n\r\n        }\r\n\r\n\r\n        var i = this.initializers;\r\n\r\n        for (var x in i) {\r\n            this.emitter.addInitialize(i[x]);\r\n        }\r\n\r\n        var b = this.behaviors;\r\n\r\n        for (var x in b) {\r\n            this.emitter.addBehaviour(b[x]);\r\n        }\r\n\r\n        this.emitter.p = this.parent && this.parent.hasOwnProperty('x') ? new Vector(this.parent) : this.emitter.p;\r\n\r\n        this.emitter.p = this.parent && this.parent.hasOwnProperty('position')&& this.parent.position.hasOwnProperty('x') ? new Vector(this.parent.position) : this.emitter.p;\r\n\r\n        this.emitter.p.x += this.positionX;\r\n        this.emitter.p.y += this.positionY;\r\n\r\n            this.emitter.emit();\r\n\r\n        this.proton.addEmitter(this.emitter);\r\n\r\n        this.renderer = new Proton.Renderer('canvas', this.proton, this.canvas);\r\n\r\n        if(this.usingBlendAlpha)\r\n        {\r\n            this.renderer.blendFunc(\"SRC_ALPHA\", \"ONE\");\r\n\r\n        }\r\n\r\n        var __inst = this;\r\n\r\n        this.renderer.start();\r\n\r\n        this.tick();\r\n    }\r\n\r\n    on()\r\n    {\r\n        this.init();\r\n    }\r\n\r\n    off()\r\n    {\r\n       if(this.emitter && this.emitter.stopEmit)\r\n           this.emitter.stopEmit();\r\n    }\r\n\r\n    tick() {\r\n\r\n        requestAnimationFrame(function () {\r\n            __inst.tick()\r\n        });\r\n\r\n        var __inst =  this;\r\n\r\n            this.proton.update();\r\n       // this.update();\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nvar ProtonPresets = {\r\n\r\n    //particleDemoName:new GSProton();   //add particleDemoObjects\r\n\r\n\r\n};\r\n\r\nGamestack.GSProton = GSProton;\r\n\r\n})();\r\n;\r\nvar head = document.head || document.getElementsByTagName('head')[0];\r\n\r\nhead.innerHTML += '<style>'+\r\n    '\\r\\n' +\r\n    '.speech-triangle { overflow:visible; }' +\r\n    '.speech-triangle:before { content: \"\";' +\r\n'position: absolute;' +\r\n        'z-index:-1;'+\r\n'width: 0;' +\r\n'height: 0;' +\r\n'left: 38px;' +\r\n    'bottom: -18px;' +\r\n'border-width: 8px 8px;' +\r\n'border-style: solid;' +\r\n'border-color: #fff transparent transparent #fff;' +\r\n    ' } .farLeft:after{ right:0px; left:20px; } .farRight:after{ left:0px; right:20px; }   .flipX:after{  -moz-transform: scaleX(-1); -webkit-transform: scaleX(-1); -o-transform: scaleX(-1); transform: scaleX(-1); -ms-filter: fliph; /*IE*/ filter: fliph; /*IE*/  } ' +\r\n   ' </style>';\r\n\r\n\r\n\r\n(function(){\r\n    console.log('HtmlExtra classes... creating');\r\n\r\n\r\nclass HtmlExtra //to do apply a super object 'Extra'\r\n{\r\n    constructor(args = {}) {\r\n        this.applyCSSArgs(args);\r\n    }\r\n\r\n    applyCSSArgs(args) {\r\n        var norms = Gamestack.normalArgs(args);\r\n\r\n        this.widthFloat = Gamestack.getArg(norms, ['width', 'widthfloat', 'w'], 0.5);\r\n\r\n        this.heightFloat = Gamestack.getArg(norms, ['height', 'heightfloat', 'h'], 0.5);\r\n\r\n        this.topFloat = Gamestack.getArg(norms, ['top', 'topfloat', 't'], 0.5);\r\n\r\n        this.bottomFloat = Gamestack.getArg(norms, ['bottom', 'bottomfloat', 'b'], false);\r\n\r\n        this.color = norms.color || '#ffffff';\r\n\r\n        this.backgroundColor = Gamestack.getArg(norms, ['backgroundcolor', 'backcolor', 'background', 'bc'], 'black');\r\n\r\n        this.text = norms.text || \"__BLANK\";\r\n\r\n        this.fontFamily = norms.font || norms.fontFamily || \"appFont\";\r\n\r\n        this.border = \"2px inset \" + this.color;\r\n\r\n        this.fontSize = norms.fontsize || \"20px\";\r\n\r\n        if(this.bottomFloat >= 0)\r\n        {\r\n\r\n            this.targetBottom = this.get_float_pixels(this.bottomFloat, document.body.clientHeight);\r\n\r\n        }\r\n        else\r\n        {\r\n\r\n            this.targetTop = this.get_float_pixels(this.topFloat, document.body.clientHeight);\r\n\r\n\r\n\r\n        }\r\n\r\n        this.fadeTime = {\r\n\r\n            in:200,\r\n\r\n            out:200\r\n        };\r\n\r\n    }\r\n\r\n    Top(v)\r\n    {\r\n\r\n      this.targetTop =  this.get_float_pixels(v, document.body.clientHeight);\r\n\r\n        this.domElement.style.bottom = 'auto';\r\n      this.domElement.style.top = this.targetTop;\r\n\r\n      return this;\r\n\r\n    }\r\n\r\n    Left(v)\r\n    {\r\n\r\n        this.targetLeft =  this.get_float_pixels(v, document.body.clientWidth);\r\n\r\n        this.domElement.style.right = 'auto';\r\n        this.domElement.style.left = this.targetLeft;\r\n\r\n        return this;\r\n    }\r\n\r\n    Bottom(v)\r\n    {\r\n\r\n\r\n        this.targetBottom =  this.get_float_pixels(v, document.body.clientHeight);\r\n\r\n        this.domElement.style.top = 'auto';\r\n        this.domElement.style.bottom = this.targetBottom;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Right(v)\r\n    {\r\n\r\n        this.targetRight =  this.get_float_pixels(v, document.body.clientWidth);\r\n\r\n        this.domElement.style.left= 'auto';\r\n        this.domElement.style.right = this.targetRight;\r\n\r\n        return this;\r\n    }\r\n\r\n    FontSize(v)\r\n    {\r\n\r\n        this.domElement.style.fontSize= v;\r\n\r\n        return this;\r\n    }\r\n\r\n    FontFamily(v)\r\n    {\r\n\r\n        this.domElement.style.fontFamily= v;\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n    FontSize(v)\r\n    {\r\n\r\n        this.domElement.style.fontSize= v;\r\n\r\n        return this;\r\n    }\r\n\r\n    Text(v)\r\n    {\r\n        this.domElement.innerText = v;\r\n\r\n        return this;\r\n    }\r\n\r\n    Background(v)\r\n    {\r\n        this.domElement.style.background = v;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Duration(d){\r\n\r\n        this.duration = d;\r\n\r\n        return this;\r\n    }\r\n\r\n    FadeTime(fadeInTime, fadeOutTime)\r\n    {\r\n\r\n        this.fadeTime = {\r\n\r\n            in:fadeInTime || 250,\r\n\r\n            out:fadeOutTime || 250\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    Color(c)\r\n    {\r\n        this.domElement.style.color= c;\r\n\r\n        return this;\r\n    }\r\n\r\n    get_float_pixels(float, dimen) {\r\n        return Math.round(dimen * float) + 'px';\r\n    }\r\n\r\n    onComplete(fun) {\r\n\r\n        this.complete = fun;\r\n\r\n        return this;\r\n    }\r\n\r\n    show(text, duration) {\r\n        //create an html element\r\n\r\n        document.body.append(this.domElement);\r\n\r\n        var __inst = this;\r\n\r\n        if(this.show_interval)\r\n        {\r\n            clearInterval(this.show_interval);\r\n        }\r\n\r\n        this.show_interval = setInterval(function(){\r\n\r\n\r\n            var o = parseFloat(__inst.domElement.style.opacity);\r\n\r\n            if(o < 1.0)\r\n            {\r\n                o += 1.0 * (20 / __inst.fadeTime.in);\r\n\r\n                __inst.domElement.style.opacity = o;\r\n            }\r\n\r\n\r\n        }, 20);\r\n\r\n        setTimeout(function () {\r\n\r\n            clearInterval(__inst.show_interval);\r\n\r\n\r\n            __inst.hide_interval = setInterval(function(){\r\n\r\n                var o = parseFloat(__inst.domElement.style.opacity);\r\n\r\n            if(o > 0)\r\n            {\r\n                o -= 1.0 * (20 / __inst.fadeTime.out);\r\n\r\n                __inst.domElement.style.opacity = o;\r\n            }\r\n            else {\r\n\r\n                __inst.domElement.style.opacity = o;\r\n\r\n\r\n                if (typeof(__inst.complete) == 'function') {\r\n                    __inst.complete();\r\n\r\n\r\n                }\r\n\r\n                clearInterval(__inst.hide_interval);\r\n\r\n            }\r\n\r\n\r\n\r\n            }, 20);\r\n\r\n\r\n        }, __inst.duration);\r\n\r\n\r\n    }\r\n\r\n        update() {\r\n\r\n\r\n    }\r\n}\r\n\r\n/**\r\n * Instantiates a TextDisplay(), HTML/DOM object\r\n * @param   {Object} args the object of arguments\r\n * @param   {Number} args.widthFloat the pct 0-1.0 of screen-Width\r\n * @param   {Number} args.heightFloat the pct 0-1.0 of screen-Height\r\n *\r\n * @param   {Number} args.topFloat the pct 0-1.0 of screen-top-margin\r\n * @param   {Number} args.leftFloat the pct 0-1.0 of screen-left-margin\r\n * @param   {Number} args.targetLeft the pct 0-1.0 of target-left location (for slide-animation behavior)\r\n * @param   {Number} args.targetTop the pct 0-1.0 of target-top location (for slide-animation behavior)\r\n * @param   {string} args.color the css-text-color\r\n * @param   {string} args.text the text-value\r\n *\r\n * @param   {string} args.fontFamily the css fontFamily\r\n\r\n * @param {boolean} args.fromTop true || false, triggers a sliding-text animation from direction\r\n *\r\n *\r\n * @param {boolean} args.fromBottom true || false, triggers a sliding-text animation from direction\r\n *\r\n *\r\n * @param {boolean} args.fromLeft true || false, triggers a sliding-text animation from direction\r\n *\r\n *\r\n * @param {boolean} args.fromRight true || false, triggers a sliding-text animation from direction\r\n *\r\n *\r\n *@returns TextDisplay()\r\n *\r\n * */\r\n\r\nclass TextDisplay extends HtmlExtra {\r\n\r\n    constructor(args = {}) {\r\n\r\n        super(args);\r\n\r\n        if (!args) {\r\n            args = {};\r\n\r\n        }\r\n\r\n        this.duration = args.duration || 5000;\r\n\r\n        this.complete = args.complete || function () {\r\n            };\r\n\r\n        this.create_dom();\r\n    }\r\n\r\n    create_dom() {\r\n        this.domElement = document.createElement('SPAN');\r\n\r\n        this.domElement.style.position = \"fixed\";\r\n\r\n        this.domElement.style.color = this.color;\r\n\r\n        this.domElement.style.padding = \"10px\";\r\n\r\n        if(!this.targetBottom >= 0) {\r\n\r\n            this.domElement.style.top = Math.round(document.body.clientHeight * this.topFloat) + 'px';\r\n\r\n        }\r\n        else\r\n        {\r\n\r\n            this.domElement.style.bottom = Math.round(document.body.clientHeight * this.bottomFloat) + 'px';\r\n\r\n        }\r\n\r\n        if(!this.targetRight >= 0) {\r\n\r\n            this.domElement.style.left = Math.round(document.body.clientWidth * this.leftFloat) + 'px';\r\n\r\n        }   else\r\n        {\r\n\r\n            this.domElement.style.right = Math.round(document.body.clientWidth * this.rightFloat) + 'px';\r\n        }\r\n\r\n        this.domElement.style.width = '90%';\r\n\r\n        this.domElement.style.left = \"5%\";\r\n\r\n        this.domElement.style.height ='auto';\r\n\r\n        this.domElement.style.fontFamily = this.fontFamily;\r\n\r\n        this.domElement.style.fontSize = this.fontSize;\r\n\r\n        this.domElement.style.display = \"block\";\r\n\r\n        this.domElement.style.textAlign = \"center\";\r\n\r\n        this.domElement.style.zIndex = \"9999\";\r\n\r\n        this.domElement.innerText = this.text;\r\n\r\n        this.domElement.textContent = this.text;\r\n\r\n        this.domElement.style.backgroundColor = 'transparent'; //always transparent\r\n\r\n        this.domElement.style.opacity = this.fadeIn ? 0 : 1.0;\r\n\r\n        this.domElement.id = GameStack.create_id();\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nGamestack.TextDisplay = TextDisplay;\r\n\r\n/**\r\n * Instantiates an ItemDisplay() object : Displays item-image with number, such as the number of theoretical Coins collected\r\n * @param   {Object} args the object of arguments\r\n * @param   {string} args.src the src of the image\r\n * @param   {Vector} args.size the size(x, y) of the image, when displayed\r\n * @param   {Number} args.topFloat the pct 0-1.0 of screen-top-margin\r\n * @param   {Number} args.leftFloat the pct 0-1.0 of screen-left-margin\r\n * @param   {Number} args.targetLeft the pct 0-1.0 of target-left location (for slide-animation behavior)\r\n * @param   {Number} args.targetTop the pct 0-1.0 of target-top location (for slide-animation behavior)\r\n * @param   {string} args.color the css-text-color\r\n * @param   {string} args.text the text-value\r\n *\r\n * @param   {string} args.fontFamily the css fontFamily\r\n * @param   {string} args.fontSize the size of font\r\n *\r\n *@returns ItemDisplay()\r\n *\r\n * */\r\n\r\n\r\nclass ImageStatDisplay extends HtmlExtra {\r\n\r\n    constructor(args = {}) {\r\n\r\n        super(args);\r\n\r\n        this.src = args.src || \"__NONE\";\r\n\r\n        this.size = args.size || new Vector3(50, 50);\r\n\r\n        this.text_id = GameStack.create_id();\r\n\r\n        this.id = GameStack.create_id();\r\n\r\n        this.img_id = GameStack.create_id();\r\n\r\n        this.create_dom();\r\n\r\n    }\r\n\r\n    setValue(value) {\r\n        document.getElementById(this.text_id)\r\n    }\r\n\r\n    get_float_pixels(float, dimen) {\r\n        return Math.round(dimen * float) + 'px';\r\n    }\r\n\r\n\r\n    get_id() {\r\n        return this.id;\r\n    }\r\n\r\n    update(v) {\r\n        var e = document.getElementById(this.text_id);\r\n\r\n        this.text = v + \"\";\r\n\r\n        e.innerText = this.text;\r\n    }\r\n\r\n    create_dom() {\r\n        //create an html element\r\n\r\n        this.domElement = document.createElement('DIV');\r\n\r\n        this.domElement.setAttribute('class', 'gameStack-stats');\r\n\r\n        this.domElement.innerHTML += '<img style=\"float:left;\" width=\"' + this.size.x + '\" height=\"' + this.size.y + '\" id=\"' + this.img_id + '\" src=\"' + this.src + '\"/>';\r\n\r\n        this.domElement.style.color = this.color;\r\n\r\n        this.domElement.innerHTML += '<span id=\"' + this.text_id + '\" style=\"padding:5px; vertical-align:middle; display:table-cell; font-size:' + this.fontSize + '; color:' + this.color + ';\">' + this.text + '</span>';\r\n\r\n        this.domElement.style.position = \"fixed\";\r\n\r\n        //this.domElement.style.padding = \"10px\";\r\n\r\n        this.domElement.style.fontFamily = this.fontFamily;\r\n\r\n        this.domElement.style.fontSize = this.fontSize;\r\n\r\n        this.domElement.style.zIndex = \"9999\";\r\n\r\n        this.domElement.id = this.id;\r\n    }\r\n\r\n    show(x, y) {\r\n\r\n        this.domElement.style.left = x + \"px\";\r\n\r\n        this.domElement.style.top = y + \"px\";\r\n\r\n        document.body.append(this.domElement);\r\n    }\r\n}\r\n\r\nGamestack.ImageStatDisplay = ImageStatDisplay;\r\n\r\nclass Bar {\r\n    constructor(background, border) {\r\n        this.background = background;\r\n        var e = document.createElement(\"SPAN\");\r\n\r\n        e.style.position = 'fixed';\r\n\r\n        e.style.background = this.background;\r\n\r\n        e.style.zIndex = \"9999\";\r\n\r\n        e.style.backgroundSize = \"100% 100%\";\r\n\r\n        e.style.backgroundPosition = \"center bottom\";\r\n\r\n        if (border) {\r\n            e.style.border = border;\r\n\r\n        }\r\n\r\n\r\n        this.domElement = e;\r\n\r\n    }\r\n\r\n\r\n    width(w) {\r\n        this.domElement.style.width = w;\r\n\r\n        return this;\r\n    }\r\n\r\n    height(h) {\r\n        this.domElement.style.height = h;\r\n\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\nGamestack.Bar = Bar;\r\n\r\nclass BarFill {\r\n    constructor(background) {\r\n        this.background = background;\r\n        var e = document.createElement(\"SPAN\");\r\n\r\n        e.style.background = this.background;\r\n\r\n        e.style.position = 'fixed';\r\n\r\n        e.style.zIndex = \"9995\";\r\n\r\n        this.domElement = e;\r\n\r\n    }\r\n\r\n    width(w) {\r\n        this.domElement.style.width = w;\r\n\r\n        return this;\r\n    }\r\n\r\n    height(h) {\r\n        this.domElement.style.height = h;\r\n\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\nGamestack.BarFill = BarFill;\r\n\r\nclass BarDisplay extends HtmlExtra { //show BarDisplay as in 'health-bar'\r\n\r\n    constructor(args = {}) {\r\n\r\n        super(args);\r\n\r\n\r\n        this.border = args.border || \"none\";\r\n\r\n        if (args.fill_src) {\r\n            this.fill = new BarFill(args.fill_src).width(args.fill_width || \"80px\").height(args.fill_height || \"10px\");\r\n        }\r\n        else {\r\n            this.fill = args.fill || new BarFill(args.fill_color || 'green').width(args.fill_width || \"80px\").height(args.fill_height || \"10px\");\r\n        }\r\n\r\n        if (args.bar_src) {\r\n            this.bar = new Bar(args.bar_src, this.border).width(args.bar_width || \"80px\").height(args.bar_height || \"10px\");\r\n        }\r\n        else {\r\n            this.bar = new Bar(args.bar_color || 'goldenrod', this.border).width(args.bar_width || \"80px\").height(args.bar_height || \"10px\");\r\n        }\r\n\r\n    }\r\n\r\n    show() {\r\n\r\n        document.body.append(this.fill.domElement);\r\n\r\n        document.body.append(this.bar.domElement);\r\n    }\r\n\r\n    get_float_pixels(float, dimen) {\r\n        return Math.round(dimen * float) + 'px';\r\n    }\r\n\r\n    portion_top(v) {\r\n\r\n        this.fill.domElement.style.top = this.get_float_pixels(v || this.topFloat, GameStack.HEIGHT);\r\n\r\n        this.bar.domElement.style.top = this.get_float_pixels(v || this.topFloat, GameStack.HEIGHT);\r\n\r\n    }\r\n\r\n    portion_left(v) {\r\n\r\n        this.fill.domElement.style.left = this.get_float_pixels(v || this.leftFloat, GameStack.WIDTH);\r\n\r\n        this.bar.domElement.style.left = this.get_float_pixels(v || this.leftFloat, GameStack.WIDTH);\r\n\r\n    }\r\n\r\n    portion_width(w) {\r\n\r\n        this.fill.domElement.style.width = this.get_float_pixels(w || this.widthFloat, GameStack.WIDTH);\r\n\r\n        this.bar.domElement.style.width = this.get_float_pixels(w || this.widthFloat, GameStack.WIDTH);\r\n\r\n\r\n    }\r\n\r\n    portion_height(h) {\r\n        this.fill.domElement.style.height = this.get_float_pixels(h || this.heightFloat, GameStack.HEIGHT);\r\n\r\n        this.bar.domElement.style.height = this.get_float_pixels(h || this.heightFloat, GameStack.HEIGHT);\r\n\r\n    }\r\n\r\n    update(f) {\r\n        this.fill.domElement.style.width = this.get_float_pixels(f || 0, parseFloat(this.bar.domElement.style.width));\r\n\r\n    }\r\n\r\n}\r\n\r\nGamestack.BarDisplay = BarDisplay;\r\n\r\nclass TextBubble extends HtmlExtra {\r\n\r\n    constructor(args = {}) //merely an element of text\r\n    {\r\n        super(args);\r\n\r\n        this.opacity = args.opacity || 0.85;\r\n\r\n        this.create_dom();\r\n\r\n        this.duration = args.stay || args.duration || this.text.length * 100;\r\n\r\n    }\r\n\r\n    create_dom() {\r\n        this.domElement = document.createElement('SPAN');\r\n\r\n        this.domElement.setAttribute('class', 'speech-triangle')\r\n\r\n        this.domElement.style.textAlign = \"left\"; //reset to left\r\n\r\n        this.domElement.style.opacity = this.opacity;\r\n\r\n        this.domElement.style.position = \"fixed\";\r\n\r\n        this.domElement.style.color = this.color || 'white';\r\n\r\n        if (this.backgroundColor == 'transparent') {\r\n            this.backgroundColor = 'black';\r\n        }\r\n\r\n        this.domElement.style.backgroundColor = this.backgroundColor || 'black';\r\n\r\n        this.domElement.style.borderRadius = '0.4em';\r\n\r\n        this.domElement.style.border = this.border || '1px outset snow';\r\n\r\n        this.domElement.style.borderColor = this.borderColor || 'snow';\r\n\r\n        this.domElement.style.padding = \"5px\";\r\n\r\n        this.domElement.style.paddingBottom = \"2px\";\r\n\r\n        this.domElement.style.height = 'auto'; //auto-wrap to text\r\n\r\n        this.domElement.style.top = Math.round(document.body.clientHeight * this.topFloat) + 'px';\r\n\r\n        this.domElement.style.left = Math.round(document.body.clientWidth * this.leftFloat) + 'px';\r\n\r\n        this.domElement.style.width = 'auto';\r\n\r\n        this.domElement.style.height = 'auto';\r\n\r\n        this.domElement.style.fontFamily = this.fontFamily;\r\n\r\n        this.domElement.style.fontSize = this.fontSize;\r\n\r\n        this.domElement.style.display = \"block\";\r\n\r\n        this.domElement.style.textAlign = \"center\";\r\n\r\n        this.domElement.style.zIndex = \"9999\";\r\n\r\n        this.domElement.innerText = this.text;\r\n\r\n        this.domElement.textContent = this.text;\r\n\r\n        this.domElement.style.opacity = this.fadeIn ? 0 : this.opacity;\r\n\r\n        this.domElement.id = GameStack.create_id();\r\n\r\n    }\r\n}\r\n\r\nGamestack.TextBubble= TextBubble;\r\n\r\n\r\n})();\r\n;\r\nclass Level\r\n{\r\n    constructor(args={})\r\n    {\r\n        this.sprites = args.sprites || [];\r\n\r\n        this.backgrounds = args.backgrounds || [];\r\n\r\n        this.terrains = args.terrains || [];\r\n\r\n        this.interactives = args.interactives || [];\r\n\r\n        this.threes = args.threes || []; //3d objects\r\n\r\n    }\r\n\r\n    add()\r\n    {\r\n\r\n\r\n    }\r\n\r\n    add_all_to_game()\r\n    {\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\n;\r\n(function(){\r\n    console.log('Line() class... creating');\r\n\r\n    var Curves = { //ALL HAVE INPUT AND OUTPUT OF: 0-1.0\r\n    // no easing, no acceleration\r\n    linearNone: function (t) { return t },\r\n\r\n    // accelerating from zero velocity\r\n    easeInQuadratic: function (t) { return t*t },\r\n    // decelerating to zero velocity\r\n    easeOutQuadratic: function (t) { return t*(2-t) },\r\n    // acceleration until halfway, then deceleration\r\n    easeInOutQuadratic: function (t) { return t<.5 ? 2*t*t : -1+(4-2*t)*t },\r\n    // accelerating from zero velocity\r\n    easeInCubic: function (t) { return t*t*t },\r\n    // decelerating to zero velocity\r\n    easeOutCubic: function (t) { return (--t)*t*t+1 },\r\n    // acceleration until halfway, then deceleration\r\n    easeInOutCubic: function (t) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 },\r\n    // accelerating from zero velocity\r\n    easeInQuartic: function (t) { return t*t*t*t },\r\n    // decelerating to zero velocity\r\n    easeOutQuartic: function (t) { return 1-(--t)*t*t*t },\r\n    // acceleration until halfway, then deceleration\r\n    easeInOutQuartic: function (t) { return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t },\r\n    // accelerating from zero velocity\r\n    easeInQuintic: function (t) { return t*t*t*t*t },\r\n    // decelerating to zero velocity\r\n    easeOutQuintic: function (t) { return 1+(--t)*t*t*t*t },\r\n    // acceleration until halfway, then deceleration\r\n    easeInOutQuintic: function (t) { return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t }\r\n}\r\n\r\nGamestack.Curves = Curves;\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Takes several args and returns Line object. Intended for curved-line / trajectory of Projectile Object.\r\n * @param   {Object} args object of arguments\r\n * @param   {string} args.curve passed in as string, the key to a curveMethod, options are ['cubic', 'quartic', 'quadratic', 'quintic']\r\n * @param   {number} args.duration the millisecond duration of Line\r\n * @param   {Gamestack.Vector} args.position the position vector\r\n *\r\n * @param   {number} args.pointDisp the numeric point-distance\r\n *\r\n * @param   {Gamestack.Vector} args.size the size vector\r\n *\r\n * @param   {number} args.rotation the numeric rotation of -360 - 360\r\n *\r\n * @param   {number} args.growth the numeric growth\r\n *\r\n * -While a min and max Vector(x,y) will describe the grid of Animation frames, the termPoint will indicate the last frame to show on the grid (Animations may stop early on the 'grid')\r\n * @returns {VectorFrameBounds} a VectorFrameBounds object\r\n */\r\n\r\n\r\nvar inOutCurves = {\r\n\r\n    quadratic: function (t) { return t<.5 ? 2*t*t : -1+(4-2*t)*t },\r\n\r\n    cubic: function (t) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 },\r\n\r\n    quartic: function (t) { return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t },\r\n\r\n    quintic: function (t) { return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t },\r\n\r\n    linear: function (t) { return t; } //provided for consistency / in case 'linear' is needed\r\n\r\n    };\r\n\r\n\r\nGamestack.Curves.InOut = inOutCurves;\r\n\r\nclass Line\r\n{\r\n    constructor(args={})\r\n    {\r\n        this.points = [];\r\n\r\n        this.pointDisp = 1;\r\n\r\n        this.size = args.size || new Gamestack.Vector(100, 100, 0);\r\n\r\n        this.position = new Gamestack.Vector(0, 0, 0);\r\n    }\r\n\r\n    Rot(r)\r\n    {\r\n\r\n        this.rotation = r;\r\n\r\n        return this;\r\n    }\r\n\r\n    Pos(p)\r\n    {\r\n\r\n        this.position = p;\r\n\r\n        if(typeof(p) == 'number')\r\n        {\r\n            this.position = new Gamestack.Vector(p, p, p);\r\n\r\n        }\r\n        else {\r\n\r\n            this.position = p;\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    Size(s)\r\n    {\r\n\r\n       this.size = s;\r\n\r\n        if(typeof(s) == 'number')\r\n        {\r\n            this.size = new Gamestack.Vector(s, s, s);\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    Dispersion(num)\r\n    {\r\n        this.pointDisp = num;\r\n        return this;\r\n    }\r\n\r\n    Curve(c, size)\r\n    {\r\n        this.curve = c;\r\n\r\n        this.curveMethod = Gamestack.Curves.InOut[this.curve.toLowerCase()];\r\n\r\n        if(c)\r\n        this.curve_size = new Gamestack.Vector(size)\r\n\r\n        return this;\r\n    }\r\n\r\n    CurveSize(s)\r\n    {\r\n\r\n        if(typeof(s) == 'number')\r\n        {\r\n            this.curve_size = new Gamestack.Vector(s, s, s);\r\n\r\n        }\r\n        else {\r\n\r\n            this.curve_size = s;\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    Duration(d)\r\n    {\r\n        this.duration = d;\r\n\r\n        return this;\r\n    }\r\n\r\n    Fill()\r\n    {\r\n\r\n        var current_point = new Gamestack.Vector(0, 0, 0);\r\n\r\n        for(var x = 0; x <= Math.abs(this.size.x); x++)\r\n        {\r\n\r\n            var position = new Gamestack.Vector(x, 0, 0);\r\n\r\n            if (current_point.trig_distance_xy(position) >= this.pointDisp)              {\r\n                this.points.push(new Gamestack.Vector(position));\r\n\r\n                current_point = new Gamestack.Vector(position);\r\n\r\n            }\r\n        }\r\n\r\n        this.TransposeByRotation(this.rotation);\r\n\r\n        return this;\r\n    }\r\n\r\n    TransposeByRotation(rotation)\r\n    {\r\n\r\n        this.rotation = rotation;\r\n\r\n        function rotate(cx, cy, x, y, angle) {\r\n            var radians = (Math.PI / 180) * angle,\r\n                cos = Math.cos(radians),\r\n                sin = Math.sin(radians),\r\n                nx = (cos * (x - cx)) + (sin * (y - cy)) + cx,\r\n                ny = (cos * (y - cy)) - (sin * (x - cx)) + cy;\r\n            return new Gamestack.Vector(nx, ny);\r\n        }\r\n\r\n        for(var x = 0; x < this.points.length; x++) {\r\n\r\n            var p = this.points[x];\r\n\r\n            var np = rotate(this.position.x, this.position.y, p.x, p.y, this.rotation);\r\n\r\n            this.points[x]= np;\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Highlight(sprite, ctx, gameWindow)\r\n    {\r\n\r\n        this.highlight_sprites = this.highlight_sprites || [];\r\n\r\n        ctx = ctx || Gamestack.ctx;\r\n\r\n        var points = this.points;\r\n\r\n        gameWindow = gameWindow || Gamestack.game_windows[0];\r\n\r\n        for(var x in points)\r\n        {\r\n\r\n            console.log(points[x]);\r\n\r\n            if(!this.highlight_sprites[x])\r\n            {\r\n                this.highlight_sprites[x] = gameWindow.add(new Gamestack.Sprite(sprite), ctx);\r\n            }\r\n\r\n            var point = points[x];\r\n\r\n            this.highlight_sprites[x].position = new Gamestack.Vector(point.sub( this.highlight_sprites[x].size.div(2)));\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    RemoveHighlight(sprite, ctx, gameWindow)\r\n    {\r\n        gameWindow = gameWindow || Gamestack.game_windows[0];\r\n\r\n        for(var x in this.highlight_sprites)\r\n        {\r\n            gameWindow.remove(this.highlight_sprites[x]);\r\n\r\n        }\r\n\r\n        this.highlight_sprites = [];\r\n\r\n        return this;\r\n\r\n    }\r\n}\r\n\r\nGamestack.Line = Line;\r\n\r\nclass WaveLine extends Line\r\n{\r\n    constructor(pos, size, curve_key)\r\n    {\r\n        var args = {};\r\n\r\n        if(typeof(size) == 'number' || size instanceof Gamestack.Vector)\r\n        {\r\n            super({});\r\n        }\r\n        else if (size instanceof Object)\r\n        {\r\n            super(size);\r\n\r\n            args = size;\r\n        }\r\n\r\n\r\n        this.Pos(pos);\r\n\r\n        this.Size(size);\r\n\r\n        this.curve_options = Curves;//Curves Object (of functions)\r\n\r\n        curve_key = curve_key || args.curve_key || \"quadratic\"\r\n\r\n        this.curve = curve_key ? curve_key.toLowerCase() : \"quadratic\";\r\n\r\n        this.curve_options = ['cubic', 'quartic', 'quadratic', 'quintic', 'sine'];\r\n\r\n        this.curveMethod = Gamestack.Curves.InOut[this.curve.toLowerCase()];\r\n\r\n        this.points = args.points || [];\r\n\r\n        this.is_highlighted = args.is_highlighted || false;\r\n\r\n        this.offset = args.offset || new Gamestack.Vector(0, 0, 0);\r\n\r\n        this.pointDisp = args.pointDisp || 5;\r\n\r\n        this.rotation = args.rotation || 0;\r\n\r\n        this.iterations = args.iterations || 1;\r\n\r\n        this.max_size = args.max_size || this.size || new Gamestack.Vector(5000, 5000);\r\n\r\n        this.growth = args.growth || 1.0;\r\n\r\n    }\r\n\r\n    Max(p)\r\n    {\r\n\r\n        this.target = p;\r\n\r\n        if(typeof(p) == 'number')\r\n        {\r\n            this.target = new Gamestack.Vector(p, p, p);\r\n\r\n        }\r\n        else {\r\n\r\n            this.target = p;\r\n\r\n        }\r\n\r\n        this.max = this.target; //'max' is synonymous with 'target'\r\n\r\n        return this;\r\n    }\r\n\r\n    Min(p)\r\n    {\r\n\r\n        this.position = p;\r\n\r\n        if(typeof(p) == 'number')\r\n        {\r\n            this.position = new Gamestack.Vector(p, p, p);\r\n\r\n        }\r\n        else {\r\n\r\n            this.tposition = p;\r\n\r\n        }\r\n\r\n        this.min = this.position; //'max' is synonymous with 'target'\r\n\r\n        return this;\r\n    }\r\n\r\n    Decay(n)\r\n    {\r\n        if(n < -1.0)\r\n            n = -1.0;\r\n\r\n        if(n > 1.0)\r\n        {\r\n            n = 1.0;\r\n        }\r\n\r\n        this.growth = 1.0 - n;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    next(position)\r\n    {\r\n\r\n        var found = false;\r\n\r\n        for(var x = 0; x < this.points.length; x++)\r\n        {\r\n\r\n            if(position.equals(this.points[x]) &&  x < this.points.length - 1)\r\n            {\r\n                found = true;\r\n                return new Gamestack.Vector(this.points[x + 1]);\r\n\r\n            }\r\n\r\n            if(x==this.points.length - 1 && !found)\r\n            {\r\n\r\n                return new Gamestack.Vector(this.points[0]);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getGraphCanvas(curveCall, existing_canvas) {\r\n\r\n        var canvas = existing_canvas || document.createElement('canvas');\r\n\r\n        canvas.style.position = \"relative\";\r\n\r\n        canvas.id = 'curve-display';\r\n\r\n        canvas.setAttribute('class', 'motion-curve');\r\n\r\n        canvas.width = 180;\r\n        canvas.height = 100;\r\n\r\n        canvas.style.background = \"black\";\r\n\r\n        var context = canvas.getContext('2d');\r\n        context.fillStyle = \"rgb(0,0,0)\";\r\n        context.fillRect(0, 0, 180, 100);\r\n\r\n        context.lineWidth = 0.5;\r\n        context.strokeStyle = \"rgb(230,230,230)\";\r\n\r\n        context.beginPath();\r\n        context.moveTo(0, 20);\r\n        context.lineTo(180, 20);\r\n        context.moveTo(0, 80);\r\n        context.lineTo(180, 80);\r\n        context.closePath();\r\n        context.stroke();\r\n\r\n        context.lineWidth = 2;\r\n        context.strokeStyle = \"rgb(255,127,127)\";\r\n\r\n        var position = {x: 0, y: 80};\r\n        var position_old = {x: 0, y: 80};\r\n\r\n        this.test_graph_size = new Gamestack.Vector(185, 80 -20);\r\n\r\n        var points = this.get_line_segment(this.test_graph_size, 5, curveCall);\r\n\r\n        for(var x in points)\r\n        {\r\n            var position = new Gamestack.Vector(points[x].x, this.test_graph_size.y + 20 - points[x].y);\r\n\r\n            context.beginPath();\r\n            context.moveTo(position_old.x, position_old.y);\r\n            context.lineTo(position.x, position.y);\r\n            context.closePath();\r\n            context.stroke();\r\n\r\n            position_old.x = position.x;\r\n            position_old.y = position.y;\r\n        }\r\n\r\n        return canvas;\r\n    }\r\n\r\n    Fill()\r\n    {\r\n        this.size = new Gamestack.Vector(this.size);\r\n\r\n        var __inst = this;\r\n\r\n        this.points = [];\r\n\r\n        var current_point = new Gamestack.Vector(this.position), yTrack = 0;\r\n\r\n        var x = 1, max_recursion = 300;\r\n\r\n        var position = current_point;\r\n\r\n        var dist = new Gamestack.Vector(20, 20, 20);\r\n\r\n        var size = new Gamestack.Vector(this.curve_size || this.size);\r\n\r\n       while(Math.abs(position.x) <= Math.abs(this.max_size.x) && size.x > 2 && dist.x > 2) {\r\n\r\n             position = new Gamestack.Vector(current_point);\r\n\r\n               var target = new Gamestack.Vector(position.add(size)),\r\n\r\n                start = new Gamestack.Vector(position),\r\n\r\n                curveMethod = this.curveMethod,\r\n\r\n                ptrack = new Gamestack.Vector(start);\r\n\r\n            for (position.x = position.x; position.x < Math.abs(target.x); position.x += 1) {\r\n\r\n                dist = position.sub(start);\r\n\r\n                var pct = dist.x / size.x;\r\n\r\n                position.y = start.y +  curveMethod(pct) * (x % 2 == 0 ? size.y : size.y * -1);\r\n\r\n              //  position = position.round();\r\n\r\n                if (current_point.trig_distance_xy(position) >= this.pointDisp) {\r\n\r\n                    var p = new Gamestack.Vector(position);\r\n\r\n                        this.points.push(p);\r\n\r\n                    current_point = new Gamestack.Vector(position);\r\n\r\n                }\r\n            }\r\n\r\n            size = size.mult(this.growth);\r\n\r\n            if(x > max_recursion)\r\n            {\r\n                return console.error('Too much recursion in SwagLine');\r\n            }\r\n\r\n            x+= 1;\r\n\r\n        }\r\n\r\n        this.TransposeByRotation(this.rotation);\r\n\r\n        return this;\r\n    }\r\n\r\n    Rotate(rotation)\r\n    {\r\n        this.rotation = rotation;\r\n\r\n        if(typeof(this.rotation) == 'object')\r\n        {\r\n\r\n            this.rotation = this.rotation.x;\r\n\r\n        }\r\n\r\n      return this;\r\n    }\r\n\r\n}\r\n\r\nGamestack.WaveLine = WaveLine;\r\n\r\nclass ShapeLine extends Line\r\n{\r\n\r\n    constructor(args={})\r\n    {\r\n        super(args);\r\n\r\n        this.targetTotalPoints = args.total || 200;\r\n\r\n    }\r\n\r\n    Total(t)\r\n    {\r\n\r\n        this.targetTotalPoints = t;\r\n        return this;\r\n    }\r\n\r\n    Eliptical(pos, size, rotation)\r\n    {\r\n        this.Pos(pos || this.position);\r\n\r\n        this.Size(size || this.size);\r\n\r\n        this.Rot(rotation || this.rotation);\r\n\r\n        function fill(elipse)\r\n        {\r\n\r\n            elipse.points = [];\r\n\r\n        var center = elipse.position.add(elipse.size.div(2));\r\n\r\n        var current_point = new Gamestack.Vector(0, 0, 0);\r\n\r\n        var a = Math.abs(elipse.size.x /2), b = Math.abs(elipse.size.y /2);\r\n\r\n        var perim = 2 * Math.PI * Math.sqrt(a * a + b * b);\r\n\r\n        var step = (2 * Math.PI) / elipse.targetTotalPoints;\r\n\r\n        for (var i = 0 * Math.PI; i < 2 * Math.PI; i += step) {\r\n\r\n            var p = new Gamestack.Vector(center.x - (a * Math.cos(i)), center.y + (b * Math.sin(i)));\r\n\r\n            elipse.points.push(new Gamestack.Vector(p));\r\n\r\n            current_point = new Gamestack.Vector(p);\r\n\r\n        }\r\n        }\r\n\r\n        fill(this);\r\n\r\n        this.Fill = function(){\r\n\r\n            fill(this);\r\n\r\n            return this;\r\n\r\n        };\r\n\r\n        return this;\r\n    }\r\n\r\n    Quadrilateral(pos, size, rotation)\r\n    {\r\n        this.Pos(pos || this.position);\r\n\r\n        this.Size(size || this.size);\r\n\r\n        this.Rot(rotation || this.rotation);\r\n\r\n        function fill(quad)\r\n        {\r\n\r\n            quad.points = [];\r\n\r\n            var current_point = new Gamestack.Vector(0, 0, 0);\r\n\r\n            var perim = 2 * quad.size.x + 2 * quad.size.y,\r\n\r\n                stepX = quad.size.x / (quad.targetTotalPoints * (quad.size.x / perim)),\r\n\r\n                stepY =  quad.size.y / (quad.targetTotalPoints * (quad.size.y / perim));\r\n\r\n            for(var x = 0; x < quad.size.x; x+= stepX)\r\n            {\r\n                var p1 = new Gamestack.Vector(x, 0).add(quad.position);\r\n\r\n                    quad.points.push(new Gamestack.Vector(p1));\r\n            }\r\n\r\n            for(var y = 0; y < quad.size.y; y+= stepY)\r\n            {\r\n                var p1 = new Gamestack.Vector(quad.size.x, y).add(quad.position);\r\n\r\n                    quad.points.push(new Gamestack.Vector(p1));\r\n            }\r\n\r\n            for(var x = quad.size.x; x >= 0; x-= stepX)\r\n            {\r\n                var p1 = new Gamestack.Vector(x, quad.size.y).add(quad.position);\r\n\r\n                quad.points.push(new Gamestack.Vector(p1));\r\n            }\r\n\r\n            for(var y = quad.size.y; y >= 0; y-= stepY)\r\n            {\r\n                var p1 = new Gamestack.Vector(0, y).add(quad.position);\r\n\r\n                quad.points.push(new Gamestack.Vector(p1));\r\n            }\r\n\r\n\r\n        }\r\n\r\n        fill(this);\r\n\r\n        this.Fill = function(){\r\n\r\n            fill(this);\r\n\r\n            return this;\r\n\r\n        };\r\n\r\n        return this;\r\n    }\r\n};\r\n\r\nGamestack.ShapeLine = ShapeLine;\r\n\r\n})();;/**\r\n * Takes an object of arguments and returns Motion() object. Motion animates movement of position and rotation properties for any Sprite()\r\n\r\n * @param   {Object} args object of arguments\r\n * @param   {string} args.name optional\r\n * @param   {string} args.description optional\r\n * @param   {TWEEN.Easing.'objectGroup'.'objectMember'} args.curve the TWEEN.Easing function to be applied (Example: TWEEN.Easing.Quadratic.InOut)\r\n * @param   {Vector} args.targetRotation the targeted rotation result, when using rotation with movement\r\n * @param   {Vector} args.distance the target distance of position change, when moving position\r\n * @param   {number} args.duration the milliseconds duration of the Motion\r\n * @param   {number} args.delay the milliseconds delay before the Motion occurs (on call of Motion.engage())\r\n *\r\n *\r\n * @returns {Motion} a Motion object\r\n */\r\n\r\n(function () {\r\n    console.log('Motion class... creating');\r\n\r\n    /*\r\n     * TweenMotion constructors:\r\n     *\r\n     * new TweenMotion({motion_curve, distance(Vector), rotation(Vector)})\r\n     *\r\n     *  new Motion(new JaggedLine())\r\n     *\r\n     * */\r\n\r\n    class Motion extends GSO //extends GSO || GamestackOverrideable\r\n    {\r\n        constructor(args={})\r\n        {\r\n            super(args);\r\n\r\n            this.state_save = false;\r\n\r\n            this.parent = args.parent || Gamestack.Extendors.applyParentalArgs(this, args);\r\n\r\n            Gamestack.Extendors.informable(this, args);\r\n\r\n            Gamestack.Extendors.tweenable(this, args);\r\n\r\n        }\r\n\r\n        restoreState()\r\n        {\r\n            for(var x in this.state_save)\r\n            {\r\n                this.parent[x] = this.state_save[x];\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n\r\n    class TweenMotion extends Motion { //tween the state of an object, including 'position', 'size', and 'rotation' --rotation.x, etc..\r\n\r\n        constructor(args = {}) {\r\n\r\n            super(args);\r\n\r\n            this.getArg = $Q.getArg;\r\n\r\n            this.transition = args.trans || args.transition || \"literal\" || \"add\";\r\n            this.transition_options = ['literal', 'add'];\r\n\r\n            if(typeof(args.curve) == 'string')\r\n            {\r\n                args.curve_string = args.curve;\r\n            }\r\n\r\n            this.setTweenCurve(args.curve_string);\r\n\r\n            this.target = false;\r\n\r\n            if(args.target) {\r\n\r\n                this.target = args.target;\r\n            }\r\n\r\n            this.curvesList = this.curvesToArray(); //Tween.Easing\r\n\r\n            this.duration = Gamestack.getArg(args, 'duration', 500);\r\n\r\n            this.delay = Gamestack.getArg(args, 'delay', 0);\r\n        }\r\n\r\n        targetCheck(parent)\r\n        {\r\n\r\n            if(!this.target.position)\r\n            {\r\n                this.target.position = new Vector();\r\n            }\r\n\r\n            if(!this.target.size)\r\n            {\r\n                this.target.size = new Vector();\r\n            }\r\n\r\n            if(!this.target.rotation)\r\n            {\r\n                this.target.rotation = new Vector();\r\n            }\r\n\r\n        }\r\n\r\n        engage() {\r\n\r\n            var __inst = this;\r\n\r\n            __inst.call_on_run(); //call any on-run extensions\r\n\r\n            this.tweens = [];\r\n\r\n            var object = this.parent;\r\n\r\n            this.targetCheck();\r\n\r\n            if(!this.state_save) {\r\n\r\n                this.state_save = {\r\n                    position: new Gamestack.Vector(this.parent.position),\r\n                    rotation: new Gamestack.Vector(this.parent.rotation),\r\n                    size: new Gamestack.Vector(this.parent.size)\r\n                };\r\n\r\n            }\r\n\r\n            if(this.parent && !this.target){\r\n\r\n                this.target = {\r\n\r\n                    position: new Gamestack.Vector(this.parent.position),\r\n\r\n                    rotation: new Gamestack.Vector(this.parent.rotation),\r\n\r\n                    size: new Gamestack.Vector(this.parent.size)\r\n\r\n                };\r\n\r\n            }\r\n            else if (!this.target) {\r\n\r\n                this.target = {\r\n\r\n                    position: new Gamestack.Vector(),\r\n\r\n                    rotation: new Gamestack.Vector(),\r\n\r\n                    size: new Gamestack.Vector()\r\n\r\n                };\r\n\r\n            };\r\n\r\n\r\n            if (this.transition !== 'literal') { //transition is assumed to be additive\r\n\r\n                this.target.position = object.position.add(this.target.position);\r\n                this.target.rotation = object.rotation.add(this.target.rotation);\r\n                this.target.size = object.size.add(this.target.size);\r\n\r\n            };\r\n\r\n            //we always have a targetPosition\r\n            //construct a tween::\r\n            this.tweens.push(new TWEEN.Tween(object.position)\r\n                .easing(__inst.curve || __inst.motion_curve)\r\n\r\n                .to(this.target.position, __inst.duration)\r\n                .onUpdate(function () {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n                })\r\n                .onComplete(function () {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n                    if (__inst.complete) {\r\n\r\n                        __inst.call_on_complete(); //only call once\r\n\r\n                    }\r\n\r\n\r\n                }));\r\n\r\n            this.tweens.push(new TWEEN.Tween(object.rotation)\r\n                .easing(__inst.curve || __inst.motion_curve)\r\n\r\n                .to(this.target.rotation, __inst.duration)\r\n                .onUpdate(function () {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n                })\r\n                .onComplete(function () {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n                    if (__inst.complete) {\r\n\r\n                        __inst.call_on_complete(); //only call once\r\n\r\n                    }\r\n\r\n\r\n                }));\r\n\r\n\r\n            this.tweens.push(new TWEEN.Tween(object.size)\r\n                .easing(__inst.curve || __inst.motion_curve)\r\n\r\n                .to(this.target.size, __inst.duration)\r\n                .onUpdate(function () {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n                })\r\n                .onComplete(function () {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n                    if (__inst.complete) {\r\n\r\n                        __inst.call_on_complete(); //only call once\r\n\r\n                    }\r\n\r\n\r\n                }));\r\n\r\n\r\n            for (var x = 0; x < this.tweens.length; x++) {\r\n\r\n                this.tweens[x].start();\r\n\r\n            };\r\n        }\r\n\r\n        /**\r\n         * start the Motion transition\r\n         *\r\n         * @function\r\n         * @memberof Motion\r\n         *\r\n         **********/\r\n\r\n        start() {\r\n\r\n            this.engage();\r\n\r\n        }\r\n\r\n// obj.getGraphCanvas( $(c.domElement), value.replace('_', '.'), TWEEN.Easing[parts[0]][parts[1]] );\r\n\r\n        getGraphCanvas(t, f, c) {\r\n\r\n            var canvas = c || document.createElement('canvas');\r\n\r\n            canvas.style.position = \"relative\";\r\n\r\n            canvas.id = 'curve-display';\r\n\r\n            canvas.setAttribute('class', 'motion-curve');\r\n\r\n            canvas.width = 180;\r\n            canvas.height = 100;\r\n\r\n            canvas.style.background = \"black\";\r\n\r\n            var context = canvas.getContext('2d');\r\n            context.fillStyle = \"rgb(0,0,0)\";\r\n            context.fillRect(0, 0, 180, 100);\r\n\r\n            context.lineWidth = 0.5;\r\n            context.strokeStyle = \"rgb(230,230,230)\";\r\n\r\n            context.beginPath();\r\n            context.moveTo(0, 20);\r\n            context.lineTo(180, 20);\r\n            context.moveTo(0, 80);\r\n            context.lineTo(180, 80);\r\n            context.closePath();\r\n            context.stroke();\r\n\r\n            context.lineWidth = 2;\r\n            context.strokeStyle = \"rgb(255,127,127)\";\r\n\r\n            var position = {x: 5, y: 80};\r\n            var position_old = {x: 5, y: 80};\r\n\r\n            new TWEEN.Tween(position).to({x: 175}, 2000).easing(TWEEN.Easing.Linear.None).start();\r\n            new TWEEN.Tween(position).to({y: 20}, 2000).easing(f).onUpdate(function () {\r\n\r\n                context.beginPath();\r\n                context.moveTo(position_old.x, position_old.y);\r\n                context.lineTo(position.x, position.y);\r\n                context.closePath();\r\n                context.stroke();\r\n\r\n                position_old.x = position.x;\r\n                position_old.y = position.y;\r\n\r\n            }).start();\r\n\r\n            return canvas;\r\n        }\r\n\r\n        getTweenPoints(size, line) {\r\n\r\n            //must have line.minPointDist\r\n\r\n            var curve = line.curve,\r\n                duration = line.duration;\r\n\r\n            var points = [];\r\n\r\n            var position = new Vector(line.position);\r\n\r\n            var target = new Vector(position).add(size);\r\n\r\n            var start = new Vector(position);\r\n\r\n            var dist = new Vector(0, 0, 0);\r\n\r\n            var ptrack;\r\n\r\n\r\n            var easeInOutQuad = function (t) {\r\n                return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t\r\n            };\r\n\r\n\r\n            return points;\r\n\r\n            var t1 = new TWEEN.Tween(position).to({x: target.x}, 2000).easing(TWEEN.Easing.Linear.None).start();\r\n\r\n            if (t2) {\r\n                t2.stop();\r\n            }\r\n\r\n            var t2 = new TWEEN.Tween(position).to({y: target.y}, 2000).easing(curve).onUpdate(function () {\r\n\r\n\r\n                if (ptrack) {\r\n\r\n                    dist = ptrack.sub(p);\r\n\r\n                    var d = Math.sqrt(dist.x * dist.x + dist.y * dist.y);\r\n\r\n                    if (d >= line.minPointDist) {\r\n\r\n                        points.push(p);\r\n\r\n                        ptrack = new Vector(p);\r\n                    }\r\n\r\n                }\r\n\r\n                else {\r\n                    ptrack = p;\r\n\r\n                    points.push(p);\r\n                }\r\n                ;\r\n\r\n            }).onComplete(function () {\r\n\r\n                // alert(line.minPointDist);\r\n\r\n                line.first_segment = points.slice();\r\n\r\n                var extendLinePoints = function (segment, points, ix) {\r\n\r\n                    var next_points = segment.slice();\r\n\r\n                    var last_point = points[points.length - 1];\r\n\r\n                    for (var x = 0; x < next_points.length; x++) {\r\n\r\n                        var sr = new Vector(Gamestack.GeoMath.rotatePointsXY(line.size.x * ix, line.size.y * ix, line.rotation));\r\n\r\n                        var p = next_points[x].add(sr);\r\n\r\n                        if (points.indexOf(p) <= -1) {\r\n\r\n                            points.push(p);\r\n\r\n\r\n                        }\r\n\r\n                    }\r\n                };\r\n\r\n                for (var x = 0; x <= line.curve_iterations; x++) {\r\n                    if (x > 1) {\r\n\r\n                        extendLinePoints(line.first_segment, line.points, x - 1);\r\n\r\n                    }\r\n\r\n                }\r\n\r\n\r\n            }).start();\r\n\r\n            return points;\r\n        }\r\n    }\r\n\r\n    Gamestack.TweenMotion = TweenMotion;\r\n\r\n\r\n    class LineMotion extends Motion\r\n    {\r\n        constructor(args={})\r\n        {\r\n            super(args);\r\n\r\n            Gamestack.Extendors.spatial(this);\r\n\r\n            this.Size(args.size || new Gamestack.Vector(200, 200));\r\n\r\n            this.Pos(args.size || new Gamestack.Vector(200, 200));\r\n\r\n            this.Rot(args.size || new Gamestack.Vector(200, 200));\r\n\r\n        }\r\n        Highlight(spr, ctx, gameWindow)\r\n        {\r\n            this.line.Highlight(spr, ctx, gameWindow);\r\n\r\n            return this;\r\n        }\r\n        Eliptical(pos, size)\r\n        {\r\n            size = size || this.size;\r\n\r\n            pos = pos || this.position;\r\n\r\n            this.line = new Gamestack.ShapeLine().Eliptical(pos, size, 0).Fill();\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n        Box(pos, size)\r\n        {\r\n            size = size || this.size;\r\n\r\n            pos = pos || this.position;\r\n\r\n            this.line = new Gamestack.ShapeLine().Quadrilateral(pos, size, 0).Fill();\r\n\r\n            return this;\r\n        }\r\n        QuadraticWave(pos, size)\r\n        {\r\n            size = size || this.size;\r\n\r\n            pos = pos || this.position;\r\n\r\n            this.line = new Gamestack.WaveLine(pos, size, 'quadratic').Fill();\r\n\r\n            return this;\r\n\r\n        }\r\n        CubicWave(pos, size)\r\n        {\r\n            size = size || this.size;\r\n\r\n            pos = pos || this.position;\r\n\r\n            this.line = new Gamestack.WaveLine(pos, size, 'cubic').Fill();\r\n\r\n            return this;\r\n        }\r\n        QuinticWave(pos, size)\r\n        {\r\n            size = size || this.size;\r\n\r\n            pos = pos || this.position;\r\n\r\n            this.line = new Gamestack.WaveLine(pos, size, 'quintic').Fill();\r\n\r\n            return this;\r\n        }\r\n    }\r\n\r\n    Gamestack.LineMotion = LineMotion;\r\n})\r\n();\r\n\r\n\r\n;/**\r\n * Takes an object of arguments and returns Projectile() object. Projectile fires a shot from the parent sprite, with specified offset, rotation, motion_curve, line_curve\r\n\r\n * @param   {Object} args object of arguments\r\n * @param   {string} args.name optional\r\n * @param   {string} args.description optional\r\n * @param   {string} args.distance the distance before dissappearance\r\n * @param   {TWEEN.Easing.'objectGroup'.'objectMember'} args.motion_curve the TWEEN.Easing function to be applied for motion/speed (Example: TWEEN.Easing.Quadratic.InOut)\r\n *\r\n *  * @param   {TWEEN.Easing.'objectGroup'.'objectMember'} args.line_curve the TWEEN.Easing function to be applied for line (Example: TWEEN.Easing.Quadratic.InOut)\r\n *\r\n * @returns {Projectile} a Projectile object\r\n */\r\n\r\nclass Projectile {\r\n\r\n    constructor(args = {}) {\r\n\r\n        this.getArg = $Q.getArg;\r\n\r\n        for (var x in args) {\r\n            this[x] = args[x];\r\n\r\n        }\r\n\r\n        this.name = args.name || \"__\";\r\n\r\n        this.description = args.description || \"__\";\r\n\r\n        this.animation = Gamestack.getArg(args, 'animation', new Animation());\r\n\r\n        this.parent_id = args.parent_id || args.object_id || \"__blank\"; //The parent object\r\n\r\n        this.name = Gamestack.getArg(args, 'name', \"__\");\r\n\r\n        this.size = false;\r\n\r\n        if(args.size)\r\n        {\r\n            this.size = new Vector(args.size);\r\n        }\r\n        else if(this.animation && this.animation.frameSize)\r\n        {\r\n           this.size =  new Vector(this.animation.frameSize);\r\n\r\n        }\r\n        else\r\n        {\r\n            console.info('Projectile():using default size.');\r\n            this.size = new Vector(20, 20, 20);\r\n        }\r\n\r\n        this.origin = args.origin || new Vector(0, 0, 0);\r\n\r\n        this.rotation = args.rotation || 0;\r\n\r\n        this.line.Rotation(this.rotation);\r\n\r\n        this.description = Gamestack.getArg(args, 'description', false);\r\n\r\n        this.duration = Gamestack.getArg(args, 'duration', 500);\r\n\r\n        this.delay = Gamestack.getArg(args, 'delay', 0);\r\n\r\n        this.position = Gamestack.getArg(args, 'position', new Vector(0, 0, 0));\r\n\r\n        this.motion_curve = Gamestack.getArg(args, 'motion_curve', TWEEN.Easing.Linear.None);\r\n\r\n        this.highlighted = false;\r\n\r\n        this.sprites = [];\r\n\r\n        this.run_ext = args.run_ext || [];\r\n\r\n    }\r\n\r\n    /**\r\n     * specify a function to be called when Motion is complete\r\n     *\r\n     * @function\r\n     * @memberof Projectile\r\n     * @param {Function} fun the function to be called when complete\r\n     *\r\n     **********/\r\n\r\n    onComplete(fun) {\r\n        this.complete = fun;\r\n\r\n    }\r\n\r\n    onCollide(fun) {\r\n        this.collide = fun;\r\n\r\n    }\r\n\r\n    setAnimation(anime) {\r\n\r\n        this.animation = anime;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    setMotionCurve(c) {\r\n\r\n        this.motion_curve = c;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    kill_one() {\r\n\r\n        var spr = this.sprites[this.sprites.length - 1];\r\n\r\n        Gamestack.remove(spr);\r\n\r\n    }\r\n\r\n    onRun(caller, callkey) {\r\n\r\n        this.run_ext = this.run_ext || [];\r\n\r\n        this.run_ext.push({caller: caller, callkey: callkey});\r\n\r\n    }\r\n\r\n    shoot_basic(position, size, rot_offset, speed, numberShots, disp){\r\n\r\n        var __playerInst = this;\r\n\r\n        var bx = position.x, by = position.y, bw = size.x, bh = size.y;\r\n\r\n        var half = numberShots / 2;\r\n\r\n        for(var x = half * -1; x <= half; x++) {\r\n            var shot = Gamestack.add(new Sprite({\r\n\r\n                active: true,\r\n\r\n                position: position,\r\n\r\n                size: size,\r\n\r\n                speed: speed,\r\n\r\n                image: animation.image,\r\n\r\n                rotation: new Vector3(0, 0, 0),\r\n\r\n                flipX: false\r\n\r\n            }));\r\n\r\n            shot.setAnimation(animation);\r\n\r\n            rot_offset = new Vector(rot_offset + (x * disp), 0, 0);\r\n\r\n            shot.position.x = bx, shot.position.y = by;\r\n            shot.rotation.x = 0 + rot_offset.x;\r\n\r\n            shot.stats = {\r\n\r\n                damage: 1\r\n\r\n            };\r\n\r\n            if (!options.line) {\r\n\r\n                shot.onUpdate(function () {\r\n\r\n                    shot.position.x += Math.cos((shot.rotation.x) * 3.14 / 180) * speed;\r\n\r\n                    shot.position.y += Math.sin((shot.rotation.x) * 3.14 / 180) * speed;\r\n\r\n                });\r\n\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    fire(origin, rotation) {\r\n\r\n        for (var x = 0; x < this.run_ext.length; x++) {\r\n\r\n            this.run_ext[x].caller[this.run_ext[x].callkey]();\r\n\r\n        }\r\n\r\n\r\n        this.line.origin = origin;\r\n\r\n        this.line.rotation = rotation;\r\n\r\n        console.log('FIRING FROM:' + jstr(origin));\r\n\r\n        var sprite = new Sprite({image: this.animation.image});\r\n\r\n        sprite.setAnimation(this.animation);\r\n\r\n        sprite.setSize(this.size);\r\n\r\n        sprite.position = new Vector(0, 0, 0);\r\n\r\n        var __inst = this;\r\n\r\n        __inst.line.fill();\r\n\r\n        var lp = this.line.points;\r\n\r\n        sprite.position = new Vector(lp[0]);\r\n\r\n        sprite.onUpdate(function (sprite) {\r\n\r\n            for (var x = 0; x < lp.length; x++) {\r\n\r\n                if (sprite.position.equals(lp[x]) && x < lp.length - 1) {\r\n\r\n                    sprite.position = new Vector(lp[x + 1]);\r\n\r\n                    break;\r\n                }\r\n\r\n                if (x == lp.length - 1) {\r\n                    Gamestack.remove(sprite);\r\n\r\n                }\r\n\r\n            }\r\n\r\n        });\r\n\r\n        Gamestack.add(sprite);\r\n\r\n        this.sprites.push(sprite);\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nGamestack.Projectile = Projectile;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n;\r\n\r\n\r\n\r\n\r\nvar Shapes = {\r\n\r\n    circle:function(radius, freq) {\r\n\r\n        return {\r\n\r\n            radius:radius,\r\n\r\n            points:[],\r\n\r\n            fill:function(center, freq)\r\n            {\r\n\r\n\r\n\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    square:function(s, freq)\r\n    {\r\n        console.error('STILL NEED TO BUILD THIS SQUARE IN GS-API');\r\n\r\n        return{\r\n\r\n            size:new Gamestack.Vector(s, s),\r\n\r\n            width:w,\r\n\r\n            height:h,\r\n\r\n            freq:freq,\r\n\r\n            points:[],\r\n\r\n            fill:function(start, freq)\r\n            {\r\n\r\n\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    rect:function(w, h, freq)\r\n    {\r\n        console.error('STILL NEED TO BUILD THIS TRIANGLE');\r\n\r\n        return{\r\n\r\n            size:new Gamestack.Vector(w, h),\r\n\r\n            width:w,\r\n\r\n            height:h,\r\n\r\n            freq:freq,\r\n\r\n            points:[],\r\n\r\n            fill:function(start, freq)\r\n            {\r\n\r\n\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    triangle:function(base, h, freq)\r\n    {\r\n\r\n        console.error('STILL NEED TO BUILD THIS TRIANGLE');\r\n\r\n        return{\r\n\r\n            base:base,\r\n\r\n            height:height,\r\n\r\n            freq:freq,\r\n\r\n            points:[],\r\n\r\n            fill:function(start, freq)\r\n            {\r\n\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n};\r\n\r\n\r\nGamestack.Shapes = Shapes;\r\n;\r\n\r\n\r\n\r\n\r\n\r\nclass Shot\r\n{\r\n    constructor(name, imageOrAnimation)\r\n    {\r\n        this.name = name || 'No-Name';\r\n\r\n        if(imageOrAnimation instanceof Gamestack.GameImage)\r\n        {\r\n            this.anime = new Animation(imageOrAnimation);\r\n        }\r\n        else if(imageOrAnimation instanceof Gamestack.Animation)\r\n        {\r\n            this.anime = imageOrAnimation;\r\n\r\n        }\r\n\r\n        this.rotation = 0;\r\n\r\n        this.rot_disp = 0;\r\n\r\n\r\n        var args = name instanceof Object ? name : {};\r\n\r\n        //is name / first arg an entire instance of shot?\r\n\r\n        this.init(args);\r\n\r\n    }\r\n\r\n    init(args)\r\n    {\r\n        if(args instanceof Object) {\r\n\r\n            for (var x in args) {\r\n\r\n                this[x] = args[x];\r\n\r\n                if(args[x] instanceof Object && args[x].hasOwnProperty('x'))//process as Vector\r\n                {\r\n                    this[x] = new Vector(args[x]);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        Gamestack.ChainSet.informable(this);\r\n    }\r\n\r\n    Image(image)\r\n    {\r\n\r\n        this.anime = new Animation(image);\r\n\r\n    }\r\n\r\n    Animation(anime)\r\n    {\r\n        this.anime = anime;\r\n        return this;\r\n    }\r\n\r\n    Total(total, rot_disp_per_unit)\r\n    {\r\n\r\n        this.total =total;\r\n\r\n        this.rot_disp = rot_disp_per_unit;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    WaveGrowth(growth)\r\n    {\r\n        if(growth > 0)\r\n            this.curve_growth = growth;\r\n    }\r\n\r\n    CurveMode(key, size, growth)\r\n    {\r\n        this.curve = Gamestack.Curves.InOut[key.toLowerCase()];\r\n\r\n        this.curve_key = key.toLowerCase();\r\n\r\n        this.curve_size = size;\r\n\r\n        if(growth > 0)\r\n        this.curve_growth = growth;\r\n\r\n        if(typeof(this.curve_size)=='number')\r\n            this.curve_size = new Gamestack.Vector(this.curve_size, this.curve_size);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    RotDisp( rot_disp)\r\n    {\r\n        this.rot_disp = rot_disp;\r\n\r\n        return this;\r\n    }\r\n\r\n    Velocity(v)\r\n    {\r\n        this.velocity = v;\r\n\r\n        return this;\r\n    }\r\n\r\n    Position(p)\r\n    {\r\n        if(typeof(p) == 'number')\r\n        {\r\n            this.position = new Gamestack.Vector(p, p, p);\r\n\r\n        }\r\n        else {\r\n\r\n            this.position = p;\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Size(s)\r\n    {\r\n        if(typeof(s) == 'number')\r\n        {\r\n            this.size = new Gamestack.Vector(s, s, s);\r\n\r\n        }\r\n        else {\r\n\r\n            this.size = s;\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Rotation(r)\r\n    {\r\n        this.rotation = r;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    onCollide(collideables, callback)\r\n    {\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nGamestack.Shot = Shot;;\r\n\r\n/**\r\n * Takes the min and max vectors of rectangular shape and returns Rectangle Object.\r\n * @param   {Object} args object of arguments\r\n * @param   {Gamestack.Vector} args.min the minimum vector point (x,y)\r\n * @param   {Gamestack.Vector} args.max the maximum vector point (x,y)\r\n *\r\n * @returns {Rectangle} a Rectangle object\r\n */\r\n\r\nclass Rectangle {\r\n\r\n    constructor(min, max) {\r\n\r\n        this.min = new Gamestack.Vector(min);\r\n        this.max = new Gamestack.Vector(max);\r\n\r\n    }\r\n    toLine()\r\n    {\r\n\r\n\r\n    }\r\n}\r\n;\r\n\r\n\r\n\r\nlet VectorBounds = Rectangle;\r\n\r\nGamestack.VectorBounds =VectorBounds;\r\n\r\nGamestack.Rectangle = Rectangle;\r\n\r\n\r\n\r\n/**\r\n * Takes the min and max vectors plus termPoint ('termination-point'), returns VectorFrameBounds\r\n *  *use this to define the bounds of an Animation object.\r\n * @param   {Object} args object of arguments\r\n * @param   {Gamestack.Vector} args.min the minimum vector point (x,y)\r\n * @param   {Gamestack.Vector} args.max the maximum vector point (x,y)\r\n * @param   {Gamestack.Vector} args.termPoint the termPoint vector point (x,y)\r\n * -While a min and max Gamestack.Vector(x,y) will describe the grid of Animation frames, the termPoint will indicate the last frame to show on the grid (Animations may stop early on the 'grid')\r\n * @returns {VectorFrameBounds} a VectorFrameBounds object\r\n */\r\n\r\n\r\nclass VectorFrameBounds extends Rectangle {\r\n\r\n    constructor(min, max, termPoint) {\r\n\r\n        super(min, max);\r\n\r\n        this.termPoint = termPoint || new Gamestack.Vector(this.max.x, this.max.y, this.max.z);\r\n\r\n    }\r\n\r\n\r\n}\r\n;\r\n\r\nGamestack.VectorFrameBounds = VectorFrameBounds;\r\n\r\n\r\n\r\n/**\r\n * Takes several args and returns Line object. Intended for curved-line / trajectory of Projectile Object.\r\n * @param   {Object} args object of arguments\r\n * @param   {Easing} args.curve the curve applied to line see TWEEN.Easing , limited options for immediate line-drawing\r\n * @param   {number} args.duration the millisecond duration of Line\r\n * @param   {Gamestack.Vector} args.position the position vector\r\n *\r\n * @param   {number} args.pointDist the numeric point-distance\r\n *\r\n * @param   {Gamestack.Vector} args.size the size vector\r\n *\r\n * @param   {number} args.rotation the numeric rotation of -360 - 360\r\n *\r\n * @param   {number} args.growth the numeric growth\r\n *\r\n * -While a min and max Vector(x,y) will describe the grid of Animation frames, the termPoint will indicate the last frame to show on the grid (Animations may stop early on the 'grid')\r\n * @returns {VectorFrameBounds} a VectorFrameBounds object\r\n */\r\n\r\nclass Line\r\n{\r\n    constructor(args = {})\r\n    {\r\n\r\n\r\n        this.curve_options = Curves;//Curves Object (of functions)\r\n        this.curve_string = args.curve_string || \"linearNone\";\r\n\r\n        this.curve = this.get_curve_from_string(this.curve_string);\r\n\r\n        this.motion_curve = args.motion_curve || TWEEN.Easing.Linear.None;\r\n\r\n        if(typeof(args.curve) == 'function')\r\n        {\r\n            this.curve = args.curve;\r\n        }\r\n\r\n        this.points = args.points || [];\r\n\r\n        this.position = args.position ||  new Gamestack.Vector();\r\n\r\n        this.is_highlighted = args.is_highlighted || false;\r\n\r\n        this.offset = args.offset || new Gamestack.Vector();\r\n\r\n        this.pointDist = 5;\r\n\r\n        this.size = args.size || new Gamestack.Vector();\r\n\r\n        this.rotation = args.rotation || 0;\r\n\r\n        this.origin = args.origin || new Gamestack.Vector(0, 0);\r\n\r\n        this.iterations = 1;\r\n\r\n        this.growth = args.growth || 1.2;\r\n\r\n    }\r\n\r\n    Iterations(n)\r\n    {\r\n\r\n       this.iterations = n;\r\n       return this;\r\n    }\r\n\r\n    Growth(n)\r\n    {\r\n        this.growth = n;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Origin(o)\r\n    {\r\n        this.position = o;\r\n       this.origin = o;\r\n\r\n       return this;\r\n\r\n    }\r\n\r\n    Pos(p)\r\n    {\r\n        this.origin = p;\r\n        this.position = p;\r\n        return this;\r\n    }\r\n\r\n    PointDisp(num)\r\n    {\r\n        this.minPointDist = num;\r\n        return this;\r\n    }\r\n\r\n    Curve(c)\r\n    {\r\n        this.curve = c;\r\n        this.curve_string = this.get_curve_string(c);\r\n        return this;\r\n    }\r\n\r\n    Duration(d)\r\n    {\r\n        this.duration = d;\r\n\r\n        return this;\r\n    }\r\n    Rotation(r)\r\n    {\r\n        this.rotation = r;\r\n        return this;\r\n    }\r\n    next(position)\r\n    {\r\n\r\n        var found = false;\r\n\r\n        for(var x = 0; x < this.points.length; x++)\r\n        {\r\n\r\n            if(position.equals(this.points[x]) &&  x < this.points.length - 1)\r\n            {\r\n                found = true;\r\n                return new Gamestack.Vector(this.points[x + 1]);\r\n\r\n            }\r\n\r\n            if(x==this.points.length - 1 && !found)\r\n            {\r\n\r\n                return new Gamestack.Vector(this.points[0]);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    get_curve_from_string(str)\r\n    {\r\n\r\n        console.log('Applying Line():curve:' + str);\r\n\r\n        for(var x in this.curve_options) {\r\n\r\n            if(x.toLowerCase() == str.toLowerCase())\r\n            {\r\n                return this.curve_options[x];\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    get_curve_string(c)\r\n    {\r\n        for(var x in this.curve_options) {\r\n\r\n            if(this.curve_options[x] == c)\r\n            {\r\n                return x;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getGraphCanvas(curveCall, existing_canvas) {\r\n\r\n        var canvas = existing_canvas || document.createElement('canvas');\r\n\r\n        canvas.style.position = \"relative\";\r\n\r\n        canvas.id = 'curve-display';\r\n\r\n        canvas.setAttribute('class', 'motion-curve');\r\n\r\n        canvas.width = 180;\r\n        canvas.height = 100;\r\n\r\n        canvas.style.background = \"black\";\r\n\r\n        var context = canvas.getContext('2d');\r\n        context.fillStyle = \"rgb(0,0,0)\";\r\n        context.fillRect(0, 0, 180, 100);\r\n\r\n        context.lineWidth = 0.5;\r\n        context.strokeStyle = \"rgb(230,230,230)\";\r\n\r\n        context.beginPath();\r\n        context.moveTo(0, 20);\r\n        context.lineTo(180, 20);\r\n        context.moveTo(0, 80);\r\n        context.lineTo(180, 80);\r\n        context.closePath();\r\n        context.stroke();\r\n\r\n        context.lineWidth = 2;\r\n        context.strokeStyle = \"rgb(255,127,127)\";\r\n\r\n        var position = {x: 0, y: 80};\r\n        var position_old = {x: 0, y: 80};\r\n\r\n        this.test_graph_size = new Gamestack.Vector(185, 80 -20);\r\n\r\n       var points = this.get_line_segment(this.test_graph_size, 5, curveCall);\r\n\r\n        for(var x in points)\r\n        {\r\n            var position = new Gamestack.Vector(points[x].x, this.test_graph_size.y + 20 - points[x].y);\r\n\r\n            context.beginPath();\r\n            context.moveTo(position_old.x, position_old.y);\r\n            context.lineTo(position.x, position.y);\r\n            context.closePath();\r\n            context.stroke();\r\n\r\n            position_old.x = position.x;\r\n            position_old.y = position.y;\r\n        }\r\n\r\n        return canvas;\r\n    }\r\n\r\n    transpose(origin, rotation)\r\n    {\r\n\r\n        this.rotation = rotation;\r\n\r\n        this.origin = origin;\r\n\r\n        var t_points = [];\r\n\r\n        for(var x = 0; x < this.points.length; x++) {\r\n\r\n            var p = this.points[x];\r\n\r\n            var np = new Gamestack.Vector(Gamestack.GeoMath.rotatePointsXY(p.x, p.y, this.rotation));\r\n\r\n            t_points.push(np.add(origin));\r\n\r\n            console.log(np);\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        return t_points;\r\n\r\n    }\r\n\r\n    add_segment(next_segment, offset)\r\n    {\r\n        for(var x = 0; x < next_segment.length; x++) {\r\n\r\n            next_segment[x] = new Gamestack.Vector(next_segment[x]).add(offset);\r\n\r\n            this.points.push(next_segment[x]);\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    get_flipped_segment(points)\r\n    {\r\n\r\n        var t_points = points.slice(), t_len = t_points.length;\r\n\r\n        for(var x = 0; x < points.length; x++) {\r\n\r\n            t_points[t_len - x].x = points[x].x\r\n\r\n        }\r\n\r\n        return t_points;\r\n\r\n    }\r\n\r\n    Highlight(origin, ctx)\r\n    {\r\n\r\n        ctx = ctx || Gamestack.ctx;\r\n\r\n        var points = this.transpose(origin);\r\n\r\n        for(var x in points)\r\n        {\r\n\r\n            var point = points[x];\r\n\r\n            var dist = point.sub(Gamestack.point_highlighter.position);\r\n\r\n            var d = Math.sqrt( dist.x * dist.x + dist.y * dist.y );\r\n\r\n\r\n            if(d >= 10)\r\n            {\r\n                Gamestack.point_highlighter.position = new Gamestack.Vector(points[x]);\r\n            }\r\n\r\n\r\n               Canvas.draw(Gamestack.point_highlighter, ctx);\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nvar GeoMath = {\r\n\r\n        rotatePointsXY:function(x,y,angle) {\r\n\r\n            var theta = angle*Math.PI/180;\r\n\r\n            var point = {};\r\n            point.x = x * Math.cos(theta) - y * Math.sin(theta);\r\n            point.y = x * Math.sin(theta) + y * Math.cos(theta);\r\n\r\n            point.z = 0;\r\n\r\n            return point\r\n        }\r\n\r\n}\r\n\r\nGamestack.GeoMath = GeoMath;\r\n;\r\n\r\n\r\n/**\r\n * Simple Sound object:: implements Jquery: Audio()\r\n * @param   {string} src : source path / name of the targeted sound-file\r\n\r\n * @returns {Sound} object of Sound()\r\n * */\r\n\r\n\r\nclass Sound {\r\n\r\n    constructor(src, data) {\r\n\r\n\r\n        if (typeof(src) == 'object') {\r\n\r\n            this.sound = document.createElement('audio');\r\n\r\n            this.sound.src = src.src;\r\n\r\n            this.src = src.src;\r\n\r\n        }\r\n\r\n        else if (typeof(src) == 'string') {\r\n\r\n            this.sound = document.createElement('audio');\r\n\r\n            this.sound.src = src;\r\n\r\n            this.src = src;\r\n\r\n        }\r\n\r\n        if(typeof(data)=='object') {\r\n            for (var x in data) {\r\n                if (x !== 'sound') {\r\n                    this[x] = data[x];\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.onLoad = this.onLoad || function () {\r\n            };\r\n\r\n        if (typeof(this.onLoad) == 'function') {\r\n\r\n            this.onLoad(this.sound);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Loop(loop)\r\n    {\r\n        this.sound.loop = loop || true;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    loop(loop) //same as Loop()\r\n    {\r\n        this.sound.loop = loop || true;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n\r\n    Volume(val)\r\n    {\r\n\r\n        this.sound.volume = val;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n\r\n    volume(val) //same as Volume()\r\n    {\r\n\r\n        this.sound.volume = val;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Play() {\r\n        if (typeof(this.sound) == 'object' && typeof(this.sound.play) == 'function') {\r\n\r\n            this.sound.play();\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    play() { //same as Play()\r\n        if (typeof(this.sound) == 'object' && typeof(this.sound.play) == 'function') {\r\n\r\n            this.sound.play();\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nclass SoundList{\r\n\r\n    constructor(list)\r\n    {\r\n\r\n        this.cix = 1;\r\n\r\n        this.sounds = [];\r\n\r\n        if(list instanceof Array)\r\n        {\r\n            for(var x in list)\r\n            {\r\n                if(list[x].src)\r\n                {\r\n                    this.sounds.push(new Sound(list[x].src, list[x]));\r\n\r\n                }\r\n                else if(typeof(list[x]) == 'string')\r\n                {\r\n                    this.sounds.push(new Sound(list[x]));\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    add(src, name)\r\n    {\r\n        if(typeof(src) == 'object' && src.src)\r\n        {\r\n            this.sounds.push(new Sound(src.src, src));\r\n\r\n        }\r\n        else if(typeof(src) == 'string')\r\n        {\r\n            var data = {};\r\n\r\n            if(name)\r\n            {\r\n                data.name = name;\r\n            }\r\n\r\n            this.sounds.push(new Sound(list[x], data));\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Volume(v)\r\n    {\r\n        for(var x = 0; x < this.sounds.length;x++)\r\n        {\r\n            this.sounds[x].volume(v);\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    volume(v)\r\n    {\r\n        for(var x = 0; x < this.sounds.length;x++)\r\n        {\r\n            this.sounds[x].volume(v);\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n    PlayNext()\r\n    {\r\n        this.sounds[this.cix % this.sounds.length].play();\r\n\r\n        this.cix += 1;\r\n\r\n    }\r\n\r\n    Play()\r\n    {\r\n\r\n        this.sounds[this.cix % this.sounds.length].play();\r\n\r\n        this.cix += 1;\r\n\r\n\r\n    }\r\n\r\n    playNext() //same as PlayNext()\r\n    {\r\n        this.sounds[this.cix % this.sounds.length].play();\r\n\r\n        this.cix += 1;\r\n\r\n    }\r\n\r\n    play() //same as Play()\r\n    {\r\n\r\n        this.sounds[this.cix % this.sounds.length].play();\r\n\r\n        this.cix += 1;\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nGamestack.Sound = Sound;\r\n\r\nGamestack.SoundList = SoundList;\r\n;(function () {\r\n    console.log('Sprite class... creating');\r\n\r\n    /**\r\n     * Gamestack.Sprite: Takes an object of arguments and returns Sprite() object. Sprite() is a container for multiple Animations, Motions, and Sounds. Sprites have several behavioral functions for 2d-Game-Objects.\r\n\r\n     * @param   {Object} args object of arguments\r\n     * @param   {string} args.name optional\r\n     * @param   {string} args.description optional\r\n\r\n     * @param   {string} args.src the source file for the GameImage:Sprite.image :: use a string / file-path\r\n\r\n     * @param   {Gamestack.Vector} args.size the size of the Gamestack.Sprite\r\n     * @param   {Gamestack.Vector} args.position the position of the Gamestack.Sprite\r\n     * @param   {Gamestack.Vector} args.padding the 'float-type' Vector of x and y padding to use when processing collision on the Gamestack.Sprite. A padding of new Vector(0.2, 0.2) will result in 1/5 of Gamestack.Sprite size for padding\r\n\r\n     * @param   {Gamestack.Animation} args.selected_animation the selected_animation of the Gamestack.Sprite:: pass during creation or use Gamestack.Sprite.setAnimation after created\r\n     *\r\n     * @returns {Gamestack.Sprite} a Gamestack.Sprite object\r\n     */\r\n\r\n\r\n    class Sprite {\r\n        constructor(args = {}, arg2, arg3) {\r\n\r\n            var a = {};\r\n\r\n            if (args instanceof Gamestack.Animation) //instantiate from animation\r\n            {\r\n                args = {selected_animation: args, size: new Gamestack.Vector(args.frameSize)};\r\n            }\r\n\r\n            else if (typeof(args) == 'string')//load with image 'src' argument\r\n            {\r\n                //apply image from string 'src'\r\n\r\n                this.image = new Gamestack.GameImage(args);\r\n\r\n\r\n                var __inst = this;\r\n\r\n                var img = this.image.domElement;\r\n\r\n                img.onload = function () {\r\n\r\n                    __inst.singleFrame();\r\n\r\n                    if (__inst.after_load) {\r\n                        __inst.after_load();\r\n                    }\r\n                };\r\n\r\n                if (typeof(arg2) == 'number') //image plus 'scale' argument\r\n                {\r\n                    this.scale = arg2;\r\n\r\n                    var img = this.image.domElement;\r\n\r\n                    this.image.domElement.onload = function () {\r\n                        __inst.size = new Gamestack.Vector(Math.round(img.width * scale), Math.round((img.width / img.height) * scale));\r\n\r\n                    };\r\n\r\n                }\r\n\r\n                if (typeof(arg2) == 'object' && arg2.hasOwnProperty('x') && arg2.hasOwnProperty('y')) //image plus 'size' argument\r\n                {\r\n\r\n                    this.size = arg2;\r\n\r\n                }\r\n            }\r\n\r\n\r\n            if (typeof(arg2) == 'object' && arg2.hasOwnProperty('x')) {\r\n                this.size = arg2;\r\n            }\r\n\r\n            Gamestack.Extendors.spatial(this);\r\n\r\n            this.active = true; //active sprites are visible\r\n\r\n            if (typeof(args) == 'object') {\r\n\r\n                this.apply_args(args);\r\n            }\r\n            else {\r\n                this.apply_args(a);\r\n            }\r\n\r\n\r\n        }\r\n\r\n        afterLoad(f) {\r\n            this.after_load = f;\r\n        }\r\n\r\n        apply_args(args = {}) {\r\n\r\n            for (var x in args) {\r\n                this[x] = args[x];\r\n            }\r\n\r\n            this.name = args.name || \"__blankName\";\r\n\r\n            this.life = args.life || 999999999999;\r\n\r\n            this.description = args.description || \"__spriteDesc\";\r\n\r\n            this.id = Gamestack.getArg(args, 'id', this.create_id());\r\n\r\n            this.animations = Gamestack.getArg(args, 'animations', []);\r\n\r\n            this.motions = Gamestack.getArg(args, 'motions', []);\r\n\r\n            this.particles = Gamestack.getArg(args, 'particles', []);\r\n\r\n            this.shots = Gamestack.getArg(args, 'shots', []);\r\n\r\n            this.sounds = Gamestack.getArg(args, 'sounds', []);\r\n\r\n            this.__initializers = Gamestack.getArg(args, '__initializers', []);\r\n\r\n            this.type = Gamestack.getArg(args, 'type', 'basic');\r\n\r\n            this.scrollFactor = args.scrollFactor || 1.0;\r\n\r\n            this.speed = Gamestack.getArg(args, 'speed', new Gamestack.Vector(0, 0, 0));\r\n\r\n            this.size = new Gamestack.Vector(Gamestack.getArg(args, 'size', new Gamestack.Vector(0, 0)));\r\n\r\n            this.position = new Gamestack.Vector(Gamestack.getArg(args, 'position', new Gamestack.Vector(0, 0, 0)));\r\n\r\n            this.collision_bounds = Gamestack.getArg(args, 'collision_bounds', new Gamestack.VectorBounds(new Gamestack.Vector(0, 0, 0), new Gamestack.Vector(0, 0, 0)));\r\n\r\n            this.rotation = new Gamestack.Vector(Gamestack.getArg(args, 'rotation', new Gamestack.Vector(0, 0, 0)));\r\n\r\n\r\n            this.acceleration = Gamestack.getArg(args, 'acceleration', new Gamestack.Vector(0, 0, 0));\r\n\r\n            this.rot_speed = Gamestack.getArg(args, 'rot_speed', new Gamestack.Vector(0, 0, 0));\r\n\r\n            this.rot_accel = Gamestack.getArg(args, 'rot_accel', new Gamestack.Vector(0, 0, 0));\r\n\r\n            this.padding = Gamestack.getArg(args, 'padding', new Gamestack.Vector(0, 0, 0));\r\n\r\n\r\n            var __inst = this;\r\n\r\n            if (args.src) {\r\n                this.src = args.src;\r\n                console.log('image src:' + args.src);\r\n                this.image = new Gamestack.GameImage(args.src);\r\n            }\r\n            else if (args.image instanceof Gamestack.GameImage) {\r\n                this.image = args.image;\r\n            }\r\n\r\n            else if (args.image && args.image.domElement && args.image.domElement.src) {\r\n                this.image = new Gamestack.GameImage(args.image.domElement.src);\r\n            }\r\n\r\n\r\n            //Apply / instantiate Sound(), Gamestack.Motion(), and Gamestack.Animation() args...\r\n\r\n\r\n            GameStack.each(this.shots, function (ix, item) {\r\n\r\n                __inst.shots[ix] = new Gamestack.Shot(item);\r\n\r\n            });\r\n\r\n            GameStack.each(this.sounds, function (ix, item) {\r\n\r\n                __inst.sounds[ix] = new Gamestack.Sound(item);\r\n\r\n            });\r\n\r\n            GameStack.each(this.motions, function (ix, item) {\r\n\r\n                __inst.motions[ix] = new Gamestack.TweenMotion(item);\r\n\r\n            });\r\n\r\n            GameStack.each(this.animations, function (ix, item) {\r\n\r\n                __inst.animations[ix] = new Gamestack.Animation(item);\r\n\r\n\r\n            });\r\n\r\n            GameStack.each(this.particles, function (ix, item) {\r\n\r\n                __inst.particles[ix] = new Gamestack.GSProton(item);\r\n\r\n            });\r\n\r\n            //Apply initializers:\r\n\r\n            GameStack.each(this.__initializers, function (ix, item) {\r\n\r\n                __inst.onInit(item);\r\n\r\n            });\r\n\r\n            Gamestack.ChainSet.informable(this);\r\n\r\n            if (args.selected_animation)\r\n                this.selected_animation = new Gamestack.Animation(args.selected_animation);\r\n\r\n\r\n        }\r\n\r\n        singleFrame() {\r\n            var __inst = this;\r\n\r\n            if (!__inst.selected_animation) {\r\n\r\n                console.log('setting Animation with :' + this.image.domElement.src);\r\n\r\n                __inst.setAnimation(new Gamestack.Animation({\r\n\r\n                    image: __inst.image,\r\n\r\n                    frameSize: new Gamestack.Vector(__inst.image.domElement.width, __inst.image.domElement.height),\r\n\r\n                    frameBounds: new Gamestack.VectorFrameBounds(new Gamestack.Vector(), new Gamestack.Vector())\r\n\r\n\r\n                }));\r\n\r\n            }\r\n\r\n            if (__inst.size.x == 0 && __inst.size.y == 0) {\r\n                //take size of image\r\n                __inst.size = new Gamestack.Vector(__inst.image.domElement.width, __inst.image.domElement.height);\r\n\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * This function adds objects to the Gamestack.Sprite. Objects of Gamestack.Animation(), Projectile().\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        add(obj) {\r\n\r\n            switch (obj.constructor.name) {\r\n\r\n                case \"Shot\":\r\n\r\n                    this.shots.push(obj);\r\n\r\n                    break;\r\n\r\n\r\n                case \"Animation\":\r\n\r\n                    this.animations.push(obj);\r\n\r\n                    break;\r\n\r\n                case \"GSProton\":\r\n\r\n                    obj.parent = this;\r\n\r\n                    this.particles.push(obj);\r\n\r\n                    break;\r\n\r\n                case \"TweenMotion\":\r\n\r\n                    this.motions.push(obj);\r\n\r\n                    break;\r\n\r\n                case \"Sound\":\r\n\r\n                    this.sounds.push(obj);\r\n\r\n                    break;\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        /**\r\n         * This function initializes sprites. Call to trigger all functions previously passed to onInit().\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        init() {\r\n\r\n\r\n        }\r\n\r\n        /**\r\n         * This function extends the init() function. Takes single function() argument OR single string argument\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {function} fun the function to be passed into the init() event of the Sprite()\r\n         **********/\r\n\r\n        onInit(fun) {\r\n\r\n            if (typeof fun == 'string') {\r\n\r\n                if (this.__initializers.indexOf(fun) < 0) {\r\n\r\n                    this.__initializers.push(fun)\r\n                }\r\n                ;\r\n\r\n                var __inst = this;\r\n\r\n                var keys = fun.split('.');\r\n\r\n                console.log('finding init from string:' + fun);\r\n\r\n                if (!keys.length >= 2) {\r\n                    return console.error('need min 2 string keys separated by \".\"');\r\n                }\r\n\r\n                var f = GameStack.options.SpriteInitializers[keys[0]][keys[1]];\r\n\r\n                if (typeof(f) == 'function') {\r\n\r\n                    var __inst = this;\r\n\r\n                    var f_init = this.init;\r\n\r\n                    this.init = function () {\r\n\r\n                        f_init(__inst);\r\n\r\n                        f(__inst);\r\n\r\n                    };\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n            else if (typeof fun == 'function') {\r\n\r\n                console.log('extending init:');\r\n\r\n\r\n                var f_init = this.init;\r\n                var __inst = this;\r\n\r\n                this.init = function () {\r\n\r\n                    f_init(__inst);\r\n\r\n                    fun(__inst);\r\n\r\n                };\r\n\r\n\r\n            }\r\n\r\n            else if (typeof fun == 'object') {\r\n\r\n                console.log('extending init:');\r\n\r\n                console.info('Quick2D does not yet implement onInit() from arg of object type');\r\n\r\n            }\r\n\r\n        }\r\n\r\n        /*****************************\r\n         * Getters\r\n         ***************************/\r\n\r\n        /**\r\n         * This function gets the 'id' of the Sprite()\r\n         * @function\r\n         * @memberof Sprite\r\n         * @returns {string}\r\n         **********/\r\n\r\n        get_id() {\r\n            return this.id;\r\n        }\r\n\r\n        to_map_object(size, framesize) {\r\n\r\n            this.__mapSize = new Gamestack.Vector(size || this.size);\r\n\r\n            this.frameSize = new Gamestack.Vector(framesize || this.size);\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        /*****************************\r\n         * Setters and Creators\r\n         ***************************/\r\n\r\n        /**\r\n         * This function creates the 'id' of the Sprite():Called automatically on constructor()\r\n         * @function\r\n         * @memberof Sprite\r\n         * @returns {string}\r\n         **********/\r\n\r\n        create_id() {\r\n\r\n            return Gamestack.create_id();\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * This function sets the size of the Sprite()\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        setSize(size) {\r\n\r\n            this.size = new Gamestack.Vector(size.x, size.y, size.z);\r\n\r\n        }\r\n\r\n        /**\r\n         * This function sets the position of the Sprite()\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        setPos(pos) {\r\n            this.position = new Gamestack.Vector(pos.x, pos.y, pos.z || 0);\r\n\r\n        }\r\n\r\n        /**\r\n         * This function sizes the Sprite according to minimum dimensions and existing w/h ratios\r\n         * @param {number} mx the maximum size.x for the resize\r\n         * @param {number} my the maximum size.y for the resize\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        getSizeByMax(mx, my) {\r\n\r\n            var size = new Gamestack.Vector(this.size);\r\n\r\n            var wth = size.y / size.x;\r\n\r\n            var htw = size.x / size.y;\r\n\r\n            if (size.x > mx) {\r\n                size.x = mx;\r\n\r\n                size.y = size.x * wth;\r\n\r\n            }\r\n\r\n            if (size.y > my) {\r\n                size.y = my;\r\n\r\n                size.x = size.y * htw;\r\n\r\n            }\r\n\r\n            return size;\r\n\r\n        }\r\n\r\n        /*****************************\r\n         *  assertSpeed()\r\n         *  -assert the existence of a speed{} object\r\n         ***************************/\r\n\r\n        assertSpeed() {\r\n            if (!this.speed) {\r\n\r\n                this.speed = new Gamestack.Vector(0, 0, 0);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        /*****************************\r\n         *  setAnimation(anime)\r\n         *  -set the select_animation of this sprite\r\n         ***************************/\r\n\r\n        /**\r\n         * This function sets the 'selected_animation' property of the Sprite():: *all Sprites must have a 'selected_animation'\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Animation}\r\n         **********/\r\n\r\n        setAnimation(anime) {\r\n\r\n            if (anime instanceof Gamestack.Animation && this.animations.indexOf(anime) < 0) {\r\n                this.animations.push(anime);\r\n            }\r\n\r\n            this.selected_animation = anime;\r\n\r\n            Gamestack.log('set the animation');\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * This function sets the 'selected_animation' property to a single-frame --the source image of the sprite\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Animation}\r\n         **********/\r\n\r\n        setToSingleFrame() {\r\n\r\n            this.selected_animation = new Gamestack.Animation({\r\n                image: this.image,\r\n                frameSize: new Gamestack.Vector(this.image.domElement.width, this.image.domElement.height)\r\n            });\r\n\r\n            var __inst = this;\r\n\r\n            this.selected_animation.image.domElement.onload = function () {\r\n\r\n                __inst.size = new Gamestack.Vector(__inst.selected_animation.image.domElement.width, __inst.selected_animation.image.domElement.height);\r\n\r\n            };\r\n\r\n\r\n            Gamestack.log('set single-frame animation');\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * This function indicates if this Sprite is onScreen within the Gamestack.WIDTH && Gamestack.HEIGHT dimensions, OR any w & h passed as arguments\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {number} w optional WIDTH argument, defaults to Gamestack.WIDTH\r\n         * @param {number} h optional HEIGHT argument, defaults to Gamestack.HEIGHT\r\n         **********/\r\n\r\n        LifeSpan(value) {\r\n            this.life = value;\r\n        }\r\n\r\n        Life(value) //same as LifeSpan\r\n        {\r\n            this.life = value;\r\n        }\r\n\r\n        isDead(gw) {\r\n\r\n            gw = gw || Gamestack.game_windows[0];\r\n\r\n            return this.hasOwnProperty('life') && this.life <= 0;\r\n        }\r\n\r\n        die(gw) {\r\n\r\n       this.life = 0;\r\n\r\n       return this;\r\n\r\n        }\r\n\r\n        onScreen(w, h, gw) {\r\n\r\n            w = w || Gamestack.WIDTH;\r\n\r\n            h = h || Gamestack.HEIGHT;\r\n\r\n            gw = gw || Gamestack.game_windows[0];\r\n\r\n            var camera = gw.camera || Gamestack.camera || {position: new Gamestack.Vector(0, 0, 0)},\r\n                scrollFactor = this.noScroll ? 0 : this.scrollFactor;\r\n\r\n            var camPos = new Gamestack.Vector(camera.position).mult(scrollFactor);\r\n\r\n            var p = new Gamestack.Vector(this.position.x - camPos.x, this.position.y - camPos.y, this.position.z - camPos.z);\r\n\r\n            return p.x + this.size.x > -1000 - w && p.x < w + 1000\r\n                && p.y + this.size.y > 0 - 1000 - h && p.y < h + 1000;\r\n\r\n        }\r\n\r\n        /*****************************\r\n         * Updates\r\n         ***************************/\r\n\r\n        /*****************************\r\n         * update()\r\n         * -starts empty:: is used by Quick2d.js as the main sprite update\r\n         ***************************/\r\n\r\n        /**\r\n         * This function is the main update() function for the Sprite\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n\r\n        update(sprite) {\r\n        }\r\n\r\n        /*****************************\r\n         * def_update()\r\n         * -applies speed and other default factors of movement::\r\n         * -is used by Quick2d.js as the system def_update (default update)\r\n         ***************************/\r\n\r\n        /**\r\n         * This function updates various speed and rotational-speed properties for the Sprite()\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        def_update(sprite) {\r\n\r\n            if (this.hasOwnProperty('life') && !isNaN(this.life)) {\r\n\r\n                this.life -= 1;\r\n\r\n            }\r\n            ;\r\n\r\n            for (var x in this.speed) {\r\n\r\n                if (this.speed[x] > 0 || this.speed[x] < 0) {\r\n\r\n                    this.position[x] += this.speed[x];\r\n\r\n                }\r\n\r\n            }\r\n\r\n            for (var x in this.acceleration) {\r\n\r\n                if (this.acceleration[x] > 0 || this.acceleration[x] < 0) {\r\n\r\n                    this.speed[x] += this.acceleration[x];\r\n\r\n                }\r\n\r\n            }\r\n\r\n            for (var x in this.rot_speed) {\r\n\r\n                if (this.rot_speed[x] > 0 || this.rot_speed[x] < 0) {\r\n\r\n                    this.rotation[x] += this.rot_speed[x];\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n            for (var x in this.rot_accel) {\r\n\r\n\r\n                if (this.rot_accel[x] > 0 || this.rot_accel[x] < 0) {\r\n\r\n                    this.rot_speed[x] += this.rot_accel[x];\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * This function resolves a function nested in an object, from a string-key, and it is applied by Gamestack.js for persistence of data and Sprite() behaviors\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        resolveFunctionFromDoubleKeys(keyString1, keyString2, obj, callback) {\r\n\r\n            callback(typeof obj[keyString1][keyString2] == 'function' ? obj[keyString1][keyString2] : {});\r\n\r\n        }\r\n\r\n        /**\r\n         * This function extends an existing function, and is applied by Gamestack in onInit();\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        extendFunc(fun, extendedFunc) {\r\n\r\n            console.log('extending func');\r\n\r\n            var ef = extendedFunc;\r\n\r\n            var __inst = this;\r\n\r\n            return function () {\r\n\r\n\r\n                ef(__inst);\r\n\r\n                //any new function comes after\r\n\r\n                fun(__inst);\r\n\r\n\r\n            };\r\n\r\n        }\r\n\r\n\r\n        /*****************************\r\n         *  onUpdate(fun)\r\n         * -args: 1 function(sprite){ } //the self-instance/sprite is passed into the function()\r\n         * -overrides and maintains existing code for update(){} function\r\n         ***************************/\r\n\r\n\r\n        /**\r\n         * Extends the update() of this sprite with a new function to be called during update()\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {function} the function to apply to the Sprite:update()\r\n         **********/\r\n\r\n\r\n        onUpdate(fun) {\r\n            fun = fun || function () {\r\n                };\r\n\r\n            let update = this.update;\r\n\r\n            let __inst = this;\r\n\r\n            this.update = function (__inst) {\r\n                update(__inst);\r\n                fun(__inst);\r\n            };\r\n\r\n        }\r\n\r\n        /*****************************\r\n         *  travelLineTwoWay()\r\n         *  -sprite travels line: any Line() or object with property of line\r\n         ***************************/\r\n\r\n        travelLineTwoWay(lineObject, speed, curveKey, offset) {\r\n\r\n            speed = speed || 1;\r\n\r\n            var motionCurveOptions = [\"linear\", \"quadratic\", \"cubic\"];\r\n\r\n            curveKey = curveKey || \"linear\";\r\n\r\n            var line = lineObject;\r\n\r\n            if (lineObject.line) {\r\n                line = lineObject.line;\r\n            }\r\n\r\n            this.__crtLineIx = this.__crtLineIx || 0;\r\n\r\n            var __inst = this,\r\n\r\n                pctFloat = __inst.__crtLineIx % ((line.points.length - 1) / 2) / ((line.points.length - 1) / 2);\r\n\r\n            if (__inst.__crtLineIx >= ((line.points.length - 1) / 2)) {\r\n                pctFloat = 1.0 - pctFloat;\r\n\r\n            }\r\n\r\n            var ixChange = Gamestack.Curves.InOut[curveKey](pctFloat) * speed * 0.5;\r\n\r\n            if (curveKey == 'linear') {\r\n                ixChange = speed;\r\n            }\r\n\r\n            ixChange = Math.round(ixChange);\r\n\r\n            if (ixChange < 1) {\r\n                ixChange = 1;\r\n            }\r\n\r\n            __inst.position = new Gamestack.Vector(line.points[__inst.__crtLineIx]);\r\n\r\n            console.log(ixChange);\r\n\r\n            __inst.__crtLineIx += ixChange;\r\n\r\n            if (__inst.__crtLineIx >= line.points.length) {\r\n\r\n                line.points = line.points.reverse();\r\n                __inst.__crtLineIx = 0;\r\n            }\r\n\r\n            if (offset instanceof Gamestack.Vector) {\r\n                this.position = this.position.add(offset);\r\n            }\r\n\r\n\r\n        }\r\n\r\n\r\n        /*****************************\r\n         *  travelLineTwoWay()\r\n         *  -sprite travels line: any Line() or object with property of line\r\n         ***************************/\r\n\r\n        travelLineOnLoop(lineObject, speed, curveKey, offset) {\r\n\r\n            speed = speed || 1;\r\n\r\n            var motionCurveOptions = [\"linear\", \"quadratic\", \"cubic\"];\r\n\r\n            curveKey = curveKey || \"linear\";\r\n\r\n            var line = lineObject;\r\n\r\n            if (lineObject.line) {\r\n                line = lineObject.line;\r\n            }\r\n\r\n            this.__crtLineIx = this.__crtLineIx || 0;\r\n\r\n            var __inst = this,\r\n\r\n                pctFloat = __inst.__crtLineIx % ((line.points.length - 1) / 2) / ((line.points.length - 1) / 2);\r\n\r\n            if (__inst.__crtLineIx >= ((line.points.length - 1) / 2)) {\r\n                pctFloat = 1.0 - pctFloat;\r\n\r\n            }\r\n\r\n            var ixChange = Gamestack.Curves.InOut[curveKey](pctFloat) * speed * 0.5;\r\n\r\n            if (curveKey == 'linear') {\r\n                ixChange = speed;\r\n            }\r\n\r\n            ixChange = Math.round(ixChange);\r\n\r\n            if (ixChange < 1) {\r\n                ixChange = 1;\r\n            }\r\n\r\n            __inst.position = new Gamestack.Vector(line.points[__inst.__crtLineIx]);\r\n\r\n            console.log(ixChange);\r\n\r\n            __inst.__crtLineIx += ixChange;\r\n\r\n            if (__inst.__crtLineIx >= line.points.length) {\r\n                __inst.__crtLineIx = 0;\r\n            }\r\n\r\n            if (offset instanceof Gamestack.Vector) {\r\n                this.position = this.position.add(offset);\r\n            }\r\n\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         *\r\n         * <ul>\r\n         *     <li>A rectangular style position</li>\r\n         *      <li>Takes another sprite as argument</li>\r\n         *       <li>Returns basic true || false during runtime</li>\r\n         * </ul>\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {sprite}\r\n         **********/\r\n\r\n\r\n        /**\r\n         * Get the true || false results of a Collision between two Sprites(), based on their position Vectors and Sizes\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Sprite} sprite the alternate Sprite to process collision with\r\n         **********/\r\n\r\n\r\n        collidesRectangular(sprite) {\r\n\r\n            return Gamestack.Collision.spriteRectanglesCollide(this, sprite);\r\n\r\n        }\r\n\r\n\r\n        /*****************************\r\n         *  shoot(sprite)\r\n         *  -fire a shot from the sprite:: as in a firing gun or spaceship\r\n         *  -takes options{} for number of shots anglePerShot etc...\r\n         *  -TODO: complete and test this code\r\n         ***************************/\r\n\r\n        /**\r\n         * Sprite fires a particle object\r\n         * <ul>\r\n         *     <li>Easy instantiator for bullets and propelled objects in GameStack</li>\r\n         *     <li>*TODO: This function is not-yet implemented in GameStack</li>\r\n         * </ul>\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {options} *numerous args\r\n         **********/\r\n\r\n\r\n        /**\r\n         * fire a projectile-sub Sprite from the Sprite\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Object} options an object of arguments\r\n         * @param {Gamestack.Animation} animation the animation to fire from the Sprite\r\n         * @param {number} speed the speed of the shot that is projected\r\n         * @param {Gamestack.Vector} position the initial position of the shot: defaults to current Sprite position\r\n         * @param {Gamestack.Vector} size the Vector size of the shot\r\n         * @param {Gamestack.Vector} rot_offset the rotational offset to apply: controls direction of the shot\r\n         **********/\r\n\r\n        shoot(options, gw) {\r\n            //character shoots an animation\r\n\r\n            gw = gw || Gamestack.game_windows[0];\r\n\r\n            this.prep_key = 'shoot';\r\n\r\n            let animation = options.bullet || options.animation || options.anime || new Gamestack.Animation();\r\n\r\n            let speed = options.speed || options.velocity || 1;\r\n\r\n\r\n            let size = options.size || new Gamestack.Vector(10, 10, 0);\r\n\r\n            let position = new Gamestack.Vector(options.position) || new Gamestack.Vector(this.position);\r\n\r\n\r\n            let rot_offset = options.rot_offset || options.rotation || 0;\r\n\r\n            let total = options.total || 1;\r\n\r\n            let rot_disp = options.rot_disp || 0;//the full rotational-dispersion of the bullets\r\n\r\n            let curve = options.curve, curve_size = options.curve_size, curve_growth = options.curve_growth || 1.0;\r\n\r\n            let curve_key = options.curve_key || 'quintic';\r\n\r\n            let life = options.life || 900;\r\n\r\n            var shots = [];\r\n\r\n            for (var x = 0; x < total; x++) {\r\n\r\n                var __playerInst = this;\r\n\r\n                if (__gameInstance.isAtPlay) {\r\n\r\n                    var bx = position.x, by = position.y, bw = size.x, bh = size.y;\r\n\r\n                    var shot = new Gamestack.Sprite({\r\n\r\n                        active: true,\r\n\r\n                        position: new Gamestack.Vector(position),\r\n\r\n                        size: new Gamestack.Vector(size),\r\n\r\n                        speed: speed,\r\n\r\n                        image: animation.image,\r\n\r\n                        rotation: new Gamestack.Vector(0, 0, 0),\r\n\r\n                        flipX: false,\r\n\r\n                        life: options.life\r\n\r\n                    });\r\n\r\n                    shot.noScroll = true;\r\n\r\n                    shot.setAnimation(animation);\r\n\r\n                    rot_offset = new Gamestack.Vector(rot_offset, 0, 0);\r\n\r\n                    shot.position.x = bx, shot.position.y = by;\r\n\r\n                    //Danger On this line: annoying math --dispersing rotation of bullets by rot_disp\r\n\r\n                    var div = rot_disp / total;\r\n\r\n                    var rotPlus = div * x + div / 2 - rot_disp / 2;\r\n\r\n                    shot.rotation.x = rot_offset.x + rotPlus;\r\n\r\n                    shot.origin = new Gamestack.Vector(position);\r\n\r\n                    shot.speed = new Gamestack.Vector(Math.cos((shot.rotation.x) * 3.14 / 180) * speed, Math.sin((shot.rotation.x) * 3.14 / 180) * speed);\r\n\r\n\r\n                    shots.push(shot);\r\n\r\n                    if (!curve) {\r\n\r\n                        shot.onUpdate(function (spr) {\r\n                            // console.log('update:rotation:' + shot.rotation.x);\r\n\r\n\r\n                        });\r\n                    }\r\n                    else {\r\n\r\n                        shot.ticker = 0;\r\n\r\n                        var r = shot.rotation.x + 0;\r\n\r\n                        shot.line = new Gamestack.CurvedLine().Pos(position)\r\n                            .Curve(curve_key).SegmentSize(curve_size)\r\n                            .MaxSize(2000).Growth(1.5).Rotate(r).Fill();\r\n\r\n                        shot.onUpdate(function (spr) {\r\n\r\n                            spr.ticker += 1;\r\n\r\n                            if (spr.ticker < spr.line.points.length)\r\n                                spr.position = new Gamestack.Vector(spr.line.points[spr.ticker]);\r\n\r\n                        });\r\n                    }\r\n\r\n                    gw.add(shot);\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return shots;\r\n\r\n        }\r\n\r\n        /**\r\n         * create a subsprite of Sprite belonging to the current Sprite\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Object} options an object of arguments\r\n         * @param {Animation} animation the animation to fire from the Sprite\r\n         * @param {number} speed the speed of the shot that is projected\r\n         * @param {Gamestack.Vector} position the initial position of the shot: defaults to current Sprite position\r\n         * @param {Vector} size the Vector size of the shot\r\n         * @param {Vector} offset the positional offset to apply\r\n         **********/\r\n\r\n        subsprite(options, gw) {\r\n\r\n            gw = gw || Gamestack.game_windows[0];\r\n\r\n            let animation = options.animation || new Gamestack.Animation();\r\n\r\n            let position = options.position || new Gamestack.Vector(this.position);\r\n\r\n            let offset = options.offset || new Gamestack.Vector(0, 0, 0);\r\n\r\n            let size = new Gamestack.Vector(options.size || this.size);\r\n\r\n            if (__gameInstance.isAtPlay) {\r\n\r\n                var subsprite = gw.add(new Gamestack.Sprite({\r\n\r\n                    active: true,\r\n\r\n                    position: position,\r\n\r\n                    size: size,\r\n\r\n                    offset: offset,\r\n\r\n                    image: animation.image,\r\n\r\n                    rotation: new Gamestack.Vector(0, 0, 0),\r\n\r\n                    flipX: false,\r\n\r\n                    scrollFactor: this.scrollFactor,\r\n\r\n                    noScroll: this.noScroll\r\n\r\n                }));\r\n\r\n                subsprite.setAnimation(animation);\r\n\r\n                return subsprite;\r\n\r\n            }\r\n            else {\r\n                alert('No subsprite when not at play');\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * animate Sprite.selected_animation  by one frame\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Animation} animation to use, defaults to Sprite.selected_animation\r\n         **********/\r\n\r\n        animate(animation) {\r\n\r\n            if (__gameInstance.isAtPlay) {\r\n\r\n                if (animation) {\r\n                    this.setAnimation(animation)\r\n                }\r\n\r\n                this.selected_animation.animate();\r\n\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * run a function when the Sprite.selected_animation is complete\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Function} fun the function to call when the animation is complete\r\n         *\r\n         **********/\r\n\r\n        onAnimationComplete(fun) {\r\n            this.selected_animation.onComplete(fun);\r\n\r\n        }\r\n\r\n        /*****************************\r\n         *  accelY\r\n         *  -accelerate on Y-Axis with 'accel' and 'max' (speed) arguments\r\n         *  -example-use: gravitation of sprite || up / down movement\r\n         ***************************/\r\n\r\n        /**\r\n         * accelerate speed on the Y-Axis\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {number} accel the increment of acceleration\r\n         * @param {number} max the maximum for speed\r\n         *\r\n         **********/\r\n\r\n        accelY(accel, max) {\r\n\r\n            accel = Math.abs(accel);\r\n\r\n            if (typeof(max) == 'number') {\r\n                max = {y: max};\r\n\r\n            }\r\n\r\n            this.assertSpeed();\r\n\r\n            let diff = max.y - this.speed.y;\r\n\r\n            if (diff > 0) {\r\n                this.speed.y += Math.abs(diff) >= accel ? accel : diff;\r\n\r\n            }\r\n            ;\r\n\r\n            if (diff < 0) {\r\n                this.speed.y -= Math.abs(diff) >= accel ? accel : diff;\r\n\r\n            }\r\n            ;\r\n\r\n        }\r\n\r\n\r\n        /*****************************\r\n         *  accelX\r\n         *  -accelerate on X-Axis with 'accel' and 'max' (speed) arguments\r\n         *  -example-use: running of sprite || left / right movement\r\n         ***************************/\r\n\r\n\r\n        /**\r\n         * accelerate speed on the X-Axis\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {number} accel the increment of acceleration\r\n         * @param {number} max the maximum for speed\r\n         *\r\n         **********/\r\n\r\n\r\n        accelX(accel, max) {\r\n\r\n            accel = Math.abs(accel);\r\n\r\n            if (typeof(max) == 'number') {\r\n                max = {x: max};\r\n\r\n            }\r\n\r\n            this.assertSpeed();\r\n\r\n            let diff = max.x - this.speed.x;\r\n\r\n            if (diff > 0) {\r\n                this.speed.x += Math.abs(diff) >= accel ? accel : diff;\r\n\r\n            }\r\n            ;\r\n\r\n            if (diff < 0) {\r\n                this.speed.x -= Math.abs(diff) >= accel ? accel : diff;\r\n\r\n            }\r\n            ;\r\n\r\n        }\r\n\r\n\r\n        /*****************************\r\n         *  accel\r\n         *  -accelerate any acceleration -key\r\n         ***************************/\r\n\r\n\r\n        /**\r\n         * accelerate toward a max value on any object-property:: intended for self-use\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Object} prop The object to control\r\n         * @param {string} key the property-key for targeted property of prop argument\r\n         *\r\n         * @param {number} accel the increment of acceleration\r\n         *\r\n         * @param {number} max the max value to accelerate towards\r\n         *\r\n         *\r\n         **********/\r\n\r\n        accel(prop, key, accel, max) {\r\n\r\n            accel = Math.abs(accel);\r\n\r\n            if (typeof(max) == 'number') {\r\n                max = {x: max};\r\n\r\n            }\r\n\r\n            let speed = prop[key];\r\n\r\n            // this.assertSpeed();\r\n\r\n            let diff = max.x - prop[key];\r\n\r\n            if (diff > 0) {\r\n                prop[key] += Math.abs(diff) >= accel ? accel : diff;\r\n\r\n            }\r\n            ;\r\n\r\n            if (diff < 0) {\r\n                prop[key] -= Math.abs(diff) >= accel ? accel : diff;\r\n\r\n            }\r\n            ;\r\n\r\n        }\r\n\r\n\r\n        /*****************************\r\n         *  decel\r\n         *  -deceleration -key\r\n         ***************************/\r\n\r\n        /**\r\n         * decelerate toward a max value on any object-property:: intended for self-use\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Object} prop The object to control\r\n         * @param {string} key the property-key for targeted property of prop argument\r\n         *\r\n         * @param {number} decel the increment of deceleration\r\n         *\r\n         * @param {number} max the max value to decelerate towards\r\n         *\r\n         *\r\n         **********/\r\n\r\n        decel(prop, key, rate) {\r\n            if (typeof(rate) == 'object') {\r\n\r\n                rate = rate.rate;\r\n\r\n            }\r\n\r\n            rate = Math.abs(rate);\r\n\r\n            if (Math.abs(prop[key]) <= rate) {\r\n                prop[key] = 0;\r\n            }\r\n\r\n            else if (prop[key] > 0) {\r\n                prop[key] -= rate;\r\n\r\n            }\r\n            else if (prop[key] < 0) {\r\n                prop[key] += rate;\r\n\r\n            }\r\n            else {\r\n\r\n                prop[key] = 0;\r\n\r\n            }\r\n        }\r\n\r\n\r\n        /*****************************\r\n         *  decelY\r\n         *  -decelerate on the Y axis\r\n         *  -args: 1 float:amt\r\n         ***************************/\r\n\r\n\r\n        /**\r\n         * decelerate speed on the Y-Axis, toward zero\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {number} amt the increment of deceleration, negatives ignored\r\n         *\r\n         **********/\r\n\r\n        decelY(amt) {\r\n\r\n            amt = Math.abs(amt);\r\n\r\n            if (Math.abs(this.speed.y) <= amt) {\r\n                this.speed.y = 0;\r\n\r\n            }\r\n            else if (this.speed.y > amt) {\r\n\r\n                this.speed.y -= amt;\r\n            }\r\n            else if (this.speed.y < amt * -1) {\r\n\r\n                this.speed.y += amt;\r\n            }\r\n\r\n        }\r\n\r\n        /*****************************\r\n         *  decelX\r\n         *  -decelerate on the X axis\r\n         *  -args: 1 float:amt\r\n         ***************************/\r\n\r\n\r\n        /**\r\n         * decelerate speed on the X-Axis, toward zero\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {number} amt the increment of deceleration, negatives ignored\r\n         *\r\n         **********/\r\n\r\n        decelX(amt) {\r\n\r\n            amt = Math.abs(amt);\r\n\r\n\r\n            if (this.speed.x > amt) {\r\n\r\n                this.speed.x -= amt;\r\n            }\r\n            else if (this.speed.x < amt * -1) {\r\n\r\n                this.speed.x += amt;\r\n            }\r\n\r\n            if (Math.abs(this.speed.x) <= amt) {\r\n\r\n                this.speed.x = 0;\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n        shortest_stop(item, callback) {\r\n            var diff_min_y = item.min ? item.min.y : Math.abs(item.position.y - this.position.y + this.size.y);\r\n\r\n            var diff_min_x = item.min ? item.min.x : Math.abs(item.position.x - this.position.x + this.size.x);\r\n\r\n            var diff_max_y = item.max ? item.max.y : Math.abs(item.position.y + item.size.y - this.position.y);\r\n\r\n            var diff_max_x = item.max ? item.max.x : Math.abs(item.position.x + item.size.x - this.position.y);\r\n\r\n            var dimens = {top: diff_min_y, left: diff_min_x, bottom: diff_max_y, right: diff_max_x};\r\n\r\n            var minkey = \"\", min = 10000000;\r\n\r\n            for (var x in dimens) {\r\n                if (dimens[x] < min) {\r\n                    min = dimens[x];\r\n                    minkey = x; // a key of top left bottom or right\r\n\r\n                }\r\n            }\r\n\r\n            callback(minkey);\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * get the center of a Sprite\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         *\r\n         * @returns (Vector)\r\n         *\r\n         **********/\r\n\r\n        center() {\r\n\r\n\r\n            return new Gamestack.Vector(this.position.x + this.size.x / 2, this.position.y + this.size.y / 2, 0);\r\n\r\n        }\r\n\r\n        /*************\r\n         * #BE CAREFUL\r\n         * -with this function :: change sensitive / tricky / 4 way collision\r\n         * *************/\r\n\r\n\r\n        /**\r\n         * determine if Sprite overlaps on X axis with another Sprite\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Sprite} item the Sprite to compare with\r\n         * @param {number} padding the 0-1.0 float value of padding to use on self when testing overlap\r\n         * @returns {var} a true || false var\r\n         *\r\n         **********/\r\n\r\n        overlap_x(item, padding) {\r\n            if (!padding) {\r\n                padding = 0;\r\n            }\r\n\r\n            var paddingX = Math.round(padding * this.size.x),\r\n\r\n                paddingY = Math.round(padding * this.size.y), left = this.position.x + paddingX,\r\n                right = this.position.x + this.size.x - paddingX,\r\n\r\n                top = this.position.y + paddingY, bottom = this.position.y + this.size.y - paddingY;\r\n\r\n            return right > item.position.x && left < item.position.x + item.size.x;\r\n\r\n\r\n        }\r\n\r\n        /*************\r\n         * #BE CAREFUL\r\n         * -with this function :: change sensitive / tricky / 4 way collision\r\n         * *************/\r\n\r\n\r\n        /**\r\n         * determine if Sprite overlaps on Y axis with another Sprite\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Sprite} item the Sprite to compare with\r\n         * @param {number} padding the 0-1.0 float value of padding to use on self when testing overlap\r\n         * @returns (true || false}\r\n         *\r\n         **********/\r\n\r\n        overlap_y(item, padding) {\r\n            if (!padding) {\r\n                padding = 0;\r\n            }\r\n\r\n            var paddingX = Math.round(padding * this.size.x),\r\n\r\n                paddingY = Math.round(padding * this.size.y), left = this.position.x + paddingX,\r\n                right = this.position.x + this.size.x - paddingX,\r\n\r\n                top = this.position.y + paddingY, bottom = this.position.y + this.size.y - paddingY;\r\n\r\n            return bottom > item.position.y && top < item.position.y + item.size.y;\r\n\r\n        }\r\n\r\n\r\n        /*************\r\n         * #BE CAREFUL\r\n         * -with this function :: change sensitive / tricky / 4 way collision\r\n         * *************/\r\n\r\n\r\n\r\n        collide_stop_x(item) {\r\n\r\n            var apart = false;\r\n\r\n            var ct = 10000;\r\n\r\n            while (!apart && ct > 0) {\r\n\r\n                ct--;\r\n\r\n                var diffX = this.center().sub(item.center()).x;\r\n\r\n                var distX = Math.abs(this.size.x / 2 + item.size.x / 2 - Math.round(this.size.x * this.padding.x));\r\n\r\n                if (Math.abs(diffX) < distX) {\r\n\r\n                    this.position.x -= diffX > 0 ? -1 : 1;\r\n\r\n\r\n                }\r\n                else {\r\n\r\n                    this.speed.x = 0;\r\n\r\n                    apart = true;\r\n\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        Life(v) {\r\n            this.life = v;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        /*************\r\n         * #BE CAREFUL\r\n         * -with this function :: change sensitive / tricky / 4 way collision\r\n         * *************/\r\n\r\n\r\n        /**\r\n         * cause a fourway collision-stop between this and another Sprite :: objects will behave clastically and resist passing through one another\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Sprite} item the Sprite to compare with\r\n         *\r\n         **********/\r\n\r\n        collide_stop(item) {\r\n\r\n            if (this.id == item.id) {\r\n                return false;\r\n\r\n            }\r\n\r\n            // this.position = this.position.sub(this.speed);\r\n\r\n            if (this.collidesRectangular(item)) {\r\n\r\n                var diff = this.center().sub(item.center());\r\n\r\n                if (this.overlap_x(item, this.padding.x + 0.1) && Math.abs(diff.x) < Math.abs(diff.y)) {\r\n\r\n                    var apart = false;\r\n\r\n                    var ct = 10000;\r\n\r\n                    while (!apart && ct > 0) {\r\n\r\n                        ct--;\r\n\r\n                        var diffY = this.center().sub(item.center()).y;\r\n\r\n                        var distY = Math.abs(this.size.y / 2 + item.size.y / 2 - Math.round(this.size.y * this.padding.y));\r\n\r\n                        if (Math.abs(diffY) < distY) {\r\n\r\n                            this.position.y -= diffY > 0 ? -1 : diffY < 0 ? 1 : 0;\r\n\r\n                            this.position.y = Math.round(this.position.y);\r\n\r\n                        }\r\n\r\n                        else {\r\n\r\n                            if (diffY <= 0) {\r\n                                this.__inAir = false;\r\n                            }\r\n                            ;\r\n\r\n                            this.speed.y = 0;\r\n\r\n                            return apart = true;\r\n\r\n\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n\r\n                }\r\n\r\n\r\n                if (this.overlap_y(item, this.padding.y) && Math.abs(diff.y) < Math.abs(diff.x)) {\r\n\r\n                    this.collide_stop_x(item);\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n\r\n        collide_stop_top(item) {\r\n\r\n\r\n            if (this.id == item.id) {\r\n                return false;\r\n\r\n            }\r\n\r\n            if (this.overlap_x(item, this.padding.x + 0.1)) {\r\n\r\n                console.log('OVERLAP_X');\r\n\r\n                var paddingY = this.padding.y * this.size.y;\r\n\r\n                if (this.position.y + this.size.y - paddingY <= item.position.y) {\r\n\r\n                    this.groundMaxY = item.position.y - this.size.y + paddingY;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * Restore a sprite from saved .json data\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         *\r\n         * @returns (Sprite)\r\n         **********/\r\n\r\n        restoreFrom(data) {\r\n            data.image = new GameImage(data.src || data.image.src);\r\n\r\n            return new Gamestack.Sprite(data);\r\n\r\n        }\r\n\r\n\r\n        /*****************************\r\n         *  fromFile(file_path)\r\n         *  -TODO : complete this function based on code to load Sprite() from file, located in the spritemaker.html file\r\n         *  -TODO: test this function\r\n         ***************************/\r\n\r\n        fromFile(file_path) {\r\n\r\n            if (typeof file_path == 'string') {\r\n\r\n                var __inst = this;\r\n\r\n                $.getJSON(file_path, function (data) {\r\n\r\n                    __inst = new Gamestack.Sprite(data);\r\n\r\n                });\r\n            }\r\n        }\r\n\r\n        toJSONString() {\r\n            for (var x = 0; x < this.motions.length; x++) {\r\n                this.motions[x].parent = false;\r\n            }\r\n\r\n            return jstr(this);\r\n        }\r\n\r\n    }\r\n    ;\r\n\r\n    /****************\r\n     * TODO : Complete SpritePresetsOptions::\r\n     *  Use these as options for Sprite Control, etc...\r\n     ****************/\r\n\r\n    Gamestack.Sprite = Sprite;\r\n\r\n    let SpriteInitializersOptions = {\r\n\r\n        Clastics: {\r\n\r\n            top_collideable: function (sprite) {\r\n\r\n                for (var x in Gamestack.__gameWindow.forces) {\r\n                    var force = Gamestack.__gameWindow.forces[x];\r\n\r\n                    force.topClastics.push(sprite);\r\n\r\n                }\r\n\r\n\r\n                sprite.onUpdate(function () {\r\n\r\n\r\n                });\r\n\r\n            },\r\n\r\n            fourside_collideable: function (sprite) {\r\n\r\n                for (var x in Gamestack.__gameWindow.forces) {\r\n                    var force = Gamestack.__gameWindow.forces[x];\r\n\r\n                    force.clasticObjects.push(sprite);\r\n\r\n                }\r\n\r\n                sprite.onUpdate(function () {\r\n\r\n\r\n                });\r\n\r\n\r\n            }\r\n        },\r\n\r\n        MainGravity: {\r\n\r\n            very_light: function (sprite, gw) {\r\n\r\n                gw = gw || Gamestack.game_windows[0];\r\n                //Add a gravity to the game\r\n\r\n                var gravity = gw.add(new Gamestack.Force({\r\n                    name: \"very_light_grav\",\r\n                    accel: 0.05,\r\n                    max: new Gamestack.Vector(0, 3.5, 0),\r\n                    subjects: [sprite], //sprite is the subject of this Force, sprite is pulled by this force\r\n                    clasticObjects: [] //an empty array of collideable objects\r\n\r\n                }));\r\n\r\n                sprite.onUpdate(function () {\r\n\r\n\r\n                });\r\n\r\n            },\r\n\r\n            light: function (sprite, gw) {\r\n\r\n                gw = gw || Gamestack.game_windows[0];\r\n\r\n                var gravity = gw.add(new Gamestack.Force({\r\n                    name: \"light_grav\",\r\n                    accel: 0.1,\r\n                    max: new Gamestack.Vector(0, 4.5, 0),\r\n                    subjects: [sprite], //sprite is the subject of this Force, sprite is pulled by this force\r\n                    clasticObjects: [] //an empty array of collideable objects\r\n\r\n                }));\r\n\r\n\r\n                sprite.onUpdate(function () {\r\n\r\n\r\n                });\r\n\r\n            },\r\n\r\n            medium: function (sprite, gw) {\r\n\r\n                gw = gw || Gamestack.game_windows[0];\r\n\r\n                var gravity = gw.add(new Gamestack.Force({\r\n                    name: \"medium_grav\",\r\n                    accel: 0.2,\r\n                    max: new Gamestack.Vector(0, 7.5, 0),\r\n                    subjects: [sprite], //sprite is the subject of this Force, sprite is pulled by this force\r\n                    clasticObjects: [] //an empty array of collideable objects\r\n\r\n                }));\r\n\r\n\r\n                sprite.onUpdate(function () {\r\n\r\n\r\n                });\r\n\r\n            },\r\n\r\n\r\n            strong: function (sprite, gw) {\r\n\r\n                gw = gw || Gamestack.game_windows[0];\r\n\r\n                var gravity = gw.add(new Gamestack.Force({\r\n                    name: \"strong_grav\",\r\n                    accel: 0.4,\r\n                    max: new Gamestack.Vector(0, 10.5, 0),\r\n                    subjects: [sprite], //sprite is the subject of this Force, sprite is pulled by this force\r\n                    clasticObjects: [] //an empty array of collideable objects\r\n\r\n                }));\r\n\r\n                sprite.onUpdate(function () {\r\n\r\n\r\n                });\r\n\r\n            },\r\n\r\n            very_strong: function (sprite, gw) {\r\n\r\n                gw = gw || Gamestack.game_windows[0];\r\n\r\n                var gravity = gw.add(new Gamestack.Force({\r\n                    name: \"strong_grav\",\r\n                    accel: 0.5,\r\n                    max: new Gamestack.Vector(0, 12.5, 0),\r\n                    subjects: [sprite], //sprite is the subject of this Force, sprite is pulled by this force\r\n                    clasticObjects: [] //an empty array of collideable objects\r\n\r\n                }));\r\n\r\n                sprite.onUpdate(function () {\r\n\r\n\r\n                });\r\n\r\n            },\r\n\r\n        },\r\n\r\n\r\n        ControllerStickMotion: {\r\n\r\n            player_move_x: function (sprite) {\r\n\r\n                alert('applying initializer');\r\n\r\n                console.log('side_scroll_player_run:init-ing');\r\n\r\n                let __lib = Gamestack || Quick2d;\r\n\r\n                Gamestack.GamepadAdapter.on('stick_left', 0, function (x, y) {\r\n\r\n                    console.log('stick-x:' + x);\r\n\r\n                    if (Math.abs(x) < 0.2) {\r\n                        return 0;\r\n                    }\r\n\r\n                    var accel = 0.2; //todo : options for accel\r\n                    var max = 7;\r\n\r\n                    sprite.accelX(accel, x * max);\r\n\r\n                    if (x < -0.2) {\r\n                        sprite.flipX = true;\r\n\r\n                    }\r\n                    else if (x > 0.2) {\r\n                        sprite.flipX = false;\r\n\r\n                    }\r\n\r\n                });\r\n\r\n                sprite.onUpdate(function (spr) {\r\n\r\n                    spr.decelX(0.1);\r\n\r\n                    if (!spr.__falling) {\r\n                        spr.decelY(0.2)\r\n                    }\r\n                    ;\r\n\r\n                });\r\n\r\n\r\n            },\r\n\r\n            player_move_xy: function (sprite) {\r\n\r\n                alert('applying initializer');\r\n\r\n                console.log('side_scroll_player_run:init-ing');\r\n\r\n                let __lib = Gamestack || Quick2d;\r\n\r\n                Gamestack.GamepadAdapter.on('stick_left', 0, function (x, y) {\r\n\r\n                    console.log('stick-x:' + x);\r\n\r\n                    if (Math.abs(x) < 0.2) {\r\n                        x = 0;\r\n                    }\r\n\r\n                    if (Math.abs(y) < 0.2) {\r\n                        y = 0;\r\n                    }\r\n\r\n                    var accel = 0.2; //todo : options for accel\r\n                    var max = 7;\r\n\r\n                    sprite.accelX(accel, x * max);\r\n\r\n                    sprite.accelY(accel, y * max);\r\n\r\n                    if (x < -0.2) {\r\n                        sprite.flipX = true;\r\n\r\n                    }\r\n                    else if (x > 0.2) {\r\n                        sprite.flipX = false;\r\n\r\n                    }\r\n\r\n                });\r\n\r\n                sprite.onUpdate(function (spr) {\r\n\r\n                    sprite.decel(sprite.speed, 'x', 0.1);\r\n\r\n                    sprite.decel(sprite.speed, 'y', 0.1);\r\n\r\n                });\r\n\r\n\r\n            },\r\n\r\n            player_rotate_x: function (sprite) {\r\n\r\n                let __lib = Gamestack || Quick2d;\r\n\r\n                Gamestack.GamepadAdapter.on('stick_left', 0, function (x, y) {\r\n\r\n                    console.log('stick-x:' + x);\r\n\r\n                    if (Math.abs(x) < 0.2) {\r\n                        return 0;\r\n                    }\r\n\r\n                    var accel = 0.25; //todo : options for accel\r\n                    var max = 7;\r\n\r\n                    sprite.accel(sprite.rot_speed, 'x', accel, x * max);\r\n\r\n                    if (x < -0.2) {\r\n                        sprite.flipX = true;\r\n\r\n                    }\r\n                    else if (x > 0.2) {\r\n                        sprite.flipX = false;\r\n\r\n                    }\r\n\r\n                });\r\n\r\n                sprite.onUpdate(function (spr) {\r\n\r\n                    sprite.decel(sprite.rot_speed, 'x', 0.1);\r\n\r\n                    if (!spr.__falling) {\r\n                        spr.decelY(0.2)\r\n                    }\r\n                    ;\r\n\r\n                });\r\n\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n    };\r\n\r\n\r\n    Gamestack.Sprite = Sprite;\r\n\r\n\r\n    Gamestack.options = Gamestack.options || {};\r\n\r\n    Gamestack.options.SpriteInitializers = SpriteInitializersOptions;\r\n\r\n\r\n})();\r\n;(function () {\r\n    console.log('Vector class... creating');\r\n\r\n\r\n    /**\r\n     * Gamestack.Vector: Takes arguments of x, y, and (optionally) z, instantiates Vector object\r\n\r\n     <ul>\r\n     <li>Optional: use a Vector as the 'x' argument, and instantiate new distinct Vector from the argument</li>\r\n     </ul>\r\n\r\n     * @param   {number} x the x coordinate\r\n     * @param   {number} y the y coordinate\r\n     * @param   {number} z the z coordinate\r\n     * @returns {Vector} a Vector object\r\n     */\r\n\r\n    class Vector {\r\n        constructor(x, y, z, r) {\r\n\r\n            if (typeof(x) == 'object' && x.hasOwnProperty('x') && x.hasOwnProperty('y')) //optionally pass vector3\r\n            {\r\n                this.x = x.x;\r\n                this.y = x.y;\r\n                this.z = x.z || 0;\r\n\r\n                if (this.z == null) {\r\n                    this.z = 0;\r\n                }\r\n\r\n                this.valid_check();\r\n\r\n                return this;\r\n            }\r\n\r\n            if (z == null) {\r\n                z = 0;\r\n            }\r\n\r\n            this.x = x;\r\n            this.y = y;\r\n            this.z = z;\r\n            this.r = r;\r\n\r\n            this.valid_check();\r\n\r\n        }\r\n\r\n        valid_check() {\r\n            if (this.x == undefined || this.y == undefined || this.z == undefined) {\r\n                this.x = 0;\r\n                this.y = 0;\r\n                this.z = 0;\r\n            }\r\n\r\n\r\n        }\r\n\r\n        sub(v) {\r\n            if (typeof(v) == 'number') {\r\n                v = {x: v, y: v, z: v};\r\n            }\r\n            ;\r\n\r\n            return new Gamestack.Vector(this.x - v.x, this.y - v.y, this.z - v.z);\r\n\r\n        }\r\n\r\n        add(v) {\r\n            if (typeof(v) == 'number') {\r\n                v = {x: v, y: v, z: v};\r\n            }\r\n            ;\r\n\r\n            return new Gamestack.Vector(this.x + v.x, this.y + v.y, this.z + v.z);\r\n\r\n        }\r\n\r\n        mult(v) {\r\n            if (typeof(v) == 'number') {\r\n                v = {x: v, y: v, z: v};\r\n            }\r\n            ;\r\n\r\n            return new Gamestack.Vector(this.x * v.x, this.y * v.y, this.z * v.z);\r\n\r\n        }\r\n\r\n        div(v) {\r\n            if (typeof(v) == 'number') {\r\n                v = {x: v, y: v, z: v};\r\n            }\r\n            ;\r\n\r\n            return new Gamestack.Vector(this.x / v.x, this.y / v.y, this.z / v.z);\r\n        }\r\n\r\n        round() {\r\n            return new Gamestack.Vector(Math.round(this.x), Math.round(this.y), Math.round(this.z));\r\n\r\n        }\r\n\r\n        floor() {\r\n            return new Gamestack.Vector(Math.floor(this.x), Math.floor(this.y), Math.floor(this.z));\r\n\r\n        }\r\n\r\n        ceil() {\r\n            return new Gamestack.Vector(Math.ceil(this.x), Math.ceil(this.y), Math.ceil(this.z));\r\n\r\n        }\r\n\r\n        equals(v) {\r\n\r\n            return this.x == v.x && this.y == v.y && this.z == v.z;\r\n        }\r\n\r\n        trig_distance_xy(v) {\r\n\r\n            var dist = this.sub(v);\r\n\r\n            return Math.sqrt(dist.x * dist.x + dist.y * dist.y);\r\n\r\n        }\r\n\r\n        diff() {\r\n            //TODO:this function\r\n\r\n\r\n        }\r\n\r\n        abs_diff() {\r\n            //TODO:this function\r\n\r\n        }\r\n\r\n        is_between(v1, v2) {\r\n            //TODO : overlap vectors return boolean\r\n\r\n            return this.x >= v1.x && this.x <= v2.x &&\r\n                this.y >= v1.y && this.y <= v2.y &&\r\n                this.z >= v1.z && this.z <= v2.z;\r\n\r\n\r\n        }\r\n\r\n    }\r\n    ;\r\n\r\n\r\n    let Vector3 = Vector, Pos = Vector, Size = Vector, Position = Vector, Vector2 = Vector, Rotation = Vector;\r\n\r\n    Gamestack.Vector = Vector;\r\n\r\n    Gamestack.Rotation = Vector;\r\n\r\n    Gamestack.Pos = Vector;\r\n\r\n    Gamestack.Position = Vector;\r\n\r\n    Gamestack.Size = Vector;\r\n\r\n\r\n//The above are a list of synonymous expressions for Vector. All of these do the same thing in this library (store x,y,z values)\r\n\r\n\r\n//SuperVector() : handles all advanced Vector mathematics for any class requiring Vector math\r\n\r\nvar VectorMath = {\r\n\r\n    rotatePointsXY(x, y, angle) {\r\n\r\n        var theta = angle * Math.PI / 180;\r\n\r\n        var point = {};\r\n        point.x = x * Math.cos(theta) - y * Math.sin(theta);\r\n        point.y = x * Math.sin(theta) + y * Math.cos(theta);\r\n\r\n        point.z = 0;\r\n\r\n        return point\r\n    }\r\n\r\n}\r\n\r\nGamestack.VectorMath = VectorMath;\r\n\r\n})();;class Background extends Gamestack.Sprite {\r\n\r\n    constructor(args={}) {\r\n\r\n        super(args);\r\n\r\n        this.type = args.type || \"parallax\" || \"basic\" || false;\r\n\r\n        this.source_objects = args.objects || args.source_objects || [];\r\n\r\n        this.members = [];\r\n\r\n        this.rows = args.rows || 1;//The Y number of repititions\r\n\r\n        this.cols = args.cols || 1; //The X number of repetitions of the images\r\n\r\n        this.flip = args.flip || false;\r\n\r\n        this.fill = args.fill || false;\r\n\r\n        this.noScroll = args.noScroll || false;\r\n\r\n        this.scrollFactor = args.scrollFactor || 1.0;\r\n\r\n        if(this.noScroll){ this.scrollFactor = 0; };\r\n\r\n        this.flip = args.flip || false;\r\n\r\n        var __inst = this;\r\n\r\n    }\r\n\r\n    Flip(value)\r\n    {\r\n        if(value == undefined)\r\n        {\r\n            this.flip = true;\r\n        }\r\n        else if (value == true || value == false) {\r\n            this.flip = value;\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    Rows(r)\r\n    {\r\n        this.rows = r;\r\n        return this;\r\n    }\r\n\r\n    Cols(c)\r\n    {\r\n        this.cols = c;\r\n        return this;\r\n    }\r\n\r\n    ScrollFactor(sf)\r\n    {\r\n        this.scrollFactor = sf;\r\n        return this;\r\n    }\r\n\r\n    Fill(approxRows, approxCols, gw)\r\n    {\r\n\r\n\r\n        approxRows = approxRows || this.rows || 1;\r\n\r\n        approxCols = approxCols || this.cols || 1;\r\n\r\n        this.members.push(new Background(this)); //\"This\" or base image is always applied\r\n\r\n        for(var x = 0; x < this.source_objects.length; x++)\r\n        {\r\n            this.members.push(new Background(this.source_objects[x]));//src strings OR Sprites()\r\n        }\r\n\r\n        gw = gw || Gamestack.game_windows[0];\r\n\r\n        var w= gw.canvas.width, h = gw.canvas.height,\r\n            xBacksTotal = Math.floor(approxRows / 2), yBacksTotal =  Math.floor(approxCols / 2);\r\n\r\n        var __inst = this;\r\n\r\n        //create first row:\r\n\r\n        for(var y = -yBacksTotal; y <= yBacksTotal + 1; y++)\r\n        {\r\n            console.log('adding background:' + y);\r\n\r\n\r\n            for(var x = -xBacksTotal; x <= xBacksTotal + 1; x++)\r\n            {\r\n\r\n                this.members.push(new Background(this));\r\n\r\n                var b = this.members[this.members.length - 1];\r\n\r\n                b.setSize(this.size);\r\n\r\n                var __inst = this;\r\n\r\n\r\n                b.position.x = x * this.size.x;\r\n\r\n                b.position.y = y * this.size.y;\r\n\r\n\r\n\r\n                b.minX = -xBacksTotal * b.size.x + b.size.x;\r\n\r\n                b.maxX = (xBacksTotal + 1) * b.size.x ;\r\n\r\n                b.minY = -yBacksTotal * b.size.y + b.size.y;\r\n\r\n                b.maxY = yBacksTotal * b.size.y ;\r\n\r\n\r\n                if(x % 2 == 0)\r\n                {\r\n                    b.flipX = true;\r\n\r\n                }\r\n\r\n                if(y % 2 == 0)\r\n                {\r\n                    b.flipY = true;\r\n\r\n                }\r\n\r\n\r\n\r\n                b.onUpdate(function(spr){\r\n\r\n                    spr.campos = gw.camera.position;\r\n\r\n                    var cx = spr.campos.x - (spr.campos.x  % spr.size.x), cy = spr.campos.y - ( spr.campos.y % spr.size.y );\r\n\r\n                    if(spr.position.x - cx < spr.minX)\r\n                    {\r\n\r\n                        spr.position.x = spr.maxX + cx;\r\n\r\n                    }\r\n\r\n                    if(spr.position.x - cx > spr.maxX)\r\n                    {\r\n\r\n                        spr.position.x = spr.minX + cx;\r\n\r\n                    }\r\n\r\n                    if(spr.position.y - cy < spr.minY)\r\n                    {\r\n\r\n                        spr.position.y = spr.maxY + cy;\r\n\r\n                    }\r\n\r\n                    if(spr.position.y - cy > spr.maxY)\r\n                    {\r\n\r\n                        spr.position.y = spr.minY + cy;\r\n\r\n                    }\r\n\r\n                });\r\n\r\n                gw.add(b); //add to window\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    add(object)\r\n    {\r\n        var cleanCheck = object instanceof Gamestack.Sprite || object instanceof Array && object[0] instanceof Gamestack.Sprite; //is Sprite\r\n\r\n        if(!cleanCheck)\r\n        {\r\n            return console.error('Must have: valid contents (Gamestack.Sprite OR [] of Gamestack.Sprite())');\r\n        }\r\n\r\n        if(object instanceof Array)\r\n        {\r\n            this.source_objects.cancat(object)\r\n        }\r\n        else\r\n        {\r\n            this.source_objects.push(object);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\nGamestack.Background = Background;;\r\n\r\n\r\n(function(){\r\n    console.log('Interactive class... creating');\r\n\r\n    class Interactive extends Gamestack.Sprite {\r\n        constructor(args = {}) {\r\n            super(args); //init as Gamestack.Sprite()\r\n\r\n            this.collision_settings = new Gamestack.CollisionSettings(args);\r\n\r\n            this.collideables = args.collideables || [];\r\n\r\n            Gamestack.Extendors.collideable(this, args); //overwrites the onCollide():\r\n\r\n        }\r\n\r\n        Collideables(c)\r\n        {\r\n            this.collideables = c || [];\r\n\r\n            if(!this.collideables instanceof Array)\r\n            {\r\n                return console.error('Must pass array for \"c\" argument');\r\n\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n        onCollide() // Gamestack.Interactive instance should have an onCollide() function\r\n        {\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\nGamestack.Interactive = Interactive;\r\n\r\n\r\n})();;\r\n\r\n\r\n(function(){\r\n    console.log('Terrain class... creating');\r\n\r\nclass Terrain extends Gamestack.Sprite\r\n{\r\n    constructor(args={})\r\n    {\r\n        super(args); //init as Gamestack.Sprite()\r\n\r\n        this.collision_settings = new Gamestack.CollisionSettings(args);\r\n\r\n        this.collideables = args.collideables || args.colliders || [];\r\n\r\n        Gamestack.Extendors.collideable(this, args); //overwrites the onCollide():\r\n\r\n\r\n    }\r\n\r\n    Collideables(c)\r\n    {\r\n        this.collideables = c || [];\r\n\r\n        if(!this.collideables instanceof Array)\r\n        {\r\n            return console.error('Must pass array for \"c\" argument');\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n    onCollide() // Gamestack.Terrain instance should have an onCollide() function\r\n    {\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n    Gamestack.Terrain= Terrain;\r\n\r\n})();\r\n;\r\nvar THREE_EXT = {\r\n\r\n    defaults:{\r\n\r\n        DodecahedronGeometry:{radius:1, detail:0},\r\n\r\n        SphereGeometry:{radius:5, widthSegments:32, heightSegments:32},\r\n\r\n        BoxGeometry:{\r\n\r\n            width:20,\r\n\r\n            height:20,\r\n\r\n            depth:20\r\n\r\n        },\r\n\r\n        CylinderGeometry:{radiusTop:5, radiusBottom:5, height:20, heightSegments:32},\r\n\r\n        TorusGeometry:{radius:10, tube:3, radialSegments:16, tubularSegments:100 }\r\n    }\r\n\r\n}\r\n\r\nclass Three extends Gamestack.Sprite //dependency: THREE.js\r\n{\r\n    constructor(args={})\r\n    {\r\n        super(args); //init as Sprite()\r\n\r\n       if(!THREE) //THREE.js library must be loaded\r\n       {\r\n           return console.error('ThreeJSObject():Library: Three.js is required for this object.');\r\n\r\n       }\r\n\r\n        this.scene =  new THREE.Scene();\r\n\r\n       if(args.geometry instanceof String && THREE[args.geometry])\r\n       {\r\n           this.geometry = new THREE[args.geometry]();\r\n       }\r\n       else {\r\n\r\n           this.geometry = args.geometry || new THREE.TorusGeometry(50, 10, 16, 100);\r\n       }\r\n\r\n        this.scene.add( new THREE.AmbientLight( 0xffffff, 1.0  ) );\r\n\r\n\r\n        this.renderer = Gamestack.renderer || new THREE.WebGLRenderer({\r\n                preserveDrawingBuffer: true,\r\n                alpha:true\r\n            });\r\n\r\n        this.renderer.setSize(1000, 1000);\r\n\r\n        this.camera = new THREE.PerspectiveCamera(70, 1, 1, 1000);\r\n\r\n        this.camera.position.z = 1000 / 8;\r\n\r\n        var __inst = this;\r\n\r\n        var src = args.src || \"../assets/game/image/tiles/perlin_3.png\";\r\n\r\n        __inst.loader = new THREE.TextureLoader();\r\n\r\n        __inst.loader.load( src, function ( texture ) {\r\n\r\n            __inst.material = args.material || new THREE.MeshPhongMaterial({\r\n                    map: texture\r\n                });\r\n\r\n            if(!__inst.__init) {\r\n\r\n                __inst.mesh = new THREE.Mesh(__inst.geometry, __inst.material);\r\n\r\n                __inst.scene.add(__inst.mesh);\r\n\r\n                __inst.__init = true;\r\n\r\n            }\r\n\r\n            //__inst.mesh.size.set(__inst.size);\r\n\r\n            __inst.renderer.render(__inst.scene, __inst.camera);\r\n\r\n            __ServerSideFile.file_upload('test.png', __inst.renderer.domElement.toDataURL('image/png'), function(relpath, content){\r\n\r\n                relpath = relpath.replace('client/', '../');\r\n\r\n                __inst.selected_animation = new Animation({src:relpath, frameSize:new Vector(1000, 1000), frameBounds:new VectorFrameBounds(new Vector(0, 0, 0), new Vector(0, 0, 0),new Vector(0, 0, 0))}).singleFrame();\r\n\r\n                __inst.selected_animation.image.domElement.onload = function()\r\n                {\r\n\r\n                    __inst.setSize(new Vector(__inst.selected_animation.image.domElement.width, __inst.selected_animation.image.domElement.height));\r\n\r\n                    __inst.selected_animation.animate();\r\n\r\n\r\n                    console.log(jstr(__inst.selected_animation.frames));\r\n\r\n                };\r\n\r\n            });\r\n\r\n\r\n\r\n        } );\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    three_update()\r\n    {\r\n        console.log('THREE --GS-Object UPDATE');\r\n\r\n        this.mesh.rotation.y += 0.05;\r\n\r\n        this.renderer.clear();\r\n\r\n        this.renderer.setSize(this.size.x, this.size.y);\r\n\r\n        var pixels = new Uint8Array(this.size.x * this.size.y * 4);\r\n\r\n        this.renderer.render(this.scene, this.camera);\r\n\r\n        var gl = this.renderer.getContext();\r\n\r\n        gl.readPixels( 0, 0, this.size.x, this.size.y, gl.RGBA, gl.UNSIGNED_BYTE, pixels );\r\n\r\n        this.selected_animation.selected_frame = {image:{}};\r\n\r\n        this.selected_animation.selected_frame.image.data = new ImageData(new Uint8ClampedArray(pixels), this.size.x, this.size.y);\r\n\r\n    }\r\n    applyAnimativeState()\r\n    {\r\n\r\n\r\n    }\r\n};if (typeof JSON.decycle !== 'function') {\n    JSON.decycle = function decycle(object) {\n        \"use strict\";\n\n        var objects = [],   // Keep a reference to each unique object or array\n            paths = [];     // Keep the path to each unique object or array\n\n        return (function derez(value, path) {\n\n\n            var i,          // The loop counter\n                name,       // Property name\n                nu;         // The new object or array\n\n            switch (typeof value) {\n            case 'object':\n\n                if (!value) {\n                    return null;\n                }\n\n\n                for (i = 0; i < objects.length; i += 1) {\n                    if (objects[i] === value) {\n                        return {$ref: paths[i]};\n                    }\n                }\n\n// Otherwise, accumulate the unique value and its path.\n\n                objects.push(value);\n                paths.push(path);\n\n// If it is an array, replicate the array.\n\n                if (Object.prototype.toString.apply(value) === '[object Array]') {\n                    nu = [];\n                    for (i = 0; i < value.length; i += 1) {\n                        nu[i] = derez(value[i], path + '[' + i + ']');\n                    }\n                } else {\n\n// If it is an object, replicate the object.\n\n                    nu = {};\n                    for (name in value) {\n                        if (Object.prototype.hasOwnProperty.call(value, name)) {\n                            nu[name] = derez(value[name],\n                                path + '[' + JSON.stringify(name) + ']');\n                        }\n                    }\n                }\n                return nu;\n            case 'number':\n            case 'string':\n            case 'boolean':\n                return value;\n            }\n        }(object, '$'));\n    };\n}\n\nif (typeof JSON.retrocycle !== 'function') {\n    JSON.retrocycle = function retrocycle($) {\n        \"use strict\";\n\n        var px =\n            /^\\$(?:\\[(?:\\d?|\\\"(?:[^\\\\\\\"\\u0000-\\u001f]|\\\\([\\\\\\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*\\\")\\])*$/;\n\n        (function rez(value) {\n\n            var i, item, name, path;\n\n            if (value && typeof value === 'object') {\n                if (Object.prototype.toString.apply(value) === '[object Array]') {\n                    for (i = 0; i < value.length; i += 1) {\n                        item = value[i];\n                        if (item && typeof item === 'object') {\n                            path = item.$ref;\n                            if (typeof path === 'string' && px.test(path)) {\n                                value[i] = eval(path);\n                            } else {\n                                rez(item);\n                            }\n                        }\n                    }\n                } else {\n                    for (name in value) {\n                        if (typeof value[name] === 'object') {\n                            item = value[name];\n                            if (item) {\n                                path = item.$ref;\n                                if (typeof path === 'string' && px.test(path)) {\n                                    value[name] = eval(path);\n                                } else {\n                                    rez(item);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }($));\n        return $;\n    };\n}\n\n\n\n;/*!\n * Proton v2.2.1\n * https://github.com/a-jie/Proton\n *\n * Copyright 2011-2017, A-JIE\n * Licensed under the MIT license\n * http://www.opensource.org/licenses/mit-license\n *\n */\n(function (root, factory) {\n    if (typeof window === 'object') {\n\n        window.Proton = factory();\n\n    }\n}(this, function () {\n\n\n    //the max particle number in pool\n    Proton.POOL_MAX = 1000;\n    Proton.TIME_STEP = 60;\n    Proton.USE_CLOCK = false;\n    \n    //1:100\n    Proton.MEASURE = 100;\n    Proton.EULER = 'euler';\n    Proton.RK2 = 'runge-kutta2';\n    Proton.VERLET = 'verlet';\n\n    Proton.PARTICLE_CREATED = 'partilcleCreated';\n    Proton.PARTICLE_UPDATE = 'partilcleUpdate';\n    Proton.PARTICLE_SLEEP = 'particleSleep';\n    Proton.PARTICLE_DEAD = 'partilcleDead';\n    Proton.PROTON_UPDATE = 'protonUpdate';\n    Proton.PROTON_UPDATE_AFTER = 'protonUpdateAfter';\n    Proton.EMITTER_ADDED = 'emitterAdded';\n    Proton.EMITTER_REMOVED = 'emitterRemoved';\n\n    Proton.amendChangeTabsBug = true;\n    Proton.TextureBuffer = {};\n    Proton.TextureCanvasBuffer = {};\n\n    /**\n     * The constructor to add emitters\n     *\n     * @constructor Proton\n     *\n     * @todo proParticleCount is not in use\n     * @todo add more documentation of the single properties and parameters\n     *\n     * @param {Number} [proParticleCount] not in use?\n     * @param {Number} [integrationType=Proton.EULER]\n     *\n     * @property {String} [integrationType=Proton.EULER]\n     * @property {Array} emitters   All added emitter\n     * @property {Array} renderers  All added renderer\n     * @property {Number} time      The active time\n     * @property {Number} oldtime   The old time\n     */\n    function Proton(proParticleCount, integrationType) {\n        this.integrationType = Proton.Util.initValue(integrationType, Proton.EULER);\n        this.emitters = [];\n        this.renderers = [];\n        this.time = 0;\n        this.oldTime = 0;\n\n        Proton.pool = new Proton.Pool(100);\n        Proton.integrator = new Proton.NumericalIntegration(this.integrationType);\n    }\n\n\n    Proton.prototype = {\n        /**\n         * add a type of Renderer\n         *\n         * @method addRender\n         * @memberof Proton\n         * @instance\n         *\n         * @param {Renderer} render\n         */\n        addRender: function(render) {\n            render.proton = this;\n            this.renderers.push(render.proton);\n        },\n\n        /**\n         * add the Emitter\n         *\n         * @method addEmitter\n         * @memberof Proton\n         * @instance\n         *\n         * @param {Emitter} emitter\n         */\n        addEmitter: function(emitter) {\n            this.emitters.push(emitter);\n            emitter.parent = this;\n\n            this.dispatchEvent(Proton.EMITTER_ADDED, emitter);\n        },\n\n        /**\n         * Removes an Emitter\n         *\n         * @method removeEmitter\n         * @memberof Proton\n         * @instance\n         *\n         * @param {Proton.Emitter} emitter\n         */\n        removeEmitter: function(emitter) {\n            var index = this.emitters.indexOf(emitter);\n            this.emitters.splice(index, 1);\n            emitter.parent = null;\n\n            this.dispatchEvent(Proton.EMITTER_REMOVED, emitter);\n        },\n\n        /**\n         * Updates all added emitters\n         *\n         * @method update\n         * @memberof Proton\n         * @instance\n         */\n        update: function() {\n            this.dispatchEvent(Proton.PROTON_UPDATE);\n\n            if (Proton.USE_CLOCK) {\n                if (!this.oldTime)\n                    this.oldTime = new Date().getTime();\n\n                var time = new Date().getTime();\n                this.elapsed = (time - this.oldTime) / 1000;\n                if (Proton.amendChangeTabsBug)\n                    this.amendChangeTabsBug();\n                this.oldTime = time;\n            } else {\n                this.elapsed = 0.0167;\n            }\n\n            if (this.elapsed > 0) {\n                for (var i = 0; i < this.emitters.length; i++) {\n                    this.emitters[i].update(this.elapsed);\n                }\n            }\n\n            this.dispatchEvent(Proton.PROTON_UPDATE_AFTER);\n        },\n\n        /**\n         * @todo add description\n         *\n         * @method amendChangeTabsBug\n         * @memberof Proton\n         * @instance\n         */\n        amendChangeTabsBug: function() {\n            if (this.elapsed > .5) {\n                this.oldTime = new Date().getTime();\n                this.elapsed = 0;\n            }\n        },\n\n        /**\n         * Counts all particles from all emitters\n         *\n         * @method getCount\n         * @memberof Proton\n         * @instance\n         */\n        getCount: function() {\n            var total = 0;\n            var length = this.emitters.length;\n            for (var i = 0; i < length; i++) {\n                total += this.emitters[i].particles.length;\n            }\n            return total;\n        },\n\n        /**\n         * Destroys everything related to this Proton instance. This includes all emitters, and all properties\n         *\n         * @method destroy\n         * @memberof Proton\n         * @instance\n         */\n        destroy: function() {\n            var length = this.emitters.length;\n            for (var i = 0; i < length; i++) {\n                this.emitters[i].destroy();\n                delete this.emitters[i];\n            }\n\n            this.emitters = [];\n            this.time = 0;\n            this.oldTime = 0;\n            Proton.pool.release();\n        }\n    };\n\n    \n\n\n/*\n * EventDispatcher\n * Visit http://createjs.com/ for documentation, updates and examples.\n *\n **/\n\n\n    function EventDispatcher() {\n        this.initialize();\n    };\n\n    EventDispatcher.initialize = function(target) {\n        target.addEventListener = p.addEventListener;\n        target.removeEventListener = p.removeEventListener;\n        target.removeAllEventListeners = p.removeAllEventListeners;\n        target.hasEventListener = p.hasEventListener;\n        target.dispatchEvent = p.dispatchEvent;\n    };\n\n    var p = EventDispatcher.prototype;\n\n    p._listeners = null;\n\n    p.initialize = function() {};\n    p.addEventListener = function(type, listener) {\n        if (!this._listeners) {\n            this._listeners = {};\n        } else {\n            this.removeEventListener(type, listener);\n        }\n\n        if (!this._listeners[type]) this._listeners[type] = []\n        this._listeners[type].push(listener);\n\n        return listener;\n    };\n\n    p.removeEventListener = function(type, listener) {\n        if (!this._listeners) return;\n        if (!this._listeners[type]) return;\n\n        var arr = this._listeners[type];\n        for (var i = 0, l = arr.length; i < l; i++) {\n            if (arr[i] == listener) {\n                if (l == 1) {\n                    delete(this._listeners[type]);\n                }\n                // allows for faster checks.\n                else {\n                    arr.splice(i, 1);\n                }\n                break;\n            }\n        }\n    };\n\n    p.removeAllEventListeners = function(type) {\n        if (!type)\n            this._listeners = null;\n        else if (this._listeners)\n            delete(this._listeners[type]);\n    };\n\n    p.dispatchEvent = function(eventName, eventTarget) {\n        var ret = false,\n            listeners = this._listeners;\n\n        if (eventName && listeners) {\n            var arr = listeners[eventName];\n            if (!arr) return ret;\n\n            arr = arr.slice();\n            // to avoid issues with items being removed or added during the dispatch\n\n            var handler, i = arr.length;\n            while (i--) {\n                var handler = arr[i];\n                ret = ret || handler(eventTarget);\n            }\n            \n        }\n\n        return !!ret;\n    };\n\n    p.hasEventListener = function(type) {\n        var listeners = this._listeners;\n        return !!(listeners && listeners[type]);\n    };\n\n    EventDispatcher.initialize(Proton.prototype);\n    Proton.EventDispatcher = EventDispatcher;\n\n\n\n\n    /**\n     * @namespace\n     * @memberof! Proton#\n     * @alias Proton.Util\n     */\n    var Util = Util || {\n\n        /**\n         * Returns the default if the value is null or undefined\n         *\n         * @memberof Proton#Proton.Util\n         * @method initValue\n         *\n         * @param {Mixed} value a specific value, could be everything but null or undefined\n         * @param {Mixed} defaults the default if the value is null or undefined\n         */\n        initValue: function(value, defaults) {\n            var value = (value != null && value != undefined) ? value : defaults;\n            return value;\n        },\n\n        /**\n         * Checks if the value is a valid array\n         *\n         * @memberof Proton#Proton.Util\n         * @method isArray\n         *\n         * @param {Array} value Any array\n         *\n         * @returns {Boolean} \n         */\n        isArray: function(value) {\n            return typeof value === 'object' && value.hasOwnProperty('length');\n        },\n\n        /**\n         * Destroyes the given array\n         *\n         * @memberof Proton#Proton.Util\n         * @method destroyArray\n         *\n         * @param {Array} array Any array\n         */\n        destroyArray: function(array) {\n            array.length = 0;\n        },\n\n        /**\n         * Destroyes the given object\n         *\n         * @memberof Proton#Proton.Util\n         * @method destroyObject\n         *\n         * @param {Object} obj Any object\n         */\n        destroyObject: function(obj) {\n            for (var o in obj)\n                delete obj[o];\n        },\n\n        /**\n         * Returns the Vector2D - or creates a new one\n         *\n         * @memberof Proton#Proton.Util\n         * @method getVector2D\n         *\n         * @param {Proton.Vector2D | Number} postionOrX\n         * @param {Number} [y] just valid if 'postionOrX' is not an object\n         *\n         * @return {Proton.Vector2D}\n         */\n        getVector2D: function(postionOrX, y) {\n            if (typeof(postionOrX) == 'object') {\n                return postionOrX;\n            } else {\n                var vector2d = new Proton.Vector2D(postionOrX, y);\n                return vector2d;\n            }\n        },\n\n        /**\n         * Makes an instance of a class and binds the given array\n         *\n         * @memberof Proton#Proton.Util\n         * @method classApply\n         *\n         * @param {Function} constructor A class to make an instance from\n         * @param {Array} [argArray] Any array to bind it to the constructor\n         *\n         * @return {Object} The instance of constructor, optionally bind with argArray\n         */\n        classApply: function(constructor, argArray) {\n            if (!argArray) return new constructor;\n\n            var args = [null].concat(argArray);\n            var factoryFunction = constructor.bind.apply(constructor, args);\n            return new factoryFunction();\n        },\n\n        /**\n         * @memberof Proton#Proton.Util\n         * @method judgeVector2D\n         *\n         * @todo add description for param `pOBJ`\n         * @todo add description for function\n         *\n         * @param {Object} pOBJ\n         *\n         * @return {String} result\n         */\n        judgeVector2D: function(pOBJ) {\n            var result = '';\n            if (pOBJ.hasOwnProperty('x') || pOBJ.hasOwnProperty('y') || pOBJ.hasOwnProperty('p') || pOBJ.hasOwnProperty('position'))\n                result += 'p';\n            if (pOBJ.hasOwnProperty('vx') || pOBJ.hasOwnProperty('vx') || pOBJ.hasOwnProperty('v') || pOBJ.hasOwnProperty('velocity'))\n                result += 'v';\n            if (pOBJ.hasOwnProperty('ax') || pOBJ.hasOwnProperty('ax') || pOBJ.hasOwnProperty('a') || pOBJ.hasOwnProperty('accelerate'))\n                result += 'a';\n\n            return result;\n        },\n\n        /**\n         * @memberof Proton#Proton.Util\n         * @method setVector2DByObject\n         *\n         * @todo add description for param `target`\n         * @todo add description for param `pOBJ`\n         * @todo add description for function\n         *\n         * @param {Object} target\n         * @param {Object} pOBJ\n         */\n        setVector2DByObject: function(target, pOBJ) {\n            if (pOBJ.hasOwnProperty('x'))\n                target.p.x = pOBJ['x'];\n\n            if (pOBJ.hasOwnProperty('y'))\n                target.p.y = pOBJ['y'];\n\n            if (pOBJ.hasOwnProperty('vx'))\n                target.v.x = pOBJ['vx'];\n\n            if (pOBJ.hasOwnProperty('vy'))\n                target.v.y = pOBJ['vy'];\n\n            if (pOBJ.hasOwnProperty('ax'))\n                target.a.x = pOBJ['ax'];\n\n            if (pOBJ.hasOwnProperty('ay'))\n                target.a.y = pOBJ['ay'];\n\n            if (pOBJ.hasOwnProperty('p'))\n                particle.p.copy(pOBJ['p']);\n\n            if (pOBJ.hasOwnProperty('v'))\n                particle.v.copy(pOBJ['v']);\n\n            if (pOBJ.hasOwnProperty('a'))\n                particle.a.copy(pOBJ['a']);\n\n            if (pOBJ.hasOwnProperty('position'))\n                particle.p.copy(pOBJ['position']);\n\n            if (pOBJ.hasOwnProperty('velocity'))\n                particle.v.copy(pOBJ['velocity']);\n\n            if (pOBJ.hasOwnProperty('accelerate'))\n                particle.a.copy(pOBJ['accelerate']);\n        },\n\n        /**\n         * 强行添加属性\n         *\n         * @memberof Proton#Proton.Util\n         * @method addPrototypeByObject\n         *\n         * @todo add description for param `target`\n         * @todo add description for param `filters`\n         * @todo translate desription from chinese to english\n         *\n         * @param {Object} target\n         * @param {Object} prototypeObject An object of single prototypes\n         * @param {Object} filters\n         *\n         * @return {Object} target\n         */\n        addPrototypeByObject: function(target, prototypeObject, filters) {\n            for (var singlePrototype in prototypeObject) {\n                if (filters) {\n                    if (filters.indexOf(singlePrototype) < 0)\n                        target[singlePrototype] = Proton.Util.getSpanValue(prototypeObject[singlePrototype]);\n                } else {\n                    target[singlePrototype] = Proton.Util.getSpanValue(prototypeObject[singlePrototype]);\n                }\n            }\n\n            return target;\n        },\n\n        /**\n         * set the prototype in a given prototypeObject\n         *\n         * @memberof Proton#Proton.Util\n         * @method setPrototypeByObject\n         *\n         * @todo add description for param `target`\n         * @todo add description for param `filters`\n         * @todo translate desription from chinese to english\n         *\n         * @param {Object} target\n         * @param {Object} prototypeObject An object of single prototypes\n         * @param {Object} filters\n         *\n         * @return {Object} target\n         */\n        setPrototypeByObject: function(target, prototypeObject, filters) {\n            for (var singlePrototype in prototypeObject) {\n                if (target.hasOwnProperty(singlePrototype)) {\n                    if (filters) {\n                        if (filters.indexOf(singlePrototype) < 0)\n                            target[singlePrototype] = Proton.Util.getSpanValue(prototypeObject[singlePrototype]);\n                    } else {\n                        target[singlePrototype] = Proton.Util.getSpanValue(prototypeObject[singlePrototype]);\n                    }\n                }\n            }\n\n            return target;\n        },\n\n        /**\n         * Returns a new Proton.Span object\n         *\n         * @memberof Proton#Proton.Util\n         * @method setSpanValue\n         *\n         * @todo a, b and c should be 'Mixed' or 'Number'?\n         *\n         * @param {Mixed | Proton.Span} a\n         * @param {Mixed}               b\n         * @param {Mixed}               c\n         *\n         * @return {Proton.Span}\n         */\n        setSpanValue: function(a, b, c) {\n            if (a instanceof Proton.Span) {\n                return a;\n            } else {\n                if (!b) {\n                    return new Proton.Span(a);\n                } else {\n                    if (!c)\n                        return new Proton.Span(a, b);\n                    else\n                        return new Proton.Span(a, b, c);\n                }\n            }\n        },\n\n        /**\n         * Returns the value from a Proton.Span, if the param is not a Proton.Span it will return the given parameter\n         *\n         * @memberof Proton#Proton.Util\n         * @method getSpanValue\n         *\n         * @param {Mixed | Proton.Span} pan\n         *\n         * @return {Mixed} the value of Proton.Span OR the parameter if it is not a Proton.Span\n         */\n        getSpanValue: function(pan) {\n            if (pan instanceof Proton.Span)\n                return pan.getValue();\n            else\n                return pan;\n        },\n\n        /**\n         * Inherits any class from the superclass. Acts like 'extends' in Java\n         *\n         * @memberof Proton#Proton.Util\n         * @method inherits\n         *\n         * @param {Object} subClass     the child class\n         * @param {Object} superClass   the parent/super class\n         */\n        inherits: function(subClass, superClass) {\n            subClass._super_ = superClass;\n            if (Object['create']) {\n                //console.log(subClass,superClass);\n                subClass.prototype = Object.create(superClass.prototype, {\n                    constructor: {\n                        value: subClass\n                    }\n                });\n            } else {\n                var F = function() {};\n                F.prototype = superClass.prototype;\n                subClass.prototype = new F();\n                subClass.prototype.constructor = subClass;\n            }\n        },\n\n        /**\n         * This will get the image data. It could be necessary to create a Proton.Zone.\n         *\n         * @memberof Proton#Proton.Util\n         * @method getImageData\n         *\n         * @param {HTMLCanvasElement}   context any canvas, must be a 2dContext 'canvas.getContext('2d')'\n         * @param {Object}              image   could be any dom image, e.g. document.getElementById('thisIsAnImgTag');\n         * @param {Proton.Rectangle}    rect\n         */\n        getImageData: function(context, image, rect) {\n            context.drawImage(image, rect.x, rect.y);\n            var imagedata = context.getImageData(rect.x, rect.y, rect.width, rect.height);\n          //  context.clearRect(rect.x, rect.y, rect.width, rect.height);\n            return imagedata;\n        },\n\n        /**\n         * @memberof Proton#Proton.Util\n         * @method getImage\n         *\n         * @todo add description\n         * @todo describe fun\n         *\n         * @param {Mixed}               img\n         * @param {Proton.Particle}     particle\n         * @param {Boolean}             drawCanvas  set to true if a canvas should be saved into particle.transform.canvas\n         * @param {Boolean}             fun\n         */\n        getImage: function(img, particle, drawCanvas, fun) {\n            if (typeof(img) == 'string') {\n                this.loadAndSetImage(img, particle, drawCanvas, fun);\n            } else if (typeof(img) == 'object') {\n                this.loadAndSetImage(img.src, particle, drawCanvas, fun);\n            } else if (img instanceof Image) {\n                this.loadedImage(img.src, particle, drawCanvas, fun, img);\n            }\n        },\n\n        /**\n         * @memberof Proton#Proton.Util\n         * @method loadedImage\n         *\n         * @todo add description\n         * @todo describe fun\n         * @todo describe target\n         *\n         * @param {String}              src         the src of an img-tag\n         * @param {Proton.Particle}     particle\n         * @param {Boolean}             drawCanvas  set to true if a canvas should be saved into particle.transform.canvas\n         * @param {Boolean}             fun\n         * @param {Object}              target\n         */\n        loadedImage: function(src, particle, drawCanvas, fun, target) {\n            particle.target = target;\n            particle.transform.src = src;\n            if (!Proton.TextureBuffer[src])\n                Proton.TextureBuffer[src] = particle.target;\n            if (drawCanvas) {\n                if (Proton.TextureCanvasBuffer[src]) {\n                    particle.transform.canvas = Proton.TextureCanvasBuffer[src];\n                } else {\n                    var _width = Proton.WebGLUtil.nhpot(particle.target.width);\n                    var _height = Proton.WebGLUtil.nhpot(particle.target.height);\n                    particle.transform.canvas = Proton.DomUtil.createCanvas('canvas' + src, _width, _height);\n                    var context = particle.transform.canvas.getContext('2d');\n                    context.drawImage(particle.target, 0, 0, particle.target.width, particle.target.height);\n                    Proton.TextureCanvasBuffer[src] = particle.transform.canvas;\n                }\n            }\n            if (fun)\n                fun(particle);\n        },\n\n        /**\n         * @memberof Proton#Proton.Util\n         * @method loadAndSetImage\n         *\n         * @todo add description\n         * @todo describe fun\n         *\n         * @param {String}              src         the src of an img-tag\n         * @param {Proton.Particle}     particle\n         * @param {Boolean}             drawCanvas  set to true if a canvas should be saved into particle.transform.canvas\n         * @param {Boolean}             fun\n         */\n        loadAndSetImage: function(src, particle, drawCanvas, fun) {\n            if (Proton.TextureBuffer[src]) {\n                this.loadedImage(src, particle, drawCanvas, fun, Proton.TextureBuffer[src]);\n            } else {\n                var self = this;\n                var myImage = new Image();\n                myImage.onload = function(e) {\n                    self.loadedImage(src, particle, drawCanvas, fun, e.target);\n                }\n                myImage.src = src;\n            }\n        },\n\n        /**\n         * @typedef  {Object} rgbObject\n         * @property {Number} r red value\n         * @property {Number} g green value\n         * @property {Number} b blue value\n         */\n        /**\n         * converts a hex value to a rgb object\n         *\n         * @memberof Proton#Proton.Util\n         * @method hexToRGB\n         *\n         * @param {String} h any hex value, e.g. #000000 or 000000 for black\n         *\n         * @return {rgbObject}\n         */\n        hexToRGB: function(h) {\n            var hex16 = (h.charAt(0) == \"#\") ? h.substring(1, 7) : h;\n            var r = parseInt(hex16.substring(0, 2), 16);\n            var g = parseInt(hex16.substring(2, 4), 16);\n            var b = parseInt(hex16.substring(4, 6), 16);\n\n            return {\n                r: r,\n                g: g,\n                b: b\n            }\n        },\n\n        /**\n         * converts a rgb value to a rgb string\n         *\n         * @memberof Proton#Proton.Util\n         * @method rgbToHex\n         *\n         * @param {Object | Proton.hexToRGB} rgb a rgb object like in {@link Proton#Proton.Util.hexToRGB}\n         *\n         * @return {String} rgb()\n         */\n        rgbToHex: function(rbg) {\n            return 'rgb(' + rbg.r + ', ' + rbg.g + ', ' + rbg.b + ')';\n        }\n    };\n\n    Proton.Util = Util;\n\n\n\n///bind\nif (!Function.prototype.bind) {\n    Function.prototype.bind = function(oThis) {\n        if (typeof this !== \"function\") {\n            // closest thing possible to the ECMAScript 5\n            // internal IsCallable function\n            throw new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\");\n        }\n\n        var aArgs = Array.prototype.slice.call(arguments, 1),\n            fToBind = this,\n            fNOP = function() {},\n            fBound = function() {\n                return fToBind.apply(this instanceof fNOP ? this : oThis || this,\n                    aArgs.concat(Array.prototype.slice.call(arguments)));\n            };\n\n        fNOP.prototype = this.prototype;\n        fBound.prototype = new fNOP();\n\n        return fBound;\n    };\n}\n\n\n\n\t/**\n     * @namespace\n     * @memberof! Proton#\n     * @alias Proton.WebGLUtil\n     */\n\tvar WebGLUtil = WebGLUtil || {\n\n\t\t/**\n         * @memberof Proton#Proton.WebGLUtil\n         * @method ipot\n         *\n         * @todo add description\n         * @todo add length description\n         *\n         * @param {Number} length\n         *\n         * @return {Boolean}\n         */\n\t\tipot : function(length) {\n\t\t\treturn (length & (length - 1)) == 0;\n\t\t},\n\n\t\t/**\n         * @memberof Proton#Proton.WebGLUtil\n         * @method nhpot\n         *\n         * @todo add description\n         * @todo add length description\n         *\n         * @param {Number} length\n         *\n         * @return {Number}\n         */\n\t\tnhpot : function(length) {--length;\n\t\t\tfor (var i = 1; i < 32; i <<= 1) {\n\t\t\t\tlength = length | length >> i;\n\t\t\t}\n\t\t\treturn length + 1;\n\t\t},\n\n\t\t/**\n         * @memberof Proton#Proton.WebGLUtil\n         * @method makeTranslation\n         *\n         * @todo add description\n         * @todo add tx, ty description\n         * @todo add return description\n         *\n         * @param {Number} tx either 0 or 1\n         * @param {Number} ty either 0 or 1\n         *\n         * @return {Object}\n         */\n\t\tmakeTranslation : function(tx, ty) {\n\t\t\treturn [1, 0, 0, 0, 1, 0, tx, ty, 1];\n\t\t},\n\n\t\t/**\n         * @memberof Proton#Proton.WebGLUtil\n         * @method makeRotation\n         *\n         * @todo add description\n         * @todo add return description\n         *\n         * @param {Number} angleInRadians\n         *\n         * @return {Object}\n         */\n\t\tmakeRotation : function(angleInRadians) {\n\t\t\tvar c = Math.cos(angleInRadians);\n\t\t\tvar s = Math.sin(angleInRadians);\n\t\t\treturn [c, -s, 0, s, c, 0, 0, 0, 1];\n\t\t},\n\n\t\t/**\n         * @memberof Proton#Proton.WebGLUtil\n         * @method makeScale\n         *\n         * @todo add description\n         * @todo add tx, ty description\n         * @todo add return description\n         *\n         * @param {Number} sx either 0 or 1\n         * @param {Number} sy either 0 or 1\n         *\n         * @return {Object}\n         */\n\t\tmakeScale : function(sx, sy) {\n\t\t\treturn [sx, 0, 0, 0, sy, 0, 0, 0, 1];\n\t\t},\n\n\t\t/**\n         * @memberof Proton#Proton.WebGLUtil\n         * @method matrixMultiply\n         *\n         * @todo add description\n         * @todo add a, b description\n         * @todo add return description\n         *\n         * @param {Object} a\n         * @param {Object} b\n         *\n         * @return {Object}\n         */\n\t\tmatrixMultiply : function(a, b) {\n\t\t\tvar a00 = a[0 * 3 + 0];\n\t\t\tvar a01 = a[0 * 3 + 1];\n\t\t\tvar a02 = a[0 * 3 + 2];\n\t\t\tvar a10 = a[1 * 3 + 0];\n\t\t\tvar a11 = a[1 * 3 + 1];\n\t\t\tvar a12 = a[1 * 3 + 2];\n\t\t\tvar a20 = a[2 * 3 + 0];\n\t\t\tvar a21 = a[2 * 3 + 1];\n\t\t\tvar a22 = a[2 * 3 + 2];\n\t\t\tvar b00 = b[0 * 3 + 0];\n\t\t\tvar b01 = b[0 * 3 + 1];\n\t\t\tvar b02 = b[0 * 3 + 2];\n\t\t\tvar b10 = b[1 * 3 + 0];\n\t\t\tvar b11 = b[1 * 3 + 1];\n\t\t\tvar b12 = b[1 * 3 + 2];\n\t\t\tvar b20 = b[2 * 3 + 0];\n\t\t\tvar b21 = b[2 * 3 + 1];\n\t\t\tvar b22 = b[2 * 3 + 2];\n\t\t\treturn [a00 * b00 + a01 * b10 + a02 * b20, a00 * b01 + a01 * b11 + a02 * b21, a00 * b02 + a01 * b12 + a02 * b22, a10 * b00 + a11 * b10 + a12 * b20, a10 * b01 + a11 * b11 + a12 * b21, a10 * b02 + a11 * b12 + a12 * b22, a20 * b00 + a21 * b10 + a22 * b20, a20 * b01 + a21 * b11 + a22 * b21, a20 * b02 + a21 * b12 + a22 * b22];\n\t\t}\n\t}\n\n\tProton.WebGLUtil = WebGLUtil;\n\n\n\n\n\t/**\n     * @namespace\n     * @memberof! Proton#\n     * @alias Proton.DomUtil\n     */\n\tvar DomUtil = DomUtil || {\n\n\t\t/**\n         * Creates and returns a new canvas. The opacity is by default set to 0\n         *\n         * @memberof Proton#Proton.DomUtil\n         * @method createCanvas\n         *\n         * @param {String} $id the canvas' id\n         * @param {Number} $width the canvas' width\n         * @param {Number} $height the canvas' height\n         * @param {String} [$position=absolute] the canvas' position, default is 'absolute' \n         *\n         * @return {Object}\n         */\n\t\tcreateCanvas : function($id, $width, $height, $position) {\n\t\t\tvar element = document.createElement(\"canvas\");\n\t\t\tvar position = $position ? $position : 'absolute';\n\t\t\telement.id = $id;\n\t\t\telement.width = $width;\n\t\t\telement.height = $height;\n\t\t\telement.style.position = position;\n\t\t\telement.style.opacity = 0;\n\t\t\tthis.transformDom(element, -500, -500, 0, 0);\n\t\t\treturn element;\n\t\t},\n\n\t\t/**\n         * Adds a transform: translate(), scale(), rotate() to a given div element for all browsers\n         *\n         * @memberof Proton#Proton.DomUtil\n         * @method transformDom\n         *\n         * @param {HTMLDivElement} $div \n         * @param {Number} $x \n         * @param {Number} $y \n         * @param {Number} $scale \n         * @param {Number} $rotate \n         */\n\t\ttransformDom : function($div, $x, $y, $scale, $rotate) {\n\t\t\t$div.style.WebkitTransform = 'translate(' + $x + 'px, ' + $y + 'px) ' + 'scale(' + $scale + ') ' + 'rotate(' + $rotate + 'deg)';\n\t\t\t$div.style.MozTransform = 'translate(' + $x + 'px, ' + $y + 'px) ' + 'scale(' + $scale + ') ' + 'rotate(' + $rotate + 'deg)';\n\t\t\t$div.style.OTransform = 'translate(' + $x + 'px, ' + $y + 'px) ' + 'scale(' + $scale + ') ' + 'rotate(' + $rotate + 'deg)';\n\t\t\t$div.style.msTransform = 'translate(' + $x + 'px, ' + $y + 'px) ' + 'scale(' + $scale + ') ' + 'rotate(' + $rotate + 'deg)';\n\t\t\t$div.style.transform = 'translate(' + $x + 'px, ' + $y + 'px) ' + 'scale(' + $scale + ') ' + 'rotate(' + $rotate + 'deg)';\n\t\t}\n\t}\n\n\tProton.DomUtil = DomUtil;\n\n\n\n\tfunction MStack() {\n\t\tthis.mats = [];\n\t\tthis.size = 0;\n\t\tfor (var i = 0; i < 20; i++)\n\t\t\tthis.mats.push(Proton.Mat3.create([0, 0, 0, 0, 0, 0, 0, 0, 0]));\n\t}\n\n\n\tMStack.prototype.set = function(m, i) {\n\t\tif (i == 0)\n\t\t\tProton.Mat3.set(m, this.mats[0]);\n\t\telse\n\t\t\tProton.Mat3.multiply(this.mats[i - 1], m, this.mats[i]);\n\t\tthis.size = Math.max(this.size, i + 1);\n\t}\n\n\tMStack.prototype.push = function(m) {\n\t\tif (this.size == 0)\n\t\t\tProton.Mat3.set(m, this.mats[0]);\n\t\telse\n\t\t\tProton.Mat3.multiply(this.mats[this.size - 1], m, this.mats[this.size]);\n\t\tthis.size++;\n\t}\n\n\tMStack.prototype.pop = function() {\n\t\tif (this.size > 0)\n\t\t\tthis.size--;\n\t}\n\n\tMStack.prototype.top = function() {\n\t\treturn (this.mats[this.size - 1]);\n\t}\n\n\tProton.MStack = MStack;\n\n\n\n\n\tParticle.ID = 0;\n\t/**\n\t * the Particle class\n\t *\n\t * @class Proton.Particle\n\t * @constructor\n\t * @param {Object} pObj the parameters object;\n\t * for example {life:3,dead:false}\n\t */\n\tfunction Particle(pOBJ) {\n\t\t/**\n\t\t * The particle's id;\n\t\t * @property id\n\t\t * @type {string}\n\t\t */\n\t\tthis.id = 'particle_' + Particle.ID++;\n\t\tthis.reset(true);\n\t\tProton.Util.setPrototypeByObject(this, pOBJ);\n\t}\n\n\n\tParticle.prototype = {\n\t\tgetDirection : function() {\n\t\t\treturn Math.atan2(this.v.x, -this.v.y) * (180 / Math.PI);\n\t\t},\n\n\t\treset : function(init) {\n\t\t\tthis.life = Infinity;\n\t\t\tthis.age = 0;\n\n\t\t\t//Energy loss\n\t\t\tthis.energy = 1;\n\t\t\tthis.dead = false;\n\t\t\tthis.sleep = false;\n\t\t\tthis.target = null;\n\t\t\tthis.sprite = null;\n\t\t\tthis.parent = null;\n\t\t\tthis.mass = 1;\n\t\t\tthis.radius = 10;\n\t\t\tthis.alpha = 1;\n\t\t\tthis.scale = 1;\n\t\t\tthis.rotation = 0;\n\t\t\tthis.color = null;\n\t\t\tthis.easing = Proton.ease.setEasingByName(Proton.easeLinear);\n\n\t\t\tif (init) {\n\t\t\t\tthis.transform = {}\n\t\t\t\tthis.p = new Proton.Vector2D();\n\t\t\t\tthis.v = new Proton.Vector2D();\n\t\t\t\tthis.a = new Proton.Vector2D();\n\t\t\t\tthis.old = {\n\t\t\t\t\tp : new Proton.Vector2D(),\n\t\t\t\t\tv : new Proton.Vector2D(),\n\t\t\t\t\ta : new Proton.Vector2D()\n\t\t\t\t};\n\t\t\t\tthis.behaviours = [];\n\t\t\t} else {\n\t\t\t\tProton.Util.destroyObject(this.transform);\n\t\t\t\tthis.p.set(0, 0);\n\t\t\t\tthis.v.set(0, 0);\n\t\t\t\tthis.a.set(0, 0);\n\t\t\t\tthis.old.p.set(0, 0);\n\t\t\t\tthis.old.v.set(0, 0);\n\t\t\t\tthis.old.a.set(0, 0);\n\n\t\t\t\tthis.removeAllBehaviours();\n\t\t\t}\n\n\t\t\tthis.transform.rgb = {\n\t\t\t\tr : 255,\n\t\t\t\tg : 255,\n\t\t\t\tb : 255\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\tupdate : function(time, index) {\n\t\t\tif (!this.sleep) {\n\t\t\t\tthis.age += time;\n\t\t\t\tvar length = this.behaviours.length, i;\n\n\t\t\t\tfor ( i = 0; i < length; i++) {\n\t\t\t\t\tif (this.behaviours[i])\n\t\t\t\t\t\tthis.behaviours[i].applyBehaviour(this, time, index)\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t}\n\n\t\t\tif (this.age >= this.life) {\n\t\t\t\tthis.destroy();\n\t\t\t} else {\n\t\t\t\tvar scale = this.easing(this.age / this.life);\n\t\t\t\tthis.energy = Math.max(1 - scale, 0);\n\t\t\t}\n\n\t\t},\n\n\t\taddBehaviour : function(behaviour) {\n\t\t\tthis.behaviours.push(behaviour);\n\t\t\tif (behaviour.hasOwnProperty('parents'))\n\t\t\t\tbehaviour.parents.push(this);\n\n\t\t\tbehaviour.initialize(this);\n\t\t},\n\n\t\taddBehaviours : function(behaviours) {\n\t\t\tvar length = behaviours.length, i;\n\n\t\t\tfor ( i = 0; i < length; i++) {\n\t\t\t\tthis.addBehaviour(behaviours[i]);\n\t\t\t}\n\t\t},\n\n\t\tremoveBehaviour : function(behaviour) {\n\t\t\tvar index = this.behaviours.indexOf(behaviour);\n\t\t\tif (index > -1) {\n\t\t\t\tvar behaviour = this.behaviours.splice(index, 1);\n\t\t\t\tbehaviour.parents = null;\n\t\t\t}\n\t\t},\n\n\t\tremoveAllBehaviours : function() {\n\t\t\tProton.Util.destroyArray(this.behaviours);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Destory this particle\n\t\t * @method destroy\n\t\t */\n\t\tdestroy : function() {\n\t\t\tthis.removeAllBehaviours();\n\t\t\tthis.energy = 0;\n\t\t\tthis.dead = true;\n\t\t\tthis.parent = null;\n\t\t}\n\t};\n\n\tProton.Particle = Particle;\n\n\n\n\n\t/**\n\t * @memberof! Proton#\n\t * @constructor\n\t * @alias Proton.Pool\n\t *\n\t * @todo add description\n\t * @todo add description of properties\n\t *\n\t * @property {Number} cID\n\t * @property {Object} list\n\t */\n\tfunction Pool() {\n\t\tthis.cID = 0;\n\t\tthis.list = {};\n\t}\n\t\n\tPool.prototype = {\n\n\t\t/**\n\t\t * Creates a new class instance\n\t\t *\n\t\t * @todo add more documentation \n\t\t *\n\t\t * @method create\n\t\t * @memberof Proton#Proton.Pool\n\t\t *\n\t\t * @param {Object|Function} obj any Object or Function\n\t\t * @param {Object} [params] just add if `obj` is a function\n\t\t *\n\t\t * @return {Object}\n\t\t */\n\t\tcreate: function(obj, params) {\n\t\t\tthis.cID++;\n   \n\t\t\tif (typeof obj == \"function\")\n\t\t\t\treturn Proton.Util.classApply(obj, params);\n\t\t\telse\n\t\t\t\treturn obj.clone();\n\t\t},\n\n\t\t/**\n\t\t * @todo add description - what is in the list?\n\t\t *\n\t\t * @method getCount\n\t\t * @memberof Proton#Proton.Pool\n\t\t *\n\t\t * @return {Number}\n\t\t */\n\t\tgetCount: function() {\n\t\t\tvar count = 0;\n\t\t\tfor (var id in this.list)\n\t\t\t\tcount += this.list[id].length;\n\n\t\t\treturn count++;;\n\t\t},\n\n\t\t/**\n\t\t * @todo add description\n\t\t *\n\t\t * @method get\n\t\t * @memberof Proton#Proton.Pool\n\t\t *\n\t\t * @param {Object|Function} obj\n\t\t * @param {Object} [params] just add if `obj` is a function\n\t\t *\n\t\t * @return {Object}\n\t\t */\n\t\tget: function(obj, params) {\n\t\t\tvar p, puid = obj.__puid || PUID.id(obj);\n\t\t\tif (this.list[puid] && this.list[puid].length > 0)\n\t\t\t\tp = this.list[puid].pop();\n\t\t\telse\n\t\t\t\tp = this.create(obj, params);\n\n\t\t\tp.__puid = obj.__puid || puid;\n\t\t\treturn p;\n\t\t},\n\n\t\t/**\n\t\t * @todo add description\n\t\t *\n\t\t * @method set\n\t\t * @memberof Proton#Proton.Pool\n\t\t *\n\t\t * @param {Object} obj\n\t\t *\n\t\t * @return {Object}\n\t\t */\n\t\tset: function(obj) {\n\t\t\treturn this._getList(obj.__puid).push(obj);\n\t\t},\n\n\t\t/**\n\t\t * Destroyes all items from Pool.list\n\t\t *\n\t\t * @method destroy\n\t\t * @memberof Proton#Proton.Pool\n\t\t */\n\t\tdestroy: function() {\n\t\t\tfor (var id in this.list) {\n\t\t\t\tthis.list[id].length = 0;\n\t\t\t\tdelete this.list[id];\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Returns Pool.list\n\t\t *\n\t\t * @method _getList\n\t\t * @memberof Proton#Proton.Pool\n\t\t * @private\n\t\t *\n\t\t * @param {Number} uid the unique id\n\t\t *\n\t\t * @return {Object}\n\t\t */\n\t\t_getList: function(uid) {\n\t\t\tuid = uid || \"default\";\n\t\t\tif (!this.list[uid]) this.list[uid] = [];\n\t\t\treturn this.list[uid];\n\t\t}\n\t}\n\n\tProton.Pool = Pool;\n\n\tvar PUID = {\n\t\t_id: 0,\n\t\t_uids: {},\n\t\tid: function(obj) {\n\t\t\tfor (var id in this._uids) {\n\t\t\t\tif (this._uids[id] == obj) return id;\n\t\t\t}\n\n\t\t\tvar nid = \"PUID_\" + (this._id++);\n\t\t\tthis._uids[nid] = obj;\n\t\t\treturn nid;\n\t\t},\n\n\t\thash: function(str) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\n\n\n\tvar MathUtils = {\n\t\trandomAToB : function(a, b, INT) {\n\t\t\tif (!INT)\n\t\t\t\treturn a + Math.random() * (b - a );\n\t\t\telse\n\t\t\t\treturn Math.floor(Math.random() * (b - a)) + a;\n\t\t},\n\t\trandomFloating : function(center, f, INT) {\n\t\t\treturn MathUtils.randomAToB(center - f, center + f, INT);\n\t\t},\n\t\trandomZone : function(display) {\n\n\t\t},\n\n\t\tdegreeTransform : function(a) {\n\t\t\treturn a * Math.PI / 180;\n\t\t},\n\n\t\ttoColor16 : function getRGB(num) {\n\t\t\treturn \"#\" + num.toString(16);\n\t\t},\n\t\t\n\t\trandomColor : function() {\n\t\t\treturn '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).slice(-6);\n\t\t}\n\t}\n\n\tProton.MathUtils = MathUtils;\n\n\n//数值积分\n\n\tvar NumericalIntegration = function(type) {\n\t\tthis.type = Proton.Util.initValue(type, Proton.EULER);\n\t}\n\n\tNumericalIntegration.prototype = {\n\t\tintegrate : function(particles, time, damping) {\n\t\t\tthis.eulerIntegrate(particles, time, damping);\n\t\t},\n\n\t\teulerIntegrate : function(particle, time, damping) {\n\t\t\tif (!particle.sleep) {\n\t\t\t\tparticle.old.p.copy(particle.p);\n\t\t\t\tparticle.old.v.copy(particle.v);\n\t\t\t\tparticle.a.multiplyScalar(1 / particle.mass);\n\t\t\t\tparticle.v.add(particle.a.multiplyScalar(time));\n\t\t\t\tparticle.p.add(particle.old.v.multiplyScalar(time));\n\t\t\t\tif (damping)\n\t\t\t\t\tparticle.v.multiplyScalar(damping);\n\t\t\t\tparticle.a.clear();\n\t\t\t}\n\t\t}\n\t}\n\n\tProton.NumericalIntegration = NumericalIntegration;\n\n\n//@author mrdoob / http://mrdoob.com/\n\n\tvar Vector2D = function(x, y) {\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\t}\n\n\tVector2D.prototype = {\n\t\tset : function(x, y) {\n\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetX : function(x) {\n\n\t\t\tthis.x = x;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetY : function(y) {\n\n\t\t\tthis.y = y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetGradient : function() {\n\t\t\tif (this.x != 0)\n\t\t\t\treturn Math.atan2(this.y, this.x);\n\t\t\telse if (this.y > 0)\n\t\t\t\treturn Math.PI / 2;\n\t\t\telse if (this.y < 0)\n\t\t\t\treturn -Math.PI / 2;\n\t\t},\n\n\t\tcopy : function(v) {\n\n\t\t\tthis.x = v.x;\n\t\t\tthis.y = v.y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tadd : function(v, w) {\n\n\t\t\tif (w !== undefined) {\n\t\t\t\treturn this.addVectors(v, w);\n\n\t\t\t}\n\n\t\t\tthis.x += v.x;\n\t\t\tthis.y += v.y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddXY : function(a, b) {\n\n\t\t\tthis.x += a;\n\t\t\tthis.y += b;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddVectors : function(a, b) {\n\n\t\t\tthis.x = a.x + b.x;\n\t\t\tthis.y = a.y + b.y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddScalar : function(s) {\n\n\t\t\tthis.x += s;\n\t\t\tthis.y += s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsub : function(v, w) {\n\n\t\t\tif (w !== undefined) {\n\t\t\t\treturn this.subVectors(v, w);\n\n\t\t\t}\n\n\t\t\tthis.x -= v.x;\n\t\t\tthis.y -= v.y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsubVectors : function(a, b) {\n\n\t\t\tthis.x = a.x - b.x;\n\t\t\tthis.y = a.y - b.y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmultiplyScalar : function(s) {\n\n\t\t\tthis.x *= s;\n\t\t\tthis.y *= s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdivideScalar : function(s) {\n\n\t\t\tif (s !== 0) {\n\n\t\t\t\tthis.x /= s;\n\t\t\t\tthis.y /= s;\n\n\t\t\t} else {\n\n\t\t\t\tthis.set(0, 0);\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmin : function(v) {\n\n\t\t\tif (this.x > v.x) {\n\n\t\t\t\tthis.x = v.x;\n\n\t\t\t}\n\n\t\t\tif (this.y > v.y) {\n\n\t\t\t\tthis.y = v.y;\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmax : function(v) {\n\n\t\t\tif (this.x < v.x) {\n\n\t\t\t\tthis.x = v.x;\n\n\t\t\t}\n\n\t\t\tif (this.y < v.y) {\n\n\t\t\t\tthis.y = v.y;\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tnegate : function() {\n\n\t\t\treturn this.multiplyScalar(-1);\n\n\t\t},\n\n\t\tdot : function(v) {\n\n\t\t\treturn this.x * v.x + this.y * v.y;\n\n\t\t},\n\n\t\tlengthSq : function() {\n\n\t\t\treturn this.x * this.x + this.y * this.y;\n\n\t\t},\n\n\t\tlength : function() {\n\n\t\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\n\t\t},\n\n\t\tnormalize : function() {\n\n\t\t\treturn this.divideScalar(this.length());\n\n\t\t},\n\n\t\tdistanceTo : function(v) {\n\n\t\t\treturn Math.sqrt(this.distanceToSquared(v));\n\n\t\t},\n\n\t\trotate : function(tha) {\n\t\t\tvar x = this.x;\n\t\t\tvar y = this.y;\n\t\t\tthis.x = x * Math.cos(tha) + y * Math.sin(tha);\n\t\t\tthis.y = -x * Math.sin(tha) + y * Math.cos(tha);\n\t\t\treturn this;\n\t\t},\n\n\t\tdistanceToSquared : function(v) {\n\n\t\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\t\treturn dx * dx + dy * dy;\n\n\t\t},\n\n\t\tsetLength : function(l) {\n\n\t\t\tvar oldLength = this.length();\n\n\t\t\tif (oldLength !== 0 && l !== oldLength) {\n\n\t\t\t\tthis.multiplyScalar(l / oldLength);\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tlerp : function(v, alpha) {\n\n\t\t\tthis.x += (v.x - this.x ) * alpha;\n\t\t\tthis.y += (v.y - this.y ) * alpha;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tequals : function(v) {\n\n\t\t\treturn ((v.x === this.x ) && (v.y === this.y ) );\n\n\t\t},\n\n\t\ttoArray : function() {\n\n\t\t\treturn [this.x, this.y];\n\n\t\t},\n\n\t\tclear : function() {\n\t\t\tthis.x = 0.0;\n\t\t\tthis.y = 0.0;\n\t\t\treturn this;\n\t\t},\n\n\t\tclone : function() {\n\n\t\t\treturn new Proton.Vector2D(this.x, this.y);\n\n\t\t}\n\t};\n\n\tProton.Vector2D = Vector2D;\n\n\n\n\tvar Polar2D = function(r, tha) {\n\t\tthis.r = Math.abs(r) || 0;\n\t\tthis.tha = tha || 0;\n\t}\n\n\tPolar2D.prototype = {\n\t\tset : function(r, tha) {\n\n\t\t\tthis.r = r;\n\t\t\tthis.tha = tha;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetR : function(r) {\n\n\t\t\tthis.r = r;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetTha : function(tha) {\n\n\t\t\tthis.tha = tha;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcopy : function(p) {\n\n\t\t\tthis.r = p.r;\n\t\t\tthis.tha = p.tha;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttoVector : function() {\n\t\t\treturn new Proton.Vector2D(this.getX(), this.getY());\n\t\t},\n\n\t\tgetX : function() {\n\t\t\treturn this.r * Math.sin(this.tha);\n\t\t},\n\n\t\tgetY : function() {\n\t\t\treturn -this.r * Math.cos(this.tha);\n\t\t},\n\n\t\tnormalize : function() {\n\n\t\t\tthis.r = 1;\n\t\t\treturn this;\n\t\t},\n\n\t\tequals : function(v) {\n\n\t\t\treturn ((v.r === this.r ) && (v.tha === this.tha ) );\n\n\t\t},\n\n\t\ttoArray : function() {\n\n\t\t\treturn [this.r, this.tha];\n\n\t\t},\n\n\t\tclear : function() {\n\t\t\tthis.r = 0.0;\n\t\t\tthis.tha = 0.0;\n\t\t\treturn this;\n\t\t},\n\n\t\tclone : function() {\n\n\t\t\treturn new Proton.Polar2D(this.r, this.tha);\n\n\t\t}\n\t};\n\n\tProton.Polar2D = Polar2D;\n\n\n\n\tfunction Span(a, b, center) {\n\t\tthis.isArray = false;\n\n\t\tif (Proton.Util.isArray(a)) {\n\t\t\tthis.isArray = true;\n\t\t\tthis.a = a;\n\t\t} else {\n\t\t\tthis.a = Proton.Util.initValue(a, 1);\n\t\t\tthis.b = Proton.Util.initValue(b, this.a);\n\t\t\tthis.center = Proton.Util.initValue(center, false);\n\t\t}\n\t}\n\n\n\tSpan.prototype = {\n\t\tgetValue : function(INT) {\n\t\t\tif (this.isArray) {\n\t\t\t\treturn this.a[Math.floor(this.a.length * Math.random())];\n\t\t\t} else {\n\t\t\t\tif (!this.center)\n\t\t\t\t\treturn Proton.MathUtils.randomAToB(this.a, this.b, INT);\n\t\t\t\telse\n\t\t\t\t\treturn Proton.MathUtils.randomFloating(this.a, this.b, INT);\n\t\t\t}\n\t\t}\n\t}\n\n\tProton.Span = Span;\n\tProton.getSpan = function(a, b, center) {\n\t\treturn new Proton.Span(a, b, center);\n\t}\n\n\n\n\tfunction ColorSpan(color) {\n\t\tif (Proton.Util.isArray(color)) {\n\t\t\tthis.colorArr = color;\n\t\t} else {\n\t\t\tthis.colorArr = [color];\n\t\t}\n\t}\n\n\n\tProton.Util.inherits(ColorSpan, Proton.Span);\n\tColorSpan.prototype.getValue = function() {\n\t\tvar color = this.colorArr[Math.floor(this.colorArr.length * Math.random())];\n\t\tif (color == 'random' || color == 'Random')\n\t\t\treturn Proton.MathUtils.randomColor();\n\t\telse\n\t\t\treturn color;\n\t}\n\n\tProton.ColorSpan = ColorSpan;\n\n\n\n\tfunction Rectangle(x, y, w, h) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = w;\n\t\tthis.height = h;\n\t\tthis.bottom = this.y + this.height;\n\t\tthis.right = this.x + this.width;\n\t}\n\n\n\tRectangle.prototype = {\n\t\tcontains : function(x, y) {\n\t\t\tif (x <= this.right && x >= this.x && y <= this.bottom && y >= this.y)\n\t\t\t\treturn true\n\t\t\telse\n\t\t\t\treturn false\n\t\t}\n\t}\n\n\tProton.Rectangle = Rectangle;\n\n\n\n\tvar Mat3 = Mat3 || {\n\t\tcreate : function(mat3) {\n\t\t\tvar mat = new Float32Array(9);\n\t\t\tif (mat3)\n\t\t\t\tthis.set(mat3, mat);\n\t\t\treturn mat;\n\t\t},\n\t\tset : function(mat1, mat2) {\n\t\t\tfor (var i = 0; i < 9; i++)\n\t\t\t\tmat2[i] = mat1[i];\n\t\t\treturn mat2;\n\t\t},\n\t\tmultiply : function(mat, mat2, mat3) {\n\t\t\tvar a00 = mat[0], a01 = mat[1], a02 = mat[2], a10 = mat[3], a11 = mat[4], a20 = mat[6], a21 = mat[7], b00 = mat2[0], b01 = mat2[1], b02 = mat2[2], b10 = mat2[3], b11 = mat2[4], b20 = mat2[6], b21 = mat2[7];\n\n\t\t\tmat3[0] = b00 * a00 + b01 * a10;\n\t\t\tmat3[1] = b00 * a01 + b01 * a11;\n\t\t\tmat3[2] = a02 * b02;\n\t\t\tmat3[3] = b10 * a00 + b11 * a10;\n\t\t\tmat3[4] = b10 * a01 + b11 * a11;\n\t\t\tmat3[6] = b20 * a00 + b21 * a10 + a20;\n\t\t\tmat3[7] = b20 * a01 + b21 * a11 + a21;\n\t\t\treturn mat3;\n\t\t},\n\t\tinverse : function(mat, mat3) {\n\t\t\tvar a00 = mat[0], a01 = mat[1], a10 = mat[3], a11 = mat[4], a20 = mat[6], a21 = mat[7], b01 = a11, b11 = -a10, b21 = a21 * a10 - a11 * a20, d = a00 * b01 + a01 * b11, id;\n\t\t\tid = 1 / d;\n\t\t\tmat3[0] = b01 * id;\n\t\t\tmat3[1] = (-a01 ) * id;\n\t\t\tmat3[3] = b11 * id;\n\t\t\tmat3[4] = a00 * id;\n\t\t\tmat3[6] = b21 * id;\n\t\t\tmat3[7] = (-a21 * a00 + a01 * a20) * id;\n\t\t\treturn mat3;\n\t\t},\n\t\tmultiplyVec2 : function(m, vec, mat3) {\n\t\t\tvar x = vec[0], y = vec[1];\n\t\t\tmat3[0] = x * m[0] + y * m[3] + m[6];\n\t\t\tmat3[1] = x * m[1] + y * m[4] + m[7];\n\t\t\treturn mat3;\n\t\t}\n\t}\n\n\tProton.Mat3 = Mat3;\n\n\n\n\tBehaviour.id = 0;\n\n\t/**\n\t * The Behaviour class is the base for the other Behaviour\n\t *\n\t * @memberof! -\n\t * @interface\n\t * @alias Proton.Behaviour\n\t *\n\t * @param {Number} life \tthe behaviours life\n\t * @param {String} easing \tThe behaviour's decaying trend, for example Proton.easeOutQuart\n\t *\n\t * @property {String}  id \t\tThe behaviours id\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t * @property {Number}  age=0 \tHow long the particle should be 'alife'\n\t * @property {Number}  energy=1\n\t * @property {Boolean} dead=false The particle is dead at first\n\t * @property {Array}   parents \tThe behaviour's parents array\n\t * @property {String}  name \tThe behaviour name\n\t */\n\tfunction Behaviour(life, easing) {\n\t\tthis.id = 'Behaviour_' + Behaviour.id++;\n\t\tthis.life = Proton.Util.initValue(life, Infinity);\n\t\tthis.easing = Proton.ease.setEasingByName(easing);\n\t\tthis.age = 0;\n\t\tthis.energy = 1;\n\t\tthis.dead = false;\n\t\tthis.parents = [];\n\t\tthis.name = 'Behaviour';\n\t}\n\n\n\tBehaviour.prototype = {\n\t\t/**\n\t\t * Reset this behaviour's parameters\n\t\t *\n\t\t * @method reset\n\t\t * @memberof Proton.Behaviour\n\t\t * @instance\n\t\t *\n\t\t * @param {Number} [life=Infinity] \t\tthis behaviour's life\n\t\t * @param {String} [easing=easeLinear] \tthis behaviour's easing\n\t\t */\n\t\treset : function(life, easing) {\n\t\t\tthis.life = Proton.Util.initValue(life, Infinity);\n\t\t\tthis.easing = Proton.Util.initValue(easing, Proton.ease.setEasingByName(Proton.easeLinear));\n\t\t},\n\t\t/**\n\t\t * Normalize a force by 1:100;\n\t\t *\n\t\t * @method normalizeForce\n\t\t * @memberof Proton.Behaviour\n\t\t * @instance\n\t\t *\n\t\t * @param {Proton.Vector2D} force \n\t\t */\n\t\tnormalizeForce : function(force) {\n\t\t\treturn force.multiplyScalar(Proton.MEASURE);\n\t\t},\n\n\t\t/**\n\t\t * Normalize a value by 1:100;\n\t\t *\n\t\t * @method normalizeValue\n\t\t * @memberof Proton.Behaviour\n\t\t * @instance\n\t\t *\n\t\t * @param {Number} value\n\t\t */\n\t\tnormalizeValue : function(value) {\n\t\t\treturn value * Proton.MEASURE;\n\t\t},\n\n\t\t/**\n\t\t * Initialize the behaviour's parameters for all particles\n\t\t *\n\t\t * @method initialize\n\t\t * @memberof Proton.Behaviour\n\t\t * @instance\n\t\t *\n\t\t * @param {Proton.Particle} particle\n\t\t */\n\t\tinitialize : function(particle) {\n\t\t},\n\t\t\n\t\t/**\n\t\t * Apply this behaviour for all particles every time\n\t\t *\n\t\t * @method applyBehaviour\n\t\t * @memberof Proton.Behaviour\n\t\t * @instance\n\t\t *\n\t\t * @param {Proton.Particle} particle\n\t\t * @param {Number} \t\t\ttime the integrate time 1/ms\n\t\t * @param {Int} \t\t\tindex the particle index\n\t\t */\n\t\tapplyBehaviour : function(particle, time, index) {\n\t\t\tthis.age += time;\n\t\t\tif (this.age >= this.life || this.dead) {\n\t\t\t\tthis.energy = 0;\n\t\t\t\tthis.dead = true;\n\t\t\t\tthis.destroy();\n\t\t\t} else {\n\t\t\t\tvar scale = this.easing(particle.age / particle.life);\n\t\t\t\tthis.energy = Math.max(1 - scale, 0);\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * Destory this behaviour\n\t\t *\n\t\t * @method destroy\n\t\t * @memberof Proton.Behaviour\n\t\t * @instance\n\t\t */\n\t\tdestroy : function() {\n\t\t\tvar index;\n\t\t\tvar length = this.parents.length, i;\n\t\t\tfor ( i = 0; i < length; i++) {\n\t\t\t\tthis.parents[i].removeBehaviour(this);\n\t\t\t}\n\n\t\t\tthis.parents = [];\n\t\t}\n\t};\n\n\tProton.Behaviour = Behaviour;\n\n\n\n\t/**\n\t * The number of particles per second emission (a [particle]/b [s]);\n\t * @namespace\n\t * @memberof! Proton#\n\t * @constructor\n\t * @alias Proton.Rate\n\t *\n\t * @param {Array | Number | Proton.Span} numpan the number of each emission;\n\t * @param {Array | Number | Proton.Span} timepan the time of each emission;\n\t * for example: new Proton.Rate(new Proton.Span(10, 20), new Proton.Span(.1, .25));\n\t */\n\tfunction Rate(numpan, timepan) {\n\t\tthis.numPan = Proton.Util.initValue(numpan, 1);\n\t\tthis.timePan = Proton.Util.initValue(timepan, 1);\n\t\tthis.numPan = Proton.Util.setSpanValue(this.numPan);\n\t\tthis.timePan = Proton.Util.setSpanValue(this.timePan);\n\t\tthis.startTime = 0;\n\t\tthis.nextTime = 0;\n\t\tthis.init();\n\t}\n\n\n\tRate.prototype = {\n\t\t/**\n\t\t * @method init\n\t\t * @memberof Proton#Proton.Rate\n\t\t * @instance\n\t\t */\n\t\tinit : function() {\n\t\t\tthis.startTime = 0;\n\t\t\tthis.nextTime = this.timePan.getValue();\n\t\t},\n\n\t\tgetValue : function(time) {\n\t\t\tthis.startTime += time;\n\t\t\tif (this.startTime >= this.nextTime) {\n\t\t\t\tthis.startTime = 0;\n\t\t\t\tthis.nextTime = this.timePan.getValue();\n\t\t\t\tif (this.numPan.b == 1) {\n\t\t\t\t\tif (this.numPan.getValue(false) > 0.5)\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\telse\n\t\t\t\t\t\treturn 0;\n\t\t\t\t} else {\n\t\t\t\t\treturn this.numPan.getValue(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tProton.Rate = Rate;\n\n\n\n\tfunction Initialize() {\n\n\t}\n\n\n\tInitialize.prototype.reset = function() {\n\n\t}\n\n\tInitialize.prototype.init = function(emitter, particle) {\n\t\tif (particle) {\n\t\t\tthis.initialize(particle);\n\t\t} else {\n\t\t\tthis.initialize(emitter);\n\t\t}\n\t};\n\n\t///sub class init\n\tInitialize.prototype.initialize = function(target) {\n\t};\n\n\tProton.Initialize = Initialize;\n\n\n\n\tvar InitializeUtil = {\n\n\t\tinitialize : function(emitter, particle, initializes) {\n\t\t\tvar length = initializes.length, i;\n\t\t\tfor ( i = 0; i < length; i++) {\n\t\t\t\tif (initializes[i] instanceof Proton.Initialize)\n\t\t\t\t\tinitializes[i].init(emitter, particle);\n\t\t\t\telse\n\t\t\t\t\tProton.InitializeUtil.init(emitter, particle, initializes[i]);\n\t\t\t}\n\n\t\t\tProton.InitializeUtil.bindEmitter(emitter, particle);\n\t\t},\n\t\t\n\t\t//////////////////////init//////////////////////\n\t\tinit : function(emitter, particle, initialize) {\n\t\t\tProton.Util.setPrototypeByObject(particle, initialize);\n\t\t\tProton.Util.setVector2DByObject(particle, initialize);\n\t\t},\n\n\t\tbindEmitter : function(emitter, particle) {\n\t\t\tif (emitter.bindEmitter) {\n\t\t\t\tparticle.p.add(emitter.p);\n\t\t\t\tparticle.v.add(emitter.v);\n\t\t\t\tparticle.a.add(emitter.a);\n\t\t\t\tparticle.v.rotate(Proton.MathUtils.degreeTransform(emitter.rotation));\n\t\t\t}\n\t\t}\n\t\t//////////////////////init//////////////////////\n\t}\n\n\tProton.InitializeUtil = InitializeUtil;\n\n\n\n\tfunction Life(a, b, c) {\n\t\tLife._super_.call(this);\n\t\tthis.lifePan = Proton.Util.setSpanValue(a, b, c);\n\t}\n\n\n\tProton.Util.inherits(Life, Proton.Initialize);\n\tLife.prototype.initialize = function(target) {\n\t\tif (this.lifePan.a == Infinity)\n\t\t\ttarget.life = Infinity;\n\t\telse\n\t\t\ttarget.life = this.lifePan.getValue();\n\t};\n\n\tProton.Life = Life;\n\n\n\n\tfunction Position(zone) {\n\t\tPosition._super_.call(this);\n\t\tthis.zone = Proton.Util.initValue(zone, new Proton.PointZone());\n\t}\n\n\n\tProton.Util.inherits(Position, Proton.Initialize);\n\tPosition.prototype.reset = function(zone) {\n\t\tthis.zone = Proton.Util.initValue(zone, new Proton.PointZone());\n\t};\n\n\tPosition.prototype.initialize = function(target) {\n\t\tthis.zone.getPosition();\n\t\ttarget.p.x = this.zone.vector.x;\n\t\ttarget.p.y = this.zone.vector.y;\n\t};\n\n\tProton.Position = Position;\n\tProton.P = Position;\n\n\n\n\t//radius and tha\n\tfunction Velocity(rpan, thapan, type) {\n\t\tVelocity._super_.call(this);\n\t\tthis.rPan = Proton.Util.setSpanValue(rpan);\n\t\tthis.thaPan = Proton.Util.setSpanValue(thapan);\n\t\tthis.type = Proton.Util.initValue(type, 'vector');\n\t}\n\n\n\tProton.Util.inherits(Velocity, Proton.Initialize);\n\n\tVelocity.prototype.reset = function(rpan, thapan, type) {\n\t\tthis.rPan = Proton.Util.setSpanValue(rpan);\n\t\tthis.thaPan = Proton.Util.setSpanValue(thapan);\n\t\tthis.type = Proton.Util.initValue(type, 'vector');\n\t};\n\n\tVelocity.prototype.normalizeVelocity = function(vr) {\n\t\treturn vr * Proton.MEASURE;\n\t}\n\n\tVelocity.prototype.initialize = function(target) {\n\t\tif (this.type == 'p' || this.type == 'P' || this.type == 'polar') {\n\t\t\tvar polar2d = new Proton.Polar2D(this.normalizeVelocity(this.rPan.getValue()), this.thaPan.getValue() * Math.PI / 180);\n\t\t\ttarget.v.x = polar2d.getX();\n\t\t\ttarget.v.y = polar2d.getY();\n\t\t} else {\n\t\t\ttarget.v.x = this.normalizeVelocity(this.rPan.getValue());\n\t\t\ttarget.v.y = this.normalizeVelocity(this.thaPan.getValue());\n\t\t}\n\t};\n\n\tProton.Velocity = Velocity;\n\tProton.V = Velocity;\n\n\n\n\tfunction Mass(a, b, c) {\n\t\tMass._super_.call(this);\n\t\tthis.massPan = Proton.Util.setSpanValue(a, b, c);\n\t}\n\n\n\tProton.Util.inherits(Mass, Proton.Initialize);\n\tMass.prototype.initialize = function(target) {\n\t\ttarget.mass = this.massPan.getValue();\n\t};\n\n\tProton.Mass = Mass;\n\n\n\n\tfunction Radius(a, b, c) {\n\t\tRadius._super_.call(this);\n\t\tthis.radius = Proton.Util.setSpanValue(a, b, c);\n\t}\n\n\n\tProton.Util.inherits(Radius, Proton.Initialize);\n\tRadius.prototype.reset = function(a, b, c) {\n\t\tthis.radius = Proton.Util.setSpanValue(a, b, c);\n\t};\n\n\tRadius.prototype.initialize = function(particle) {\n\t\tparticle.radius = this.radius.getValue();\n\t\tparticle.transform.oldRadius = particle.radius;\n\t};\n\n\tProton.Radius = Radius;\n\n\n\n\tfunction ImageTarget(image, w, h) {\n\t\tImageTarget._super_.call(this);\n\t\tthis.image = this.setSpanValue(image);\n\t\tthis.w = Proton.Util.initValue(w, 20);\n\t\tthis.h = Proton.Util.initValue(h, this.w);\n\t}\n\n\n\tProton.Util.inherits(ImageTarget, Proton.Initialize);\n\tImageTarget.prototype.initialize = function(particle) {\n\t\tvar imagetarget = this.image.getValue();\n\t\tif ( typeof (imagetarget) == 'string') {\n\t\t\tparticle.target = {\n\t\t\t\twidth : this.w,\n\t\t\t\theight : this.h,\n\t\t\t\tsrc : imagetarget\n\t\t\t}\n\t\t} else {\n\t\t\tparticle.target = imagetarget;\n\t\t}\n\t};\n\n\tImageTarget.prototype.setSpanValue = function(color) {\n\t\tif ( color instanceof Proton.ColorSpan) {\n\t\t\treturn color;\n\t\t} else {\n\t\t\treturn new Proton.ColorSpan(color);\n\t\t}\n\t}\n\n\tProton.ImageTarget = ImageTarget;\n\n\n\n\n\t/**\n\t * @memberof! Proton#\n\t * @augments Proton.Behaviour\n\t * @constructor\n\t * @alias Proton.Force\n\t *\n\t * @param {Number} fx\n\t * @param {Number} fy\n\t * @param {Number} [life=Infinity] \t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tfunction Force(fx, fy, life, easing) {\n\t\tForce._super_.call(this, life, easing);\n\t\tthis.force = this.normalizeForce(new Proton.Vector2D(fx, fy));\n\t\tthis.name = \"Force\";\n\t}\n\n\n\tProton.Util.inherits(Force, Proton.Behaviour);\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.Force\n\t * @instance\n\t *\n\t * @param {Number} fx\n\t * @param {Number} fy\n\t * @param {Number} [life=Infinity] \t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t */\n\tForce.prototype.reset = function(fx, fy, life, easing) {\n\t\tthis.force = this.normalizeForce(new Proton.Vector2D(fx, fy));\n\t\tif (life)\n\t\t\tForce._super_.prototype.reset.call(this, life, easing);\n\t}\n\n\t/**\n\t * Apply this behaviour for all particles every time\n\t *\n\t * @method applyBehaviour\n\t * @memberof Proton#Proton.Force\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} the integrate time 1/ms\n\t * @param {Int} the particle index\n\t */\n\tForce.prototype.applyBehaviour = function(particle, time, index) {\n\t\tForce._super_.prototype.applyBehaviour.call(this, particle, time, index);\n\t\tparticle.a.add(this.force);\n\t};\n\n\tProton.Force = Force;\n\tProton.F = Force;\n\n\n\n\t/**\n\t * This behaviour let the particles follow one specific Proton.Vector2D\n\t *\n\t * @memberof! Proton#\n\t * @augments Proton.Behaviour\n\t * @constructor\n\t * @alias Proton.Attraction\n\t *\n\t * @todo add description for 'force' and 'radius'\n\t *\n\t * @param {Proton.Vector2D} targetPosition the attraction point coordinates\n\t * @param {Number} [force=100]\n\t * @param {Number} [radius=1000]\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {Proton.Vector2D} targetPosition\n\t * @property {Number} radius\n\t * @property {Number} force\n\t * @property {Number} radiusSq\n\t * @property {Proton.Vector2D} attractionForce\n\t * @property {Number} lengthSq\n\t * @property {String} name The Behaviour name\n\t */\n\tfunction Attraction(targetPosition, force, radius, life, easing) {\n\t\tAttraction._super_.call(this, life, easing);\n\n\t\tthis.targetPosition = Proton.Util.initValue(targetPosition, new Proton.Vector2D);\n\t\tthis.radius = Proton.Util.initValue(radius, 1000);\n\t\tthis.force = Proton.Util.initValue(this.normalizeValue(force), 100);\n\t\tthis.radiusSq = this.radius * this.radius\n\t\tthis.attractionForce = new Proton.Vector2D();\n\t\tthis.lengthSq = 0;\n\t\tthis.name = \"Attraction\";\n\t}\n\n\n\tProton.Util.inherits(Attraction, Proton.Behaviour);\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.Attraction\n\t * @instance\n\t *\n\t * @todo add description for 'force' and 'radius'\n\t *\n\t * @param {Proton.Vector2D} targetPosition the attraction point coordinates\n\t * @param {Number} [force=100]\n\t * @param {Number} [radius=1000]\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t */\n\tAttraction.prototype.reset = function(targetPosition, force, radius, life, easing) {\n\t\tthis.targetPosition = Proton.Util.initValue(targetPosition, new Proton.Vector2D);\n\t\tthis.radius = Proton.Util.initValue(radius, 1000);\n\t\tthis.force = Proton.Util.initValue(this.normalizeValue(force), 100);\n\t\tthis.radiusSq = this.radius * this.radius\n\t\tthis.attractionForce = new Proton.Vector2D();\n\t\tthis.lengthSq = 0;\n\t\tif (life)\n\t\t\tAttraction._super_.prototype.reset.call(this, life, easing);\n\t}\n\n\t/**\n\t * Apply this behaviour for all particles every time\n\t *\n\t * @memberof Proton#Proton.Attraction\n\t * @method applyBehaviour\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\n\t * @param {Int} \t\t\tindex the particle index\n\t */\n\tAttraction.prototype.applyBehaviour = function(particle, time, index) {\n\t\tAttraction._super_.prototype.applyBehaviour.call(this, particle, time, index);\n\t\tthis.attractionForce.copy(this.targetPosition);\n\t\tthis.attractionForce.sub(particle.p);\n\t\tthis.lengthSq = this.attractionForce.lengthSq();\n\t\tif (this.lengthSq > 0.000004 && this.lengthSq < this.radiusSq) {\n\t\t\tthis.attractionForce.normalize();\n\t\t\tthis.attractionForce.multiplyScalar(1 - this.lengthSq / this.radiusSq);\n\t\t\tthis.attractionForce.multiplyScalar(this.force);\n\t\t\tparticle.a.add(this.attractionForce);\n\t\t}\n\t};\n\n\tProton.Attraction = Attraction;\n\n\n\n\n\n\t/**\n\t * @memberof! Proton#\n\t * @augments Proton.Behaviour\n\t * @constructor\n\t * @alias Proton.RandomDrift\n\t *\n\t * @param {Number} driftX \t\t\t\tX value of the new Proton.Vector2D\n\t * @param {Number} driftY  \t\t\t\tY value of the new Proton.Vector2D\n\t * @param {Number} delay \t\t\t\tHow much delay the drift should have\n\t * @param {Number} [life=Infinity] \t\tthis behaviour's life\n\t * @param {String} [easing=easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {Number} time The time of the drift\n\t * @property {String} name The Behaviour name\n\t */\n\tfunction RandomDrift(driftX, driftY, delay, life, easing) {\n\t\tRandomDrift._super_.call(this, life, easing);\n\t\tthis.reset(driftX, driftY, delay);\n\t\tthis.time = 0;\n\t\tthis.name = \"RandomDrift\";\n\t}\n\n\tProton.Util.inherits(RandomDrift, Proton.Behaviour);\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.RandomDrift\n\t * @instance\n\t *\n\t * @param {Number} driftX \t\t\t\tX value of the new Proton.Vector2D\n\t * @param {Number} driftY  \t\t\t\tY value of the new Proton.Vector2D\n\t * @param {Number} delay \t\t\t\tHow much delay the drift should have\n\t * @param {Number} [life=Infinity] \t\tthis behaviour's life\n\t * @param {String} [easing=easeLinear] \tthis behaviour's easing\n\t */\n\tRandomDrift.prototype.reset = function(driftX, driftY, delay, life, easing) {\n\t\tthis.panFoce = new Proton.Vector2D(driftX, driftY);\n\t\tthis.panFoce = this.normalizeForce(this.panFoce);\n\t\tthis.delay = delay;\n\t\tif (life)\n\t\t\tRandomDrift._super_.prototype.reset.call(this, life, easing);\n\t}\n\n\t/**\n\t * Apply this behaviour for all particles every time\n\t *\n\t * @method applyBehaviour\n\t * @memberof Proton#Proton.RandomDrift\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\n\t * @param {Int} \t\t\tindex the particle index\n\t */\n\tRandomDrift.prototype.applyBehaviour = function(particle, time, index) {\n\t\tRandomDrift._super_.prototype.applyBehaviour.call(this, particle, time, index);\n\t\tthis.time += time;\n\t\tif (this.time >= this.delay) {\n\t\t\t\n\t\t\tparticle.a.addXY(Proton.MathUtils.randomAToB(-this.panFoce.x, this.panFoce.x), Proton.MathUtils.randomAToB(-this.panFoce.y, this.panFoce.y));\n\t\t\tthis.time = 0;\n\t\t};\n\t};\n\n\tProton.RandomDrift = RandomDrift;\n\n\n\n\n\t/**\n\t * The oppisite of Proton.Attraction - turns the force\n\t *\n\t * @memberof! Proton#\n\t * @augments Proton#Proton.Attraction\n\t * @constructor\n\t * @alias Proton.Repulsion\n\t *\n\t * @todo add description for 'force' and 'radius'\n\t *\n\t * @param {Proton.Vector2D} targetPosition the attraction point coordinates\n\t * @param {Number} [force=100]\n\t * @param {Number} [radius=1000]\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {Number} force\n\t * @property {String} name The Behaviour name\n\t */\n\tfunction Repulsion(targetPosition, force, radius, life, easing) {\n\t\tRepulsion._super_.call(this, targetPosition, force, radius, life, easing);\n\t\tthis.force *= -1;\n\t\tthis.name = \"Repulsion\";\n\t}\n\n\tProton.Util.inherits(Repulsion, Proton.Attraction);\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.Repulsion\n\t * @instance\n\t *\n\t * @todo add description for 'force' and 'radius'\n\t *\n\t * @param {Proton.Vector2D} targetPosition the attraction point coordinates\n\t * @param {Number} [force=100]\n\t * @param {Number} [radius=1000]\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t */\n\tRepulsion.prototype.reset = function(targetPosition, force, radius, life, easing) {\n\t\tRepulsion._super_.prototype.reset.call(this, targetPosition, force, radius, life, easing);\n\t\tthis.force *= -1;\n\t}\n\n\tProton.Repulsion = Repulsion;\n\n\n\n\n\n\t/**\n\t * @memberof! Proton#\n\t * @augments Proton#Proton.Force\n\t * @constructor\n\t * @alias Proton.Gravity\n\t *\n\t * @param {Number} g \t\t\t\t\t\t\tGravity\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tfunction Gravity(g, life, easing) {\n\t\tGravity._super_.call(this, 0, g, life, easing);\n\t\tthis.name = \"Gravity\";\n\t}\n\n\tProton.Util.inherits(Gravity, Proton.Force);\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.Gravity\n\t * @instance\n\t *\n\t * @param {Number} g \t\t\t\t\t\t\tGravity\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t */\n\tGravity.prototype.reset = function(g, life, easing) {\n\t\tGravity._super_.prototype.reset.call(this, 0, g, life, easing);\n\t}\n\n\tProton.Gravity = Gravity;\n\tProton.G = Gravity;\n\n\n\n\t//can use Collision(emitter,true,function(){}) or Collision();\n\n\t/**\n\t * The callback after collision\n\t *\n\t * @callback Callback\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Proton.Paritcle} otherParticle\n\t */\n\t/**\n\t * @memberof! Proton#\n\t * @augments Proton.Behaviour\n\t * @constructor\n\t * @alias Proton.Collision\n\t *\n\t * @todo add description to mass\n\t *\n\t * @param {Proton.Emitter} \t[emitter=null] \t\tthe attraction point coordinates\n\t * @param {Boolean} \t\t[mass=true]\t\t\t\n\t * @param {Callback}\t \t[callback=null]\t\tthe callback after the collision\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tfunction Collision(emitter, mass, callback, life, easing) {\n\t\tCollision._super_.call(this, life, easing);\n\t\tthis.reset(emitter, mass, callback);\n\t\tthis.name = \"Collision\";\n\t}\n\n\n\tProton.Util.inherits(Collision, Proton.Behaviour);\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @memberof Proton#Proton.Collision\n\t * @method reset\n\t * @instance\n\t *\n\t * @todo add description to mass\n\t *\n\t * @param {Proton.Emitter} \t[emitter=null] \t\tthe attraction point coordinates\n\t * @param {Boolean} \t\t[mass=true]\t\t\t\n\t * @param {Callback}\t \t[callback=null]\t\tthe callback after the collision\n\t * @param {Number} \t\t\t[life=Infinity] \tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t */\n\tCollision.prototype.reset = function(emitter, mass, callback, life, easing) {\n\t\tthis.emitter = Proton.Util.initValue(emitter, null);\n\t\tthis.mass = Proton.Util.initValue(mass, true);\n\t\tthis.callback = Proton.Util.initValue(callback, null);\n\t\tthis.collisionPool = [];\n\t\tthis.delta = new Proton.Vector2D();\n\t\tif (life)\n\t\t\tCollision._super_.prototype.reset.call(this, life, easing);\n\t}\n\n\t/**\n\t * Apply this behaviour for all particles every time\n\t *\n\t * @memberof Proton#Proton.Collision\n\t * @method applyBehaviour\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\n\t * @param {Int} \t\t\tindex the particle index\n\t */\n\tCollision.prototype.applyBehaviour = function(particle, time, index) {\n\t\tvar newPool = this.emitter ? this.emitter.particles.slice(index) : this.pool.slice(index);\n\t\tvar otherParticle;\n\t\tvar lengthSq;\n\t\tvar overlap;\n\t\tvar averageMass1, averageMass2;\n\t\tvar length = newPool.length;\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\totherParticle = newPool[i];\n\t\t\tif (otherParticle !== particle) {\n\t\t\t\tthis.delta.copy(otherParticle.p);\n\t\t\t\tthis.delta.sub(particle.p);\n\t\t\t\tlengthSq = this.delta.lengthSq();\n\t\t\t\tdistance = particle.radius + otherParticle.radius;\n\n\t\t\t\tif (lengthSq <= distance * distance) {\n\t\t\t\t\toverlap = distance - Math.sqrt(lengthSq);\n\t\t\t\t\toverlap += 0.5;\n\t\t\t\t\ttotalMass = particle.mass + otherParticle.mass;\n\t\t\t\t\taverageMass1 = this.mass ? otherParticle.mass / totalMass : 0.5;\n\t\t\t\t\taverageMass2 = this.mass ? particle.mass / totalMass : 0.5;\n\t\t\t\t\tparticle.p.add(this.delta.clone().normalize().multiplyScalar(overlap * -averageMass1));\n\t\t\t\t\totherParticle.p.add(this.delta.normalize().multiplyScalar(overlap * averageMass2));\n\t\t\t\t\tif (this.callback)\n\t\t\t\t\t\tthis.callback(particle, otherParticle);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tProton.Collision = Collision;\n\n\n\n\n\n\t/**\n\t * Defines what happens if the particles come to the end of the specified zone\n\t *\n\t * @memberof! Proton#\n\t * @augments Proton.Behaviour\n\t * @constructor\n\t * @alias Proton.CrossZone\n\t *\n\t * @param {Proton.Zone} zone \t\t\t\t\t\tcan be any Proton.Zone - e.g. Proton.RectZone()\n\t * @param {String} \t\t[crossType=dead] \t\t\twhat happens if the particles pass the zone - allowed strings: dead | bound | cross\n\t * @param {Number} \t\t[life=Infinity] \t\t\tthis behaviour's life\n\t * @param {String} \t\t[easing=Proton.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tfunction CrossZone(zone, crossType, life, easing) {\n\t\tCrossZone._super_.call(this, life, easing);\n\t\tthis.reset(zone, crossType);\n\t\tthis.name = \"CrossZone\";\n\t}\n\n\tProton.Util.inherits(CrossZone, Proton.Behaviour);\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.CrossZone\n\t * @instance\n\t *\n\t * @param {Proton.Zone} zone \t\t\t\tcan be any Proton.Zone - e.g. Proton.RectZone()\n \t * @param {String} \t\t[crossType=dead] \twhat happens if the particles pass the zone - allowed strings: dead | bound | cross\n\t * @param {Number} \t\t[life=Infinity] \tthis behaviour's life\n\t * @param {String} \t\t[easing=easeLinear]\tthis behaviour's easing\n\t */\n\tCrossZone.prototype.reset = function(zone, crossType, life, easing) {\n\t\tthis.zone = zone;\n\t\tthis.zone.crossType = Proton.Util.initValue(crossType, \"dead\");\n\t\tif (life)\n\t\t\tCrossZone._super_.prototype.reset.call(this, life, easing);\n\t}\n\n\t/**\n\t * Apply this behaviour for all particles every time\n\t *\n\t * @method applyBehaviour\n\t * @memberof Proton#Proton.CrossZone\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} the integrate time 1/ms\n\t * @param {Int} the particle index\n\t */\n\tCrossZone.prototype.applyBehaviour = function(particle, time, index) {\n\t\tCrossZone._super_.prototype.applyBehaviour.call(this, particle, time, index);\n\t\tthis.zone.crossing(particle);\n\t};\n\n\tProton.CrossZone = CrossZone;\n\n\n\n\n\t/**\n\t * @memberof! Proton#\n\t * @augments Proton.Behaviour\n\t * @constructor\n\t * @alias Proton.Alpha\n\t *\n\t * @todo add description for 'a' and 'b'\n\t *\n\t * @param {Number} a\n\t * @param {String} b\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tfunction Alpha(a, b, life, easing) {\n\t\tAlpha._super_.call(this, life, easing);\n\t\tthis.reset(a, b);\n\t\tthis.name = \"Alpha\";\n\t}\n\n\n\tProton.Util.inherits(Alpha, Proton.Behaviour);\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.Alpha\n\t * @instance\n\t *\n\t * @todo add description for 'a' and 'b'\n\t *\n\t * @param {Number} a\n\t * @param {String} b\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t */\n\tAlpha.prototype.reset = function(a, b, life, easing) {\n\t\tif (b == null || b == undefined)\n\t\t\tthis.same = true;\n\t\telse\n\t\t\tthis.same = false;\n\t\tthis.a = Proton.Util.setSpanValue(Proton.Util.initValue(a, 1));\n\t\tthis.b = Proton.Util.setSpanValue(b);\n\t\tif (life)\n\t\t\tAlpha._super_.prototype.reset.call(this, life, easing);\n\t}\n\n\t/**\n\t * Sets the new alpha value of the particle\n\t *\n\t * @method initialize\n\t * @memberof Proton#Proton.Alpha\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle A single Proton generated particle\n\t */\n\tAlpha.prototype.initialize = function(particle) {\n\t\tparticle.transform.alphaA = this.a.getValue();\n\t\tif (this.same)\n\t\t\tparticle.transform.alphaB = particle.transform.alphaA;\n\t\telse\n\t\t\tparticle.transform.alphaB = this.b.getValue();\n\t};\n\n\t/**\n\t * @method applyBehaviour\n\t * @memberof Proton#Proton.Alpha\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\n\t * @param {Int} \t\t\tindex the particle index\n \t */\n\tAlpha.prototype.applyBehaviour = function(particle, time, index) {\n\t\tAlpha._super_.prototype.applyBehaviour.call(this, particle, time, index);\n\t\tparticle.alpha = particle.transform.alphaB + (particle.transform.alphaA - particle.transform.alphaB) * this.energy;\n\t\tif (particle.alpha < 0.001)\n\t\t\tparticle.alpha = 0;\n\t};\n\n\tProton.Alpha = Alpha;\n\n\n\n\n\t/**\n\t * @memberof! Proton#\n\t * @augments Proton.Behaviour\n\t * @constructor\n\t * @alias Proton.Scale\n\t *\n\t * @todo add description for 'a' and 'b'\n\t *\n\t * @param {Number} a\n\t * @param {String} b\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tfunction Scale(a, b, life, easing) {\n\t\tScale._super_.call(this, life, easing);\n\t\tthis.reset(a, b);\n\t\tthis.name = \"Scale\";\n\t}\n\n\n\tProton.Util.inherits(Scale, Proton.Behaviour);\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.Scale\n\t * @instance\n\t *\n\t * @param {Number} a\n\t * @param {String} b\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t */\n\tScale.prototype.reset = function(a, b, life, easing) {\n\t\tif (b == null || b == undefined)\n\t\t\tthis.same = true;\n\t\telse\n\t\t\tthis.same = false;\n\t\tthis.a = Proton.Util.setSpanValue(Proton.Util.initValue(a, 1));\n\t\tthis.b = Proton.Util.setSpanValue(b);\n\t\tif (life)\n\t\t\tScale._super_.prototype.reset.call(this, life, easing);\n\t}\n\n\t/**\n\t * Initialize the behaviour's parameters for all particles\n\t *\n\t * @method initialize\n\t * @memberof Proton#Proton.Scale\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t */\n\tScale.prototype.initialize = function(particle) {\n\t\tparticle.transform.scaleA = this.a.getValue();\n\t\tparticle.transform.oldRadius = particle.radius;\n\t\tif (this.same)\n\t\t\tparticle.transform.scaleB = particle.transform.scaleA;\n\t\telse\n\t\t\tparticle.transform.scaleB = this.b.getValue();\n\n\t};\n\n\t/**\n\t * Apply this behaviour for all particles every time\n\t *\n\t * @method applyBehaviour\n\t * @memberof Proton#Proton.Scale\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\n\t * @param {Int} \t\t\tindex the particle index\n\t */\n\tScale.prototype.applyBehaviour = function(particle, time, index) {\n\t\tScale._super_.prototype.applyBehaviour.call(this, particle, time, index);\n\t\tparticle.scale = particle.transform.scaleB + (particle.transform.scaleA - particle.transform.scaleB) * this.energy;\n\t\tif (particle.scale < 0.0001)\n\t\t\tparticle.scale = 0;\n\t\tparticle.radius = particle.transform.oldRadius * particle.scale;\n\t};\n\n\tProton.Scale = Scale;\n\n\n\n\n\t/**\n\t * @memberof! Proton#\n\t * @augments Proton.Behaviour\n\t * @constructor\n\t * @alias Proton.Rotate\n\t *\n\t * @todo add description for 'a', 'b' and 'style'\n\t *\n\t * @param {Number} a\n\t * @param {String} b\n\t * @param {String} [style=to]\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tfunction Rotate(a, b, style, life, easing) {\n\t\tRotate._super_.call(this, life, easing);\n\t\tthis.reset(a, b, style);\n\t\tthis.name = \"Rotate\";\n\t}\n\n\tProton.Util.inherits(Rotate, Proton.Behaviour);\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.Rotate\n\t * @instance\n\t *\n\t * @todo add description for 'a', 'b' and 'style'\n\t *\n\t * @param {Number} a\n\t * @param {String} b\n\t * @param {String} [style=to]\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear] \tthis behaviour's easing\n\t */\n\tRotate.prototype.reset = function(a, b, style, life, easing) {\n\t\tif (b == null || b == undefined)\n\t\t\tthis.same = true;\n\t\telse\n\t\t\tthis.same = false;\n\t\tthis.a = Proton.Util.setSpanValue(Proton.Util.initValue(a, \"Velocity\"));\n\t\tthis.b = Proton.Util.setSpanValue(Proton.Util.initValue(b, 0));\n\t\tthis.style = Proton.Util.initValue(style, 'to');\n\t\tif (life)\n\t\t\tRotate._super_.prototype.reset.call(this, life, easing);\n\t}\n\n\t/**\n\t * Initialize the behaviour's parameters for all particles\n\t *\n\t * @method initialize\n\t * @memberof Proton#Proton.Rotate\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t */\n\tRotate.prototype.initialize = function(particle) {\n\t\tparticle.rotation = this.a.getValue();\n\t\tparticle.transform.rotationA = this.a.getValue();\n\t\tif (!this.same)\n\t\t\tparticle.transform.rotationB = this.b.getValue();\n\t};\n\n\t/**\n\t * Apply this behaviour for all particles every time\n\t *\n\t * @method applyBehaviour\n\t * @memberof Proton#Proton.Rotate\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\n\t * @param {Int} \t\t\tindex the particle index\n\t */\n\tRotate.prototype.applyBehaviour = function(particle, time, index) {\n\t\tRotate._super_.prototype.applyBehaviour.call(this, particle, time, index);\n\t\tif (!this.same) {\n\t\t\tif (this.style == 'to' || this.style == 'TO' || this.style == '_') {\n\t\t\t\tparticle.rotation += particle.transform.rotationB + (particle.transform.rotationA - particle.transform.rotationB) * this.energy\n\t\t\t} else {\n\t\t\t\tparticle.rotation += particle.transform.rotationB;\n\t\t\t}\n\t\t} else if (this.a.a == \"V\" || this.a.a == \"Velocity\" || this.a.a == \"v\") {\n\t\t\t//beta...\n\t\t\tparticle.rotation = particle.getDirection();\n\t\t}\n\t};\n\n\tProton.Rotate = Rotate;\n\n\n\n\n\t/**\n\t * @memberof! Proton#\n\t * @augments Proton.Behaviour\n\t * @constructor\n\t * @alias Proton.Color\n\t *\n\t * @param {Proton.ColorSpan | String} color1 the string should be a hex e.g. #000000 for black\n\t * @param {Proton.ColorSpan | String} color2 the string should be a hex e.g. #000000 for black\n\t * @param {Number} [life=Infinity] \tthis behaviour's life\n\t * @param {String} [easing=easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tfunction Color(color1, color2, life, easing) {\n\t\tColor._super_.call(this, life, easing);\n\t\tthis.reset(color1, color2);\n\t\tthis.name = \"Color\";\n\t}\n\n\n\tProton.Util.inherits(Color, Proton.Behaviour);\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.Color\n\t * @instance\n\t *\n\t * @param {Proton.ColorSpan | String} color1 the string should be a hex e.g. #000000 for black\n\t * @param {Proton.ColorSpan | String} color2 the string should be a hex e.g. #000000 for black\n\t * @param {Number} [life=Infinity] \tthis behaviour's life\n\t * @param {String} [easing=easeLinear] \tthis behaviour's easing\n\t */\n\tColor.prototype.reset = function(color1, color2, life, easing) {\n\t\tthis.color1 = this.setSpanValue(color1);\n\t\tthis.color2 = this.setSpanValue(color2);\n\t\tif (life)\n\t\t\tColor._super_.prototype.reset.call(this, life, easing);\n\t}\n\n\t/**\n\t * Initialize the behaviour's parameters for all particles\n\t *\n\t * @method initialize\n\t * @memberof Proton#Proton.Color\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t */\n\tColor.prototype.initialize = function(particle) {\n\t\tparticle.color = this.color1.getValue();\n\t\tparticle.transform.beginRGB = Proton.Util.hexToRGB(particle.color);\n\n\t\tif (this.color2)\n\t\t\tparticle.transform.endRGB = Proton.Util.hexToRGB(this.color2.getValue());\n\t};\n\n\t/**\n\t * Apply this behaviour for all particles every time\n\t *\n\t * @method applyBehaviour\n\t * @memberof Proton#Proton.Color\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} the integrate time 1/ms\n\t * @param {Int} the particle index\n\t */\n\tColor.prototype.applyBehaviour = function(particle, time, index) {\n\t\tif (this.color2) {\n\t\t\tColor._super_.prototype.applyBehaviour.call(this, particle, time, index);\n\t\t\tparticle.transform.rgb.r = particle.transform.endRGB.r + (particle.transform.beginRGB.r - particle.transform.endRGB.r) * this.energy;\n\t\t\tparticle.transform.rgb.g = particle.transform.endRGB.g + (particle.transform.beginRGB.g - particle.transform.endRGB.g) * this.energy;\n\t\t\tparticle.transform.rgb.b = particle.transform.endRGB.b + (particle.transform.beginRGB.b - particle.transform.endRGB.b) * this.energy;\n\t\t\tparticle.transform.rgb.r = parseInt(particle.transform.rgb.r, 10);\n\t\t\tparticle.transform.rgb.g = parseInt(particle.transform.rgb.g, 10);\n\t\t\tparticle.transform.rgb.b = parseInt(particle.transform.rgb.b, 10);\n\t\t} else {\n\t\t\tparticle.transform.rgb.r = particle.transform.beginRGB.r;\n\t\t\tparticle.transform.rgb.g = particle.transform.beginRGB.g;\n\t\t\tparticle.transform.rgb.b = particle.transform.beginRGB.b;\n\n\t\t}\n\t};\n\n\t/**\n\t * Make sure that the color is an instance of Proton.ColorSpan, if not it makes a new instance\n\t *\n\t * @method setSpanValue\n\t * @memberof Proton#Proton.Color\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} the integrate time 1/ms\n\t * @param {Int} the particle index\n\t */\n\tColor.prototype.setSpanValue = function(color) {\n\t\tif (color) {\n\t\t\tif ( color instanceof Proton.ColorSpan) {\n\t\t\t\treturn color;\n\t\t\t} else {\n\t\t\t\treturn new Proton.ColorSpan(color);\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tProton.Color = Color;\n\n\n\n\n\t/**\n\t * @memberof! Proton#\n\t * @augments Proton.Behaviour\n\t * @constructor\n\t * @alias Proton.GravityWell\n\t *\n\t * @param {Proton.Vector2D} [centerPoint=new Proton.Vector2D] The point in the center\n\t * @param {Number} [force=100]\t\t\t\t\tThe force\t\n\t * @param {Number} [life=Infinity]\t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear]\tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tfunction GravityWell(centerPoint, force, life, easing) {\n\t\tGravityWell._super_.call(this, life, easing);\n\t\tthis.distanceVec = new Proton.Vector2D();\n\t\tthis.centerPoint = Proton.Util.initValue(centerPoint, new Proton.Vector2D);\n\t\tthis.force = Proton.Util.initValue(this.normalizeValue(force), 100);\n\t\tthis.name = \"GravityWell\";\n\t}\n\n\tProton.Util.inherits(GravityWell, Proton.Behaviour);\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.GravityWell\n\t * @instance\n\t *\n\t * @param {Proton.Vector2D} [centerPoint=new Proton.Vector2D] The point in the center\n\t * @param {Number} [force=100]\t\t\t\t\tThe force\t\n\t * @param {Number} [life=Infinity]\t\t\t\tthis behaviour's life\n\t * @param {String} [easing=Proton.easeLinear]\tthis behaviour's easing\n\t */\n\tGravityWell.prototype.reset = function(centerPoint, force, life, easing) {\n\t\tthis.distanceVec = new Proton.Vector2D();\n\t\tthis.centerPoint = Proton.Util.initValue(centerPoint, new Proton.Vector2D);\n\t\tthis.force = Proton.Util.initValue(this.normalizeValue(force), 100);\n\t\tif (life)\n\t\t\tGravityWell._super_.prototype.reset.call(this, life, easing);\n\t};\n\n\t/**\n\t * @inheritdoc\n\t */\n\tGravityWell.prototype.initialize = function(particle) {\n\n\t};\n\n\t/**\n\t * Apply this behaviour for all particles every time\n\t *\n\t * @method applyBehaviour\n\t * @memberof Proton#Proton.GravityWell\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} the integrate time 1/ms\n\t * @param {Int} the particle index\n\t */\n\tGravityWell.prototype.applyBehaviour = function(particle, time, index) {\n\t\tthis.distanceVec.set(this.centerPoint.x - particle.p.x, this.centerPoint.y - particle.p.y);\n\t\tvar distanceSq = this.distanceVec.lengthSq();\n\t\tif (distanceSq != 0) {\n\t\t\tvar distance = this.distanceVec.length();\n\t\t\tvar factor = (this.force * time ) / (distanceSq * distance );\n\t\t\tparticle.v.x += factor * this.distanceVec.x;\n\t\t\tparticle.v.y += factor * this.distanceVec.y;\n\t\t}\n\t}\n\n\tProton.GravityWell = GravityWell;\n\n\n\n\tEmitter.ID = 0;\n\t/**\n\t * You can use this emit particles.\n\t *\n\t * It will dispatch follow events:\n\t * Proton.PARTICLE_CREATED\n\t * Proton.PARTICLE_UPDATA\n\t * Proton.PARTICLE_DEAD\n\t *\n\t * @class Proton.Emitter\n\t * @constructor\n\t * @param {Object} pObj the parameters object;\n\t * for example {damping:0.01,bindEmitter:false}\n\t */\n\tfunction Emitter(pObj) {\n\t\tthis.initializes = [];\n\t\tthis.particles = [];\n\t\tthis.behaviours = [];\n\t\tthis.emitTime = 0;\n\t\tthis.emitTotalTimes = -1;\n\t\t/**\n\t\t * The friction coefficient for all particle emit by This;\n\t\t * @property damping\n\t\t * @type {Number}\n\t\t * @default 0.006\n\t\t */\n\t\tthis.damping = .006;\n\t\t/**\n\t\t * If bindEmitter the particles can bind this emitter's property;\n\t\t * @property bindEmitter\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.bindEmitter = true;\n\t\t/**\n\t\t * The number of particles per second emit (a [particle]/b [s]);\n\t\t * @property rate\n\t\t * @type {Proton.Rate}\n\t\t * @default Proton.Rate(1, .1)\n\t\t */\n\t\tthis.rate = new Proton.Rate(1, .1);\n\t\tEmitter._super_.call(this, pObj);\n\t\t/**\n\t\t * The emitter's id;\n\t\t * @property id\n\t\t * @type {string}\n\t\t */\n\t\tthis.id = 'emitter_' + Emitter.ID++;\n\t};\n\n\tProton.Util.inherits(Emitter, Proton.Particle);\n\tProton.EventDispatcher.initialize(Emitter.prototype);\n\t/**\n\t * start emit particle\n\t * @method emit\n\t * @param {Number} emitTime begin emit time;\n\t * @param {String} life the life of this emitter\n\t */\n\tEmitter.prototype.emit = function(emitTime, life) {\n\n\t\tthis.emitTime = 0;\n\n\t\tthis.emitTotalTimes = Proton.Util.initValue(emitTime, Infinity);\n\n\t\tif (life == true || life == 'life' || life == 'destroy') {\n\t\t\tif (emitTime == 'once')\n\t\t\t\tthis.life = 1;\n\t\t\telse\n\t\t\t\tthis.life = this.emitTotalTimes;\n\n\t\t} else if (!isNaN(life)) {\n\t\t\tthis.life = life;\n\t\t}\n\n\t\tthis.rate.init();\n\t};\n\n\t/**\n\t * stop emiting\n\t * @method stopEmit\n\t */\n\tEmitter.prototype.stopEmit = function() {\n\t\tthis.emitTotalTimes = -1;\n\t\tthis.emitTime = 0;\n\t};\n\n\t/**\n\t * remove current all particles\n\t * @method removeAllParticles\n\t */\n\tEmitter.prototype.removeAllParticles = function() {\n\t\tfor (var i = 0; i < this.particles.length; i++)\n\t\t\tthis.particles[i].dead = true;\n\t};\n\t/**\n\t * create single particle;\n\t * \n\t * can use emit({x:10},new Gravity(10),{'particleUpdate',fun}) or emit([{x:10},new Initialize],new Gravity(10),{'particleUpdate',fun})\n\t * @method removeAllParticles\n\t */\n\tEmitter.prototype.createParticle = function(initialize, behaviour) {\n\t\tvar particle = Proton.pool.get(Proton.Particle);\n\t\tthis.setupParticle(particle, initialize, behaviour);\n\t\tthis.dispatchEvent(Proton.PARTICLE_CREATED, particle);\n\n\t\treturn particle;\n\t};\n\t/**\n\t * add initialize to this emitter\n\t * @method addSelfInitialize\n\t */\n\tEmitter.prototype.addSelfInitialize = function(pObj) {\n\t\tif (pObj['init']) {\n\t\t\tpObj.init(this);\n\t\t} else {\n\t\t\tthis.initAll();\n\t\t}\n\t};\n\t/**\n\t * add the Initialize to particles;\n\t * \n\t * you can use initializes array:for example emitter.addInitialize(initialize1,initialize2,initialize3);\n\t * @method addInitialize\n\t * @param {Proton.Initialize} initialize like this new Proton.Radius(1, 12)\n\t */\n\tEmitter.prototype.addInitialize = function() {\n\t\tvar length = arguments.length, i;\n\t\tfor ( i = 0; i < length; i++) {\n\t\t\tthis.initializes.push(arguments[i]);\n\t\t}\n\t};\n\t/**\n\t * remove the Initialize\n\t * @method removeInitialize\n\t * @param {Proton.Initialize} initialize a initialize\n\t */\n\tEmitter.prototype.removeInitialize = function(initializer) {\n\t\tvar index = this.initializes.indexOf(initializer);\n\t\tif (index > -1) {\n\t\t\tthis.initializes.splice(index, 1);\n\t\t}\n\t};\n\n\t/**\n\t * remove all Initializes\n\t * @method removeInitializers\n\t */\n\tEmitter.prototype.removeInitializers = function() {\n\t\tProton.Util.destroyArray(this.initializes);\n\t};\n\t/**\n\t * add the Behaviour to particles;\n\t * \n\t * you can use Behaviours array:emitter.addBehaviour(Behaviour1,Behaviour2,Behaviour3);\n\t * @method addBehaviour\n\t * @param {Proton.Behaviour} behaviour like this new Proton.Color('random')\n\t */\n\tEmitter.prototype.addBehaviour = function() {\n\t\tvar length = arguments.length, i;\n\t\tfor ( i = 0; i < length; i++) {\n\t\t\tthis.behaviours.push(arguments[i]);\n\t\t\tif (arguments[i].hasOwnProperty(\"parents\"))\n\t\t\t\targuments[i].parents.push(this);\n\t\t}\n\t};\n\t/**\n\t * remove the Behaviour\n\t * @method removeBehaviour\n\t * @param {Proton.Behaviour} behaviour a behaviour\n\t */\n\tEmitter.prototype.removeBehaviour = function(behaviour) {\n\t\tvar index = this.behaviours.indexOf(behaviour);\n\t\tif (index > -1)\n\t\t\tthis.behaviours.splice(index, 1);\n\t};\n\t/**\n\t * remove all behaviours\n\t * @method removeAllBehaviours\n\t */\n\tEmitter.prototype.removeAllBehaviours = function() {\n\t\tProton.Util.destroyArray(this.behaviours);\n\t};\n\n\tEmitter.prototype.integrate = function(time) {\n\t\tvar damping = 1 - this.damping;\n\t\tProton.integrator.integrate(this, time, damping);\n\t\tvar length = this.particles.length, i;\n\t\tfor ( i = 0; i < length; i++) {\n\t\t\tvar particle = this.particles[i];\n\t\t\tparticle.update(time, i);\n\t\t\tProton.integrator.integrate(particle, time, damping);\n\n\t\t\tthis.dispatchEvent(Proton.PARTICLE_UPDATE, particle);\n\t\t}\n\t};\n\n\tEmitter.prototype.emitting = function(time) {\n\t\tif (this.emitTotalTimes == 'once') {\n\t\t\tvar length = this.rate.getValue(99999), i;\n\t\t\tfor ( i = 0; i < length; i++) {\n\t\t\t\tthis.createParticle();\n\t\t\t}\n\n\t\t\tthis.emitTotalTimes = 'none';\n\t\t} else if (!isNaN(this.emitTotalTimes)) {\n\t\t\tthis.emitTime += time;\n\t\t\tif (this.emitTime < this.emitTotalTimes) {\n\t\t\t\tvar length = this.rate.getValue(time), i;\n\t\t\t\tfor ( i = 0; i < length; i++) {\n\t\t\t\t\tthis.createParticle();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tEmitter.prototype.update = function(time) {\n\t\tthis.age += time;\n\t\tif (this.age >= this.life || this.dead) {\n\t\t\tthis.destroy();\n\t\t}\n\n\t\tthis.emitting(time);\n\t\tthis.integrate(time);\n\t\tvar particle;\n\t\tvar length = this.particles.length, k;\n\t\tfor ( k = length - 1; k >= 0; k--) {\n\t\t\tparticle = this.particles[k];\n\t\t\tif (particle.dead) {\n\t\t\t\tthis.dispatchEvent(Proton.PARTICLE_DEAD , particle);\n\n\t\t\t\tProton.pool.set(particle);\n\t\t\t\tthis.particles.splice(k, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tEmitter.prototype.setupParticle = function(particle, initialize, behaviour) {\n\t\tvar initializes = this.initializes;\n\t\tvar behaviours = this.behaviours;\n\n\t\tif (initialize) {\n\t\t\tif ( initialize instanceof Array)\n\t\t\t\tinitializes = initialize;\n\t\t\telse\n\t\t\t\tinitializes = [initialize];\n\t\t}\n\n\t\tif (behaviour) {\n\t\t\tif ( behaviour instanceof Array)\n\t\t\t\tbehaviours = behaviour;\n\t\t\telse\n\t\t\t\tbehaviours = [behaviour];\n\t\t}\n\n\t\tparticle.reset();\n\t\tProton.InitializeUtil.initialize(this, particle, initializes);\n\t\tparticle.addBehaviours(behaviours);\n\t\tparticle.parent = this;\n\t\tthis.particles.push(particle);\n\t};\n\n\t/**\n\t * Destory this Emitter\n\t * @method destroy\n\t */\n\tEmitter.prototype.destroy = function() {\n\t\tthis.dead = true;\n\t\tthis.emitTotalTimes = -1;\n\t\tif (this.particles.length == 0) {\n\t\t\tthis.removeInitializers();\n\t\t\tthis.removeAllBehaviours();\n\n\t\t\tif (this.parent)\n\t\t\t\tthis.parent.removeEmitter(this);\n\t\t}\n\t}\n\n\tProton.Emitter = Emitter;\n\n\n\n\t/**\n\t * The BehaviourEmitter class inherits from Proton.Emitter\n\t *\n\t * use the BehaviourEmitter you can add behaviours to self;\n\t * @class Proton.BehaviourEmitter\n\t * @constructor\n\t * @param {Object} pObj the parameters object;\n\t */\n\tfunction BehaviourEmitter(pObj) {\n\t\tthis.selfBehaviours = [];\n\t\tBehaviourEmitter._super_.call(this, pObj);\n\t};\n\n\tProton.Util.inherits(BehaviourEmitter, Proton.Emitter);\n\t/**\n\t * add the Behaviour to emitter;\n\t *\n\t * you can use Behaviours array:emitter.addSelfBehaviour(Behaviour1,Behaviour2,Behaviour3);\n\t * @method addSelfBehaviour\n\t * @param {Proton.Behaviour} behaviour like this new Proton.Color('random')\n\t */\n\tBehaviourEmitter.prototype.addSelfBehaviour = function() {\n\t\tvar length = arguments.length, i;\n\t\tfor ( i = 0; i < length; i++) {\n\t\t\tthis.selfBehaviours.push(arguments[i]);\n\t\t}\n\t};\n\t/**\n\t * remove the Behaviour for self\n\t * @method removeSelfBehaviour\n\t * @param {Proton.Behaviour} behaviour a behaviour\n\t */\n\tBehaviourEmitter.prototype.removeSelfBehaviour = function(behaviour) {\n\t\tvar index = this.selfBehaviours.indexOf(behaviour);\n\t\tif (index > -1)\n\t\t\tthis.selfBehaviours.splice(index, 1);\n\t};\n\n\tBehaviourEmitter.prototype.update = function(time) {\n\t\tBehaviourEmitter._super_.prototype.update.call(this, time);\n\n\t\tif (!this.sleep) {\n\t\t\tvar length = this.selfBehaviours.length, i;\n\t\t\tfor ( i = 0; i < length; i++) {\n\t\t\t\tthis.selfBehaviours[i].applyBehaviour(this, time, i)\n\t\t\t}\n\t\t}\n\t}\n\n\tProton.BehaviourEmitter = BehaviourEmitter;\n\n\n\n\t/**\n\t * The FollowEmitter class inherits from Proton.Emitter\n\t *\n\t * use the FollowEmitter will emit particle when mousemoving\n\t *\n\t * @class Proton.FollowEmitter\n\t * @constructor\n\t * @param {Element} mouseTarget mouseevent's target;\n\t * @param {Number} ease the easing of following speed;\n\t * @default 0.7\n\t * @param {Object} pObj the parameters object;\n\t */\n\tfunction FollowEmitter(mouseTarget, ease, pObj) {\n\t\tthis.mouseTarget = Proton.Util.initValue(mouseTarget, window);\n\t\tthis.ease = Proton.Util.initValue(ease, .7);\n\t\tthis._allowEmitting = false;\n\t\tthis.initEventHandler();\n\t\tFollowEmitter._super_.call(this, pObj);\n\t};\n\n\tProton.Util.inherits(FollowEmitter, Proton.Emitter);\n\tFollowEmitter.prototype.initEventHandler = function() {\n\t\tvar self = this;\n\t\tthis.mousemoveHandler = function(e) {\n\t\t\tself.mousemove.call(self, e);\n\t\t};\n\n\t\tthis.mousedownHandler = function(e) {\n\t\t\tself.mousedown.call(self, e);\n\t\t};\n\n\t\tthis.mouseupHandler = function(e) {\n\t\t\tself.mouseup.call(self, e);\n\t\t};\n\t\tthis.mouseTarget.addEventListener('mousemove', this.mousemoveHandler, false);\n\t}\n\t/**\n\t * start emit particle\n\t * @method emit\n\t */\n\tFollowEmitter.prototype.emit = function() {\n\t\tthis._allowEmitting = true;\n\t}\n\t/**\n\t * stop emiting\n\t * @method stopEmit\n\t */\n\tFollowEmitter.prototype.stopEmit = function() {\n\t\tthis._allowEmitting = false;\n\t}\n\n\tFollowEmitter.prototype.mousemove = function(e) {\n\t\tif (e.layerX || e.layerX == 0) {\n\t\t\tthis.p.x += (e.layerX - this.p.x) * this.ease;\n\t\t\tthis.p.y += (e.layerY - this.p.y) * this.ease;\n\t\t} else if (e.offsetX || e.offsetX == 0) {\n\t\t\tthis.p.x += (e.offsetX - this.p.x) * this.ease;\n\t\t\tthis.p.y += (e.offsetY - this.p.y) * this.ease;\n\t\t}\n\t\tif (this._allowEmitting)\n\t\t\tFollowEmitter._super_.prototype.emit.call(this, 'once');\n\t};\n\t/**\n\t * Destory this Emitter\n\t * @method destroy\n\t */\n\tFollowEmitter.prototype.destroy = function() {\n\t\tFollowEmitter._super_.prototype.destroy.call(this);\n\t\tthis.mouseTarget.removeEventListener('mousemove', this.mousemoveHandler, false);\n\t}\n\n\tProton.FollowEmitter = FollowEmitter;\n\n\n\n\tvar ease = ease || {\n\t\teaseLinear : function(value) {\n\t\t\treturn value;\n\t\t},\n\n\t\teaseInQuad : function(value) {\n\t\t\treturn Math.pow(value, 2);\n\t\t},\n\n\t\teaseOutQuad : function(value) {\n\t\t\treturn -(Math.pow((value - 1), 2) - 1);\n\t\t},\n\n\t\teaseInOutQuad : function(value) {\n\t\t\tif ((value /= 0.5) < 1)\n\t\t\t\treturn 0.5 * Math.pow(value, 2);\n\t\t\treturn -0.5 * ((value -= 2) * value - 2);\n\t\t},\n\n\t\teaseInCubic : function(value) {\n\t\t\treturn Math.pow(value, 3);\n\t\t},\n\n\t\teaseOutCubic : function(value) {\n\t\t\treturn (Math.pow((value - 1), 3) + 1);\n\t\t},\n\n\t\teaseInOutCubic : function(value) {\n\t\t\tif ((value /= 0.5) < 1)\n\t\t\t\treturn 0.5 * Math.pow(value, 3);\n\t\t\treturn 0.5 * (Math.pow((value - 2), 3) + 2);\n\t\t},\n\n\t\teaseInQuart : function(value) {\n\t\t\treturn Math.pow(value, 4);\n\t\t},\n\n\t\teaseOutQuart : function(value) {\n\t\t\treturn -(Math.pow((value - 1), 4) - 1);\n\t\t},\n\n\t\teaseInOutQuart : function(value) {\n\t\t\tif ((value /= 0.5) < 1)\n\t\t\t\treturn 0.5 * Math.pow(value, 4);\n\t\t\treturn -0.5 * ((value -= 2) * Math.pow(value, 3) - 2);\n\t\t},\n\t\n\t\teaseInSine : function(value) {\n\t\t\treturn -Math.cos(value * (Math.PI / 2)) + 1;\n\t\t},\n\n\t\teaseOutSine : function(value) {\n\t\t\treturn Math.sin(value * (Math.PI / 2));\n\t\t},\n\n\t\teaseInOutSine : function(value) {\n\t\t\treturn (-0.5 * (Math.cos(Math.PI * value) - 1));\n\t\t},\n\n\t\teaseInExpo : function(value) {\n\t\t\treturn (value === 0) ? 0 : Math.pow(2, 10 * (value - 1));\n\t\t},\n\n\t\teaseOutExpo : function(value) {\n\t\t\treturn (value === 1) ? 1 : -Math.pow(2, -10 * value) + 1;\n\t\t},\n\n\t\teaseInOutExpo : function(value) {\n\t\t\tif (value === 0)\n\t\t\t\treturn 0;\n\t\t\tif (value === 1)\n\t\t\t\treturn 1;\n\t\t\tif ((value /= 0.5) < 1)\n\t\t\t\treturn 0.5 * Math.pow(2, 10 * (value - 1));\n\t\t\treturn 0.5 * (-Math.pow(2, -10 * --value) + 2);\n\t\t},\n\n\t\teaseInCirc : function(value) {\n\t\t\treturn -(Math.sqrt(1 - (value * value)) - 1);\n\t\t},\n\n\t\teaseOutCirc : function(value) {\n\t\t\treturn Math.sqrt(1 - Math.pow((value - 1), 2));\n\t\t},\n\n\t\teaseInOutCirc : function(value) {\n\t\t\tif ((value /= 0.5) < 1)\n\t\t\t\treturn -0.5 * (Math.sqrt(1 - value * value) - 1);\n\t\t\treturn 0.5 * (Math.sqrt(1 - (value -= 2) * value) + 1);\n\t\t},\n\t\t\n\t\teaseInBack : function(value) {\n\t\t\tvar s = 1.70158;\n\t\t\treturn (value) * value * ((s + 1) * value - s);\n\t\t},\n\n\t\teaseOutBack : function(value) {\n\t\t\tvar s = 1.70158;\n\t\t\treturn ( value = value - 1) * value * ((s + 1) * value + s) + 1;\n\t\t},\n\n\t\teaseInOutBack : function(value) {\n\t\t\tvar s = 1.70158;\n\t\t\tif ((value /= 0.5) < 1)\n\t\t\t\treturn 0.5 * (value * value * (((s *= (1.525)) + 1) * value - s));\n\t\t\treturn 0.5 * ((value -= 2) * value * (((s *= (1.525)) + 1) * value + s) + 2);\n\t\t},\n\n\t\tsetEasingByName: function(easeName) {\n            if (!!ease[easeName])\n                return ease[easeName];\n            else\n                return ease.easeLinear;\n        }\n\t}\n\n\tfor (var key in ease) {\n        if (key != \"setEasingByName\") Proton[key] = ease[key];\n    }\n\n    Proton.ease = ease;\n\t\n\n\n//the own renderer\n\n\tfunction Renderer(type, proton, element) {\n\t\t///element dom/div canvas/canvas easeljs/cantainer(or stage)\n\t\tthis.element = element;\n\t\tthis.type = Proton.Util.initValue(type, 'canvas');\n\t\tthis.proton = proton;\n\t\tthis.renderer = this.getRenderer();\n\t}\n\n\n\tRenderer.prototype = {\n\t\tstart : function() {\n\t\t\tthis.addEventHandler();\n\t\t\tthis.renderer.start();\n\t\t},\n\t\tstop : function() {\n\t\t\tthis.renderer.stop();\n\t\t},\n\n\t\tresize : function(width, height) {\n\t\t\tthis.renderer.resize(width, height);\n\t\t},\n\t\tsetStroke : function(color, thinkness) {\n\t\t\tif (this.renderer.hasOwnProperty('stroke'))\n\t\t\t\tthis.renderer.setStroke(color, thinkness);\n\t\t\telse\n\t\t\t\talert('Sorry this renderer do not suppest stroke method!');\n\t\t},\n\t\tcreateImageData : function(data) {\n\t\t\tif (this.renderer instanceof Proton.PixelRender)\n\t\t\t\tthis.renderer.createImageData(data);\n\t\t},\n\t\tsetMaxRadius : function(radius) {\n\t\t\tif (this.renderer instanceof Proton.WebGLRender)\n\t\t\t\tthis.renderer.setMaxRadius(radius);\n\t\t},\n\t\tblendEquation : function(A) {\n\t\t\tif (this.renderer instanceof Proton.WebGLRender)\n\t\t\t\tthis.renderer.blendEquation(A);\n\t\t},\n\t\tblendFunc : function(A, B) {\n\t\t\tif (this.renderer instanceof Proton.WebGLRender)\n\t\t\t\tthis.renderer.blendFunc(A, B);\n\t\t},\n\t\tsetType : function(type) {\n\t\t\tthis.type = type;\n\t\t\tthis.renderer = this.getRenderer();\n\t\t},\n\t\tgetRenderer : function() {\n\t\t\tswitch(this.type) {\n\t\t\t\tcase 'pixi':\n\t\t\t\t\treturn new Proton.PixiRender(this.proton, this.element);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'dom':\n\t\t\t\t\treturn new Proton.DomRender(this.proton, this.element);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'canvas':\n\t\t\t\t\treturn new Proton.CanvasRender(this.proton, this.element);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'webgl':\n\t\t\t\t\treturn new Proton.WebGLRender(this.proton, this.element);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'easel':\n\t\t\t\t\treturn new Proton.EaselRender(this.proton, this.element);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'easeljs':\n\t\t\t\t\treturn new Proton.EaselRender(this.proton, this.element);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'pixel':\n\t\t\t\t\treturn new Proton.PixelRender(this.proton, this.element);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn new Proton.BaseRender(this.proton, this.element);\n\t\t\t}\n\t\t},\n\t\trender : function(callback) {\n\t\t\tthis.renderer.render(callback);\n\t\t},\n\t\taddEventHandler : function() {\n\t\t\tif (this.onProtonUpdate)\n\t\t\t\tthis.renderer.onProtonUpdate = this.onProtonUpdate;\n\n\t\t\tif (this.onParticleCreated)\n\t\t\t\tthis.renderer.onParticleCreated = this.onParticleCreated;\n\n\t\t\tif (this.onParticleUpdate)\n\t\t\t\tthis.renderer.onParticleUpdate = this.onParticleUpdate;\n\n\t\t\tif (this.onParticleDead)\n\t\t\t\tthis.renderer.onParticleDead = this.onParticleDead;\n\t\t}\n\t}\n\n\tProton.Renderer = Renderer;\n\n\n\n\tfunction BaseRender(proton, element, stroke) {\n\t\tthis.proton = proton;\n\t\tthis.element = element;\n\t\tthis.stroke = stroke;\n\t\tthis.pool = new Proton.Pool();\n\t}\n\n\n\tBaseRender.prototype = {\n\t\tstart : function() {\n\t\t\tvar self = this;\n\t\t\tthis.proton.addEventListener(Proton.PROTON_UPDATE, function() {\n\t\t\t\tself.onProtonUpdate.call(self);\n\t\t\t});\n\n\t\t\tthis.proton.addEventListener(Proton.PROTON_UPDATE_AFTER, function() {\n\t\t\t\tself.onProtonUpdateAfter.call(self);\n\t\t\t});\n\n\t\t\tthis.proton.addEventListener(Proton.EMITTER_ADDED, function(emitter) {\n\t\t\t\tself.onEmitterAdded.call(self, emitter);\n\t\t\t});\n\n\t\t\tthis.proton.addEventListener(Proton.EMITTER_REMOVED, function(emitter) {\n\t\t\t\tself.onEmitterRemoved.call(self, emitter);\n\t\t\t});\n\n\t\t\tvar length = this.proton.emitters.length, i;\n\t\t\tfor ( i = 0; i < length; i++) {\n\t\t\t\tvar emitter = this.proton.emitters[i];\n\t\t\t\tthis.addEmitterListener(emitter);\n\t\t\t}\n\t\t},\n\n\t\tresize : function(width, height) {\n\t\t},\n\n\t\taddEmitterListener : function(emitter) {\n\t\t\tvar self = this;\n\t\t\temitter.addEventListener(Proton.PARTICLE_CREATED, function(particle) {\n\t\t\t\tself.onParticleCreated.call(self, particle);\n\t\t\t});\n\t\t\temitter.addEventListener(Proton.PARTICLE_UPDATE, function(particle) {\n\t\t\t\tself.onParticleUpdate.call(self, particle);\n\t\t\t});\n\t\t\temitter.addEventListener(Proton.PARTICLE_DEAD, function(particle) {\n\t\t\t\tself.onParticleDead.call(self, particle);\n\t\t\t});\n\t\t},\n\n\t\tstop : function() {\n\t\t\tvar length = this.proton.emitters.length, i;\n\t\t\tthis.proton.removeAllEventListeners();\n\t\t\tfor ( i = 0; i < length; i++) {\n\t\t\t\tvar emitter = this.proton.emitters[i];\n\t\t\t\temitter.removeAllEventListeners();\n\t\t\t}\n\t\t},\n\n\t\tonEmitterAdded : function(emitter) {\n\t\t\tthis.addEmitterListener(emitter);\n\t\t},\n\n\t\tonEmitterRemoved : function(emitter) {\n\t\t\temitter.removeAllEventListeners();\n\t\t},\n\n\t\tonProtonUpdate : function() {\n\n\t\t},\n\n\t\tonProtonUpdateAfter : function() {\n\n\t\t},\n\n\t\tonParticleCreated : function(particle) {\n\n\t\t},\n\n\t\tonParticleUpdate : function(particle) {\n\n\t\t},\n\n\t\tonParticleDead : function(particle) {\n\n\t\t}\n\t}\n\n\tProton.BaseRender = BaseRender;\n\n\n\n\tfunction DomRender(proton, element) {\n\t\tDomRender._super_.call(this, proton, element);\n\t\tthis.stroke = null;\n\t}\n\n\n\tProton.Util.inherits(DomRender, Proton.BaseRender);\n\n\tDomRender.prototype.start = function() {\n\t\tDomRender._super_.prototype.start.call(this);\n\t}\n\n\tDomRender.prototype.setStroke = function(color, thinkness) {\n\t\tcolor = Proton.Util.initValue(color, '#000000');\n\t\tthinkness = Proton.Util.initValue(thinkness, 1);\n\t\tthis.stroke = {\n\t\t\tcolor : color,\n\t\t\tthinkness : thinkness\n\t\t};\n\t}\n\n\tDomRender.prototype.onProtonUpdate = function() {\n\t}\n\n\tDomRender.prototype.onParticleCreated = function(particle) {\n\t\tif (particle.target) {\n\t\t\tvar self = this;\n\t\t\tProton.Util.getImage(particle.target, particle, false, function(particle) {\n\t\t\t\tself.setImgInDIV.call(self, particle);\n\t\t\t});\n\t\t} else {\n\t\t\tparticle.transform.canvas = Proton.DomUtil.createCanvas(particle.id + '_canvas', particle.radius + 1, particle.radius + 1, 'absolute');\n\t\t\tparticle.transform.bakOldRadius = particle.radius;\n\n\t\t\tif (this.stroke) {\n\t\t\t\tparticle.transform.canvas.width = 2 * particle.radius + this.stroke.thinkness * 2;\n\t\t\t\tparticle.transform.canvas.height = 2 * particle.radius + this.stroke.thinkness * 2;\n\t\t\t} else {\n\t\t\t\tparticle.transform.canvas.width = 2 * particle.radius + 1;\n\t\t\t\tparticle.transform.canvas.height = 2 * particle.radius + 1;\n\t\t\t}\n\n\t\t\tparticle.transform.context = particle.transform.canvas.getContext('2d');\n\t\t\tparticle.transform.context.fillStyle = particle.color;\n\t\t\tparticle.transform.context.beginPath();\n\t\t\tparticle.transform.context.arc(particle.radius, particle.radius, particle.radius, 0, Math.PI * 2, true);\n\n\t\t\tif (this.stroke) {\n\t\t\t\tparticle.transform.context.strokeStyle = this.stroke.color;\n\t\t\t\tparticle.transform.context.lineWidth = this.stroke.thinkness;\n\t\t\t\tparticle.transform.context.stroke();\n\t\t\t}\n\n\t\t\tparticle.transform.context.closePath();\n\t\t\tparticle.transform.context.fill();\n\t\t\tthis.element.appendChild(particle.transform.canvas);\n\t\t}\n\n\t}\n\n\tDomRender.prototype.onParticleUpdate = function(particle) {\n\t\tif (particle.target) {\n\t\t\tif (particle.target instanceof Image) {\n\t\t\t\tparticle.transform.canvas.style.opacity = particle.alpha;\n\t\t\t\tProton.DomUtil.transformDom(particle.transform.canvas, particle.p.x - particle.target.width / 2, particle.p.y - particle.target.height / 2, particle.scale, particle.rotation);\n\t\t\t}\n\t\t} else {\n\t\t\tparticle.transform.canvas.style.opacity = particle.alpha;\n\t\t\tif (particle.transform['oldRadius'])\n\t\t\t\tProton.DomUtil.transformDom(particle.transform.canvas, particle.p.x - particle.transform.oldRadius, particle.p.y - particle.transform.oldRadius, particle.scale, particle.rotation);\n\t\t\telse\n\t\t\t\tProton.DomUtil.transformDom(particle.transform.canvas, particle.p.x - particle.transform.bakOldRadius, particle.p.y - particle.transform.bakOldRadius, particle.scale, particle.rotation);\n\t\t}\n\t}\n\n\tDomRender.prototype.onParticleDead = function(particle) {\n\t\tif (particle.transform.canvas)\n\t\t\tthis.element.removeChild(particle.transform.canvas);\n\t}\n\n\tDomRender.prototype.setImgInDIV = function(particle) {\n\t\tparticle.transform.canvas = Proton.DomUtil.createCanvas(particle.id + '_canvas', particle.target.width + 1, particle.target.height + 1, 'absolute', particle.p.x - particle.radius, particle.p.y - particle.radius);\n\t\tparticle.transform.context = particle.transform.canvas.getContext('2d');\n\t\tparticle.transform.context.drawImage(particle.target, 0, 0, particle.target.width, particle.target.height);\n\t\tthis.element.appendChild(particle.transform.canvas);\n\t}\n\n\tProton.DomRender = DomRender;\n\n\n\n    function EaselRender(proton, element, stroke) {\n        EaselRender._super_.call(this, proton, element);\n        this.stroke = stroke;\n    }\n\n\n    Proton.Util.inherits(EaselRender, Proton.BaseRender);\n    EaselRender.prototype.resize = function(width, height) {\n\n    }\n    EaselRender.prototype.start = function() {\n        EaselRender._super_.prototype.start.call(this);\n    };\n\n    EaselRender.prototype.onProtonUpdate = function() {\n\n    }\n\n    EaselRender.prototype.onParticleCreated = function(particle) {\n        if (particle.target) {\n            particle.target = this.pool.get(particle.target);\n            if (!particle.target.parent) {\n                if (!!particle.target['image']) {\n                    particle.target.regX = particle.target.image.width / 2;\n                    particle.target.regY = particle.target.image.height / 2;\n                }\n                this.element.addChild(particle.target);\n            }\n        } else {\n            var graphics = this.pool.get(createjs.Graphics);\n            if (this.stroke) {\n                if (this.stroke == true) {\n                    graphics.beginStroke('#000000');\n                } else if (this.stroke instanceof String) {\n                    graphics.beginStroke(this.stroke);\n                }\n            }\n\n            graphics.beginFill(particle.color).drawCircle(0, 0, particle.radius);\n            var shape = new createjs.Shape(graphics);\n            particle.target = shape;\n            this.element.addChild(particle.target);\n        }\n    }\n\n    EaselRender.prototype.onParticleUpdate = function(particle) {\n        if (particle.target) {\n            particle.target.x = particle.p.x;\n            particle.target.y = particle.p.y;\n            particle.target.alpha = particle.alpha;\n            particle.target.scaleX = particle.target.scaleY = particle.scale;\n            particle.target.rotation = particle.rotation;\n        }\n    }\n\n    EaselRender.prototype.onParticleDead = function(particle) {\n        if (particle.target) {\n            particle.target.parent && particle.target.parent.removeChild(particle.target);\n            this.pool.set(particle.target);\n            particle.target = null;\n        }\n    }\n\n    Proton.EaselRender = EaselRender;\n\n\n\n\tfunction CanvasRender(proton, element) {\n\t\tCanvasRender._super_.call(this, proton, element);\n\t\tthis.stroke = null;\n\t\tthis.context = this.element.getContext(\"2d\");\n\t\tthis.bufferCache = {};\n\t}\n\n\n\tProton.Util.inherits(CanvasRender, Proton.BaseRender);\n\tCanvasRender.prototype.resize = function(width, height) {\n\t\tthis.element.width = width;\n\t\tthis.element.height = height;\n\t}\n\tCanvasRender.prototype.start = function() {\n\t\tCanvasRender._super_.prototype.start.call(this);\n\t}\n\n\tCanvasRender.prototype.setStroke = function(color, thinkness) {\n\t\tcolor = Proton.Util.initValue(color, '#000000');\n\t\tthinkness = Proton.Util.initValue(thinkness, 1);\n\t\tthis.stroke = {\n\t\t\tcolor : color,\n\t\t\tthinkness : thinkness\n\t\t};\n\t}\n\n\tCanvasRender.prototype.onProtonUpdate = function() {\n\t\t//this.context.clearRect(0, 0, this.element.width, this.element.height);\n\t}\n\n\tCanvasRender.prototype.onParticleCreated = function(particle) {\n\t\tif (particle.target)\n\t\t\tProton.Util.getImage(particle.target, particle, false);\n\t\telse\n\t\t\tparticle.color = particle.color ? particle.color : '#ff0000';\n\t}\n\n\tCanvasRender.prototype.onParticleUpdate = function(particle) {\n\t\tif (particle.target) {\n\t\t\tif (particle.target instanceof Image) {\n\t\t\t\tvar w = particle.target.width * particle.scale | 0;\n\t\t\t\tvar h = particle.target.height * particle.scale | 0;\n\t\t\t\tvar x = particle.p.x - w / 2;\n\t\t\t\tvar y = particle.p.y - h / 2;\n\n\t\t\t\tif (!!particle.color) {\n\t\t\t\t\tif (!particle.transform[\"buffer\"])\n\t\t\t\t\t\tparticle.transform.buffer = this.getBuffer(particle.target);\n\t\t\t\t\tvar bufferContext = particle.transform.buffer.getContext('2d');\n\t\t\t\t\tbufferContext.clearRect(0, 0, particle.transform.buffer.width, particle.transform.buffer.height);\n\t\t\t\t\tbufferContext.globalAlpha = particle.alpha;\n\t\t\t\t\tbufferContext.drawImage(particle.target, 0, 0);\n\t\t\t\t\tbufferContext.globalCompositeOperation = \"source-atop\";\n\t\t\t\t\tbufferContext.fillStyle = Proton.Util.rgbToHex(particle.transform.rgb);\n\t\t\t\t\tbufferContext.fillRect(0, 0, particle.transform.buffer.width, particle.transform.buffer.height);\n\t\t\t\t\tbufferContext.globalCompositeOperation = \"source-over\";\n\t\t\t\t\tbufferContext.globalAlpha = 1;\n\t\t\t\t\tthis.context.drawImage(particle.transform.buffer, 0, 0, particle.transform.buffer.width, particle.transform.buffer.height, x, y, w, h);\n\t\t\t\t} else {\n\t\t\t\t\tthis.context.save();\n\t\t\t\t\tthis.context.globalAlpha = particle.alpha;\n\t\t\t\t\tthis.context.translate(particle.p.x, particle.p.y);\n\t\t\t\t\tthis.context.rotate(Proton.MathUtils.degreeTransform(particle.rotation));\n\t\t\t\t\tthis.context.translate(-particle.p.x, -particle.p.y);\n\t\t\t\t\tthis.context.drawImage(particle.target, 0, 0, particle.target.width, particle.target.height, x, y, w, h);\n\t\t\t\t\tthis.context.globalAlpha = 1;\n\t\t\t\t\tthis.context.restore();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (particle.transform[\"rgb\"])\n\t\t\t\tthis.context.fillStyle = 'rgba(' + particle.transform.rgb.r + ',' + particle.transform.rgb.g + ',' + particle.transform.rgb.b + ',' + particle.alpha + ')';\n\t\t\telse\n\t\t\t\tthis.context.fillStyle = particle.color;\n\t\t\tthis.context.beginPath();\n\t\t\tthis.context.arc(particle.p.x, particle.p.y, particle.radius, 0, Math.PI * 2, true);\n\t\t\tif (this.stroke) {\n\t\t\t\tthis.context.strokeStyle = this.stroke.color;\n\t\t\t\tthis.context.lineWidth = this.stroke.thinkness;\n\t\t\t\tthis.context.stroke();\n\t\t\t}\n\n\t\t\tthis.context.closePath();\n\t\t\tthis.context.fill();\n\t\t}\n\t}\n\n\tCanvasRender.prototype.onParticleDead = function(particle) {\n\n\t}\n\n\tCanvasRender.prototype.getBuffer = function(image) {\n\t\tif ( image instanceof Image) {\n\t\t\tvar size = image.width + '_' + image.height;\n\t\t\tvar canvas = this.bufferCache[size];\n\t\t\tif (!canvas) {\n\t\t\t\tcanvas = document.createElement('canvas');\n\t\t\t\tcanvas.width = image.width;\n\t\t\t\tcanvas.height = image.height;\n\t\t\t\tthis.bufferCache[size] = canvas;\n\t\t\t}\n\t\t\treturn canvas;\n\t\t}\n\t}\n\n\tProton.CanvasRender = CanvasRender;\n\n\n\n\tfunction PixelRender(proton, element, rectangle) {\n\t\tPixelRender._super_.call(this, proton, element);\n\t\tthis.context = this.element.getContext('2d');\n\t\tthis.imageData = null;\n\t\tthis.rectangle = null;\n\t\tthis.rectangle = rectangle;\n\t\tthis.createImageData(rectangle);\n\t}\n\n\n\tProton.Util.inherits(PixelRender, Proton.BaseRender);\n\tPixelRender.prototype.resize = function(width, height) {\n\t\tthis.element.width = width;\n\t\tthis.element.height = height;\n\t}\n\tPixelRender.prototype.createImageData = function(rectangle) {\n\t\tif (!rectangle)\n\t\t\tthis.rectangle = new Proton.Rectangle(0, 0, this.element.width, this.element.height);\n\t\telse\n\t\t\tthis.rectangle = rectangle;\n\t\tthis.imageData = this.context.createImageData(this.rectangle.width, this.rectangle.height);\n\t\tthis.context.putImageData(this.imageData, this.rectangle.x, this.rectangle.y);\n\t}\n\n\tPixelRender.prototype.start = function() {\n\t\tPixelRender._super_.prototype.start.call(this);\n\t};\n\n\tPixelRender.prototype.onProtonUpdate = function() {\n\t\t//this.context.clearRect(this.rectangle.x, this.rectangle.y, this.rectangle.width, this.rectangle.height);\n\t\tthis.imageData = this.context.getImageData(this.rectangle.x, this.rectangle.y, this.rectangle.width, this.rectangle.height);\n\t}\n\n\tPixelRender.prototype.onProtonUpdateAfter = function() {\n\t\tthis.context.putImageData(this.imageData, this.rectangle.x, this.rectangle.y);\n\t}\n\n\tPixelRender.prototype.onParticleCreated = function(particle) {\n\n\t}\n\n\tPixelRender.prototype.onParticleUpdate = function(particle) {\n\t\tif (this.imageData) {\n\t\t\tthis.setPixel(this.imageData, Math.floor(particle.p.x - this.rectangle.x), Math.floor(particle.p.y - this.rectangle.y), particle);\n\t\t}\n\t}\n\n\tPixelRender.prototype.setPixel = function(imagedata, x, y, particle) {\n\t\tvar rgb = particle.transform.rgb;\n\t\tif ((x < 0) || (x > this.element.width) || (y < 0) || (y > this.elementwidth))\n\t\t\treturn;\n\n\t\tvar i = ((y >> 0) * imagedata.width + (x >> 0)) * 4;\n\n\t\timagedata.data[i] = rgb.r;\n\t\timagedata.data[i + 1] = rgb.g;\n\t\timagedata.data[i + 2] = rgb.b;\n\t\timagedata.data[i + 3] = particle.alpha * 255;\n\t}\n\n\tPixelRender.prototype.onParticleDead = function(particle) {\n\n\t}\n\n\tProton.PixelRender = PixelRender;\n\n\n\n\tfunction WebGLRender(proton, element) {\n\t\tWebGLRender._super_.call(this, proton, element);\n\t\tthis.gl = this.element.getContext('experimental-webgl', {\n\t\t\tantialias : true,\n\t\t\tstencil : false,\n\t\t\tdepth : false\n\t\t});\n\t\tif (!this.gl)\n\t\t\talert(\"Sorry your browser do not suppest WebGL!\");\n\t\tthis.initVar();\n\t\tthis.setMaxRadius();\n\t\tthis.initShaders();\n\t\tthis.initBuffers();\n\t\tthis.gl.blendEquation(this.gl.FUNC_ADD);\n\t\tthis.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n\t\tthis.gl.enable(this.gl.BLEND);\n\t}\n\n\n\tProton.Util.inherits(WebGLRender, Proton.BaseRender);\n\tWebGLRender.prototype.resize = function(width, height) {\n\t\tthis.umat[4] = -2;\n\t\tthis.umat[7] = 1;\n\t\tthis.smat[0] = 1 / width;\n\t\tthis.smat[4] = 1 / height;\n\t\tthis.mstack.set(this.umat, 0);\n\t\tthis.mstack.set(this.smat, 1);\n\t\tthis.gl.viewport(0, 0, width, height);\n\t\tthis.element.width = width;\n\t\tthis.element.height = height;\n\t}\n\n\tWebGLRender.prototype.setMaxRadius = function(radius) {\n\t\tthis.circleCanvasURL = this.createCircle(radius);\n\t}\n\n\tWebGLRender.prototype.getVertexShader = function() {\n\t\tvar vsSource = [\"uniform vec2 viewport;\", \"attribute vec2 aVertexPosition;\", \"attribute vec2 aTextureCoord;\", \"uniform mat3 tMat;\", \"varying vec2 vTextureCoord;\", \"varying float alpha;\", \"void main() {\", \"vec3 v = tMat * vec3(aVertexPosition, 1.0);\", \"gl_Position = vec4(v.x, v.y, 0, 1);\", \"vTextureCoord = aTextureCoord;\", \"alpha = tMat[0][2];\", \"}\"].join(\"\\n\");\n\t\treturn vsSource;\n\t}\n\n\tWebGLRender.prototype.getFragmentShader = function() {\n\t\tvar fsSource = [\"precision mediump float;\", \"varying vec2 vTextureCoord;\", \"varying float alpha;\", \"uniform sampler2D uSampler;\", \"uniform vec4 color;\", \"uniform bool useTexture;\", \"uniform vec3 uColor;\", \"void main() {\", \"vec4 textureColor = texture2D(uSampler, vTextureCoord);\", \"gl_FragColor = textureColor * vec4(uColor, 1.0);\", \"gl_FragColor.w *= alpha;\", \"}\"].join(\"\\n\");\n\t\treturn fsSource;\n\t}\n\n\tWebGLRender.prototype.initVar = function() {\n\t\tthis.mstack = new Proton.MStack();\n\t\tthis.umat = Proton.Mat3.create([2, 0, 1, 0, -2, 0, -1, 1, 1]);\n\t\tthis.smat = Proton.Mat3.create([1 / 100, 0, 1, 0, 1 / 100, 0, 0, 0, 1]);\n\t\tthis.texturebuffers = {};\n\t}\n\n\tWebGLRender.prototype.start = function() {\n\t\tWebGLRender._super_.prototype.start.call(this);\n\t\tthis.resize(this.element.width, this.element.height);\n\t}\n\n\tWebGLRender.prototype.blendEquation = function(A) {\n\t\tthis.gl.blendEquation(this.gl[A]);\n\t}\n\n\tWebGLRender.prototype.blendFunc = function(A, B) {\n\t\tthis.gl.blendFunc(this.gl[A], this.gl[B]);\n\t}\n\n\tWebGLRender.prototype.getShader = function(gl, str, fs) {\n\t\tvar shader;\n\t\tif (fs)\n\t\t\tshader = gl.createShader(gl.FRAGMENT_SHADER);\n\t\telse\n\t\t\tshader = gl.createShader(gl.VERTEX_SHADER);\n\t\tgl.shaderSource(shader, str);\n\t\tgl.compileShader(shader);\n\n\t\tif (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n\t\t\talert(gl.getShaderInfoLog(shader));\n\t\t\treturn null;\n\t\t}\n\t\treturn shader;\n\t}\n\n\tWebGLRender.prototype.initShaders = function() {\n\t\tvar fragmentShader = this.getShader(this.gl, this.getFragmentShader(), true);\n\t\tvar vertexShader = this.getShader(this.gl, this.getVertexShader(), false);\n\n\t\tthis.sprogram = this.gl.createProgram();\n\t\tthis.gl.attachShader(this.sprogram, vertexShader);\n\t\tthis.gl.attachShader(this.sprogram, fragmentShader);\n\t\tthis.gl.linkProgram(this.sprogram);\n\t\tif (!this.gl.getProgramParameter(this.sprogram, this.gl.LINK_STATUS))\n\t\t\talert(\"Could not initialise shaders\");\n\n\t\tthis.gl.useProgram(this.sprogram);\n\t\tthis.sprogram.vpa = this.gl.getAttribLocation(this.sprogram, \"aVertexPosition\");\n\t\tthis.sprogram.tca = this.gl.getAttribLocation(this.sprogram, \"aTextureCoord\");\n\t\tthis.gl.enableVertexAttribArray(this.sprogram.tca);\n\t\tthis.gl.enableVertexAttribArray(this.sprogram.vpa);\n\n\t\tthis.sprogram.tMatUniform = this.gl.getUniformLocation(this.sprogram, \"tMat\");\n\t\tthis.sprogram.samplerUniform = this.gl.getUniformLocation(this.sprogram, \"uSampler\");\n\t\tthis.sprogram.useTex = this.gl.getUniformLocation(this.sprogram, \"useTexture\");\n\t\tthis.sprogram.color = this.gl.getUniformLocation(this.sprogram, \"uColor\");\n\t\tthis.gl.uniform1i(this.sprogram.useTex, 1);\n\t};\n\n\tWebGLRender.prototype.initBuffers = function() {\n\t\tthis.unitIBuffer = this.gl.createBuffer();\n\t\tthis.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.unitIBuffer);\n\t\tvar vs = [0, 3, 1, 0, 2, 3];\n\t\tthis.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(vs), this.gl.STATIC_DRAW);\n\n\t\tvar ids = [];\n\t\tfor (var i = 0; i < 100; i++)\n\t\t\tids.push(i);\n\n\t\tidx = new Uint16Array(ids);\n\t\tthis.unitI33 = this.gl.createBuffer();\n\t\tthis.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.unitI33);\n\t\tthis.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, idx, this.gl.STATIC_DRAW);\n\n\t\tids = [];\n\t\tfor ( i = 0; i < 100; i++)\n\t\t\tids.push(i, i + 1, i + 2);\n\n\t\tidx = new Uint16Array(ids);\n\t\tthis.stripBuffer = this.gl.createBuffer();\n\t\tthis.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.stripBuffer);\n\t\tthis.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, idx, this.gl.STATIC_DRAW);\n\t};\n\n\tWebGLRender.prototype.createCircle = function(raidus) {\n\t\tthis.circleCanvasRadius = Proton.WebGLUtil.nhpot(Proton.Util.initValue(raidus, 32));\n\t\tvar canvas = Proton.DomUtil.createCanvas('circle_canvas', this.circleCanvasRadius * 2, this.circleCanvasRadius * 2);\n\t\tvar context = canvas.getContext('2d');\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.circleCanvasRadius, this.circleCanvasRadius, this.circleCanvasRadius, 0, Math.PI * 2, true);\n\t\tcontext.closePath();\n\t\tcontext.fillStyle = '#FFF';\n\t\tcontext.fill();\n\t\treturn canvas.toDataURL();\n\t};\n\n\tWebGLRender.prototype.setImgInCanvas = function(particle) {\n\t\tvar _w = particle.target.width;\n\t\tvar _h = particle.target.height;\n\t\tvar _width = Proton.WebGLUtil.nhpot(particle.target.width);\n\t\tvar _height = Proton.WebGLUtil.nhpot(particle.target.height);\n\t\tvar _scaleX = particle.target.width / _width;\n\t\tvar _scaleY = particle.target.height / _height;\n\n\t\tif (!this.texturebuffers[particle.transform.src])\n\t\t\tthis.texturebuffers[particle.transform.src] = [this.gl.createTexture(), this.gl.createBuffer(), this.gl.createBuffer()];\n\t\tparticle.transform.texture = this.texturebuffers[particle.transform.src][0];\n\t\tparticle.transform.vcBuffer = this.texturebuffers[particle.transform.src][1];\n\t\tparticle.transform.tcBuffer = this.texturebuffers[particle.transform.src][2];\n\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, particle.transform.tcBuffer);\n\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, _scaleX, 0.0, 0.0, _scaleY, _scaleY, _scaleY]), this.gl.STATIC_DRAW);\n\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, particle.transform.vcBuffer);\n\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, _w, 0.0, 0.0, _h, _w, _h]), this.gl.STATIC_DRAW);\n\n\t\tvar context = particle.transform.canvas.getContext('2d');\n\t\tvar data = context.getImageData(0, 0, _width, _height);\n\n\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, particle.transform.texture);\n\t\tthis.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, data);\n\t\tthis.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\n\t\tthis.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR_MIPMAP_NEAREST);\n\t\tthis.gl.generateMipmap(this.gl.TEXTURE_2D);\n\t\tparticle.transform.textureLoaded = true;\n\t\tparticle.transform.textureWidth = _w;\n\t\tparticle.transform.textureHeight = _h;\n\t}\n\n\tWebGLRender.prototype.setStroke = function(color, thinkness) {\n\n\t}\n\n\tWebGLRender.prototype.onProtonUpdate = function() {\n\t\t//this.gl.clearColor(0, 0, 0, 1);\n\t\t//this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\n\t}\n\n\tWebGLRender.prototype.onParticleCreated = function(particle) {\n\t\tvar self = this;\n\t\tparticle.transform.textureLoaded = false;\n\t\tparticle.transform.tmat = Proton.Mat3.create();\n\t\tparticle.transform.tmat[8] = 1;\n\t\tparticle.transform.imat = Proton.Mat3.create();\n\t\tparticle.transform.imat[8] = 1;\n\t\tif (particle.target) {\n\t\t\tProton.Util.getImage(particle.target, particle, true, function(particle) {\n\t\t\t\tself.setImgInCanvas.call(self, particle);\n\t\t\t\tparticle.transform.oldScale = 1;\n\t\t\t});\n\t\t} else {\n\t\t\tProton.Util.getImage(this.circleCanvasURL, particle, true, function(particle) {\n\t\t\t\tself.setImgInCanvas.call(self, particle);\n\t\t\t\tparticle.transform.oldScale = particle.radius / self.circleCanvasRadius;\n\t\t\t});\n\t\t}\n\t}\n\n\tWebGLRender.prototype.onParticleUpdate = function(particle) {\n\t\tif (particle.transform.textureLoaded) {\n\t\t\tthis.updateMatrix(particle);\n\t\t\tthis.gl.uniform3f(this.sprogram.color, particle.transform.rgb.r / 255, particle.transform.rgb.g / 255, particle.transform.rgb.b / 255);\n\t\t\tthis.gl.uniformMatrix3fv(this.sprogram.tMatUniform, false, this.mstack.top());\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, particle.transform.vcBuffer);\n\t\t\tthis.gl.vertexAttribPointer(this.sprogram.vpa, 2, this.gl.FLOAT, false, 0, 0);\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, particle.transform.tcBuffer);\n\t\t\tthis.gl.vertexAttribPointer(this.sprogram.tca, 2, this.gl.FLOAT, false, 0, 0);\n\t\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, particle.transform.texture);\n\t\t\tthis.gl.uniform1i(this.sprogram.samplerUniform, 0);\n\t\t\tthis.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.unitIBuffer);\n\t\t\tthis.gl.drawElements(this.gl.TRIANGLES, 6, this.gl.UNSIGNED_SHORT, 0);\n\t\t\tthis.mstack.pop();\n\t\t}\n\t}\n\n\tWebGLRender.prototype.onParticleDead = function(particle) {\n\t\t\n\t}\n\n\tWebGLRender.prototype.updateMatrix = function(particle) {\n\t\tvar moveOriginMatrix = Proton.WebGLUtil.makeTranslation(-particle.transform.textureWidth / 2, -particle.transform.textureHeight / 2);\n\t\tvar translationMatrix = Proton.WebGLUtil.makeTranslation(particle.p.x, particle.p.y);\n\t\tvar angel = particle.rotation * (Math.PI / 180);\n\t\tvar rotationMatrix = Proton.WebGLUtil.makeRotation(angel);\n\t\tvar scale = particle.scale * particle.transform.oldScale;\n\t\tvar scaleMatrix = Proton.WebGLUtil.makeScale(scale, scale);\n\n\t\tvar matrix = Proton.WebGLUtil.matrixMultiply(moveOriginMatrix, scaleMatrix);\n\t\tmatrix = Proton.WebGLUtil.matrixMultiply(matrix, rotationMatrix);\n\t\tmatrix = Proton.WebGLUtil.matrixMultiply(matrix, translationMatrix);\n\n\t\tProton.Mat3.inverse(matrix, particle.transform.imat);\n\t\tmatrix[2] = particle.alpha;\n\t\tthis.mstack.push(matrix);\n\t}\n\n\tProton.WebGLRender = WebGLRender;\n\n\n\n\tfunction Zone() {\n\t\tthis.vector = new Proton.Vector2D(0, 0);\n\t\tthis.random = 0;\n\t\tthis.crossType = \"dead\";\n\t\tthis.alert = true;\n\t}\n\n\n\tZone.prototype = {\n\t\tgetPosition : function() {\n\n\t\t},\n\n\t\tcrossing : function(particle) {\n\n\t\t}\n\t};\n\n\tProton.Zone = Zone;\n\n\n\n\tfunction LineZone(x1, y1, x2, y2, direction) {\n\t\tLineZone._super_.call(this);\n\t\tif (x2 - x1 >= 0) {\n\t\t\tthis.x1 = x1;\n\t\t\tthis.y1 = y1;\n\t\t\tthis.x2 = x2;\n\t\t\tthis.y2 = y2;\n\t\t} else {\n\t\t\tthis.x1 = x2;\n\t\t\tthis.y1 = y2;\n\t\t\tthis.x2 = x1;\n\t\t\tthis.y2 = y1;\n\t\t}\n\t\tthis.dx = this.x2 - this.x1;\n\t\tthis.dy = this.y2 - this.y1;\n\t\tthis.minx = Math.min(this.x1, this.x2);\n\t\tthis.miny = Math.min(this.y1, this.y2);\n\t\tthis.maxx = Math.max(this.x1, this.x2);\n\t\tthis.maxy = Math.max(this.y1, this.y2);\n\t\tthis.dot = this.x2 * this.y1 - this.x1 * this.y2;\n\t\tthis.xxyy = this.dx * this.dx + this.dy * this.dy;\n\t\tthis.gradient = this.getGradient();\n\t\tthis.length = this.getLength();\n\t\tthis.direction = Proton.Util.initValue(direction, '>');\n\t}\n\n\n\tProton.Util.inherits(LineZone, Proton.Zone);\n\tLineZone.prototype.getPosition = function() {\n\t\tthis.random = Math.random();\n\t\tthis.vector.x = this.x1 + this.random * this.length * Math.cos(this.gradient);\n\t\tthis.vector.y = this.y1 + this.random * this.length * Math.sin(this.gradient);\n\t\treturn this.vector;\n\t}\n\n\tLineZone.prototype.getDirection = function(x, y) {\n\t\tvar A = this.dy;\n\t\tvar B = -this.dx;\n\t\tvar C = this.dot;\n\t\tvar D = B == 0 ? 1 : B;\n\t\tif ((A * x + B * y + C) * D > 0)\n\t\t\treturn true\n\t\telse\n\t\t\treturn false;\n\t}\n\n\tLineZone.prototype.getDistance = function(x, y) {\n\t\tvar A = this.dy;\n\t\tvar B = -this.dx;\n\t\tvar C = this.dot;\n\t\tvar D = (A * x + B * y + C);\n\t\treturn D / Math.sqrt(this.xxyy);\n\t}\n\n\tLineZone.prototype.getSymmetric = function(v) {\n\t\tvar tha2 = v.getGradient();\n\t\tvar tha1 = this.getGradient();\n\t\tvar tha = 2 * (tha1 - tha2);\n\t\tvar oldx = v.x;\n\t\tvar oldy = v.y;\n\t\tv.x = oldx * Math.cos(tha) - oldy * Math.sin(tha);\n\t\tv.y = oldx * Math.sin(tha) + oldy * Math.cos(tha);\n\t\treturn v;\n\t}\n\n\tLineZone.prototype.getGradient = function() {\n\t\treturn Math.atan2(this.dy, this.dx);\n\t}\n\n\tLineZone.prototype.getRange = function(particle, fun) {\n\t\tvar angle = Math.abs(this.getGradient());\n\t\tif (angle <= Math.PI / 4) {\n\t\t\tif (particle.p.x < this.maxx && particle.p.x > this.minx) {\n\t\t\t\tfun();\n\t\t\t}\n\t\t} else {\n\t\t\tif (particle.p.y < this.maxy && particle.p.y > this.miny) {\n\t\t\t\tfun();\n\t\t\t}\n\t\t}\n\t}\n\n\tLineZone.prototype.getLength = function() {\n\t\treturn Math.sqrt(this.dx * this.dx + this.dy * this.dy)\n\t}\n\n\tLineZone.prototype.crossing = function(particle) {\n\t\tvar self = this;\n\t\tif (this.crossType == \"dead\") {\n\t\t\tif (this.direction == \">\" || this.direction == \"R\" || this.direction == \"right\" || this.direction == \"down\") {\n\t\t\t\tthis.getRange(particle, function() {\n\t\t\t\t\tif (self.getDirection(particle.p.x, particle.p.y))\n\t\t\t\t\t\tparticle.dead = true;\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthis.getRange(particle, function() {\n\t\t\t\t\tif (!self.getDirection(particle.p.x, particle.p.y))\n\t\t\t\t\t\tparticle.dead = true;\n\t\t\t\t})\n\t\t\t}\n\t\t} else if (this.crossType == \"bound\") {\n\t\t\tthis.getRange(particle, function() {\n\t\t\t\tif (self.getDistance(particle.p.x, particle.p.y) <= particle.radius) {\n\t\t\t\t\tif (self.dx == 0) {\n\t\t\t\t\t\tparticle.v.x *= -1;\n\t\t\t\t\t} else if (self.dy == 0) {\n\t\t\t\t\t\tparticle.v.y *= -1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.getSymmetric(particle.v);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (this.crossType == \"cross\") {\n\t\t\tif (this.alert) {\n\t\t\t\talert('Sorry lineZone does not support cross method');\n\t\t\t\tthis.alert = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tProton.LineZone = LineZone;\n\n\n\n\tfunction CircleZone(x, y, radius) {\n\t\tCircleZone._super_.call(this);\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.radius = radius;\n\t\tthis.angle = 0;\n\t\tthis.center = {\n\t\t\tx : this.x,\n\t\t\ty : this.y\n\t\t};\n\t}\n\n\n\tProton.Util.inherits(CircleZone, Proton.Zone);\n\tCircleZone.prototype.getPosition = function() {\n\t\tthis.random = Math.random();\n\t\tthis.angle = Math.PI * 2 * Math.random();\n\t\tthis.vector.x = this.x + this.random * this.radius * Math.cos(this.angle);\n\t\tthis.vector.y = this.y + this.random * this.radius * Math.sin(this.angle);\n\t\treturn this.vector;\n\t}\n\n\tCircleZone.prototype.setCenter = function(x, y) {\n\t\tthis.center.x = x;\n\t\tthis.center.y = y;\n\t}\n\n\tCircleZone.prototype.crossing = function(particle) {\n\t\tvar d = particle.p.distanceTo(this.center);\n\t\tif (this.crossType == \"dead\") {\n\t\t\tif (d - particle.radius > this.radius)\n\t\t\t\tparticle.dead = true;\n\t\t} else if (this.crossType == \"bound\") {\n\t\t\tif (d + particle.radius >= this.radius)\n\t\t\t\tthis.getSymmetric(particle);\n\t\t} else if (this.crossType == \"cross\") {\n\t\t\tif (this.alert) {\n\t\t\t\talert('Sorry CircleZone does not support cross method');\n\t\t\t\tthis.alert = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tCircleZone.prototype.getSymmetric = function(particle) {\n\t\tvar tha2 = particle.v.getGradient();\n\t\tvar tha1 = this.getGradient(particle);\n\t\tvar tha = 2 * (tha1 - tha2);\n\t\tvar oldx = particle.v.x;\n\t\tvar oldy = particle.v.y;\n\t\tparticle.v.x = oldx * Math.cos(tha) - oldy * Math.sin(tha);\n\t\tparticle.v.y = oldx * Math.sin(tha) + oldy * Math.cos(tha);\n\t}\n\n\tCircleZone.prototype.getGradient = function(particle) {\n\t\treturn -Math.PI / 2 + Math.atan2(particle.p.y - this.center.y, particle.p.x - this.center.x);\n\t}\n\n\tProton.CircleZone = CircleZone;\n\n\n\n\tfunction PointZone(x, y) {\n\t\tPointZone._super_.call(this);\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\n\tProton.Util.inherits(PointZone, Proton.Zone);\n\tPointZone.prototype.getPosition = function() {\n\t\tthis.vector.x = this.x;\n\t\tthis.vector.y = this.y;\n\t\treturn this.vector;\n\t}\n\n\tPointZone.prototype.crossing = function(particle) {\n\t\tif (this.alert) {\n\t\t\talert('Sorry PointZone does not support crossing method');\n\t\t\tthis.alert = false;\n\t\t}\n\t}\n\n\tProton.PointZone = PointZone;\n\n\n\n\tfunction RectZone(x, y, width, height) {\n\t\tRectZone._super_.call(this);\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t}\n\n\n\tProton.Util.inherits(RectZone, Proton.Zone);\n\tRectZone.prototype.getPosition = function() {\n\t\tthis.vector.x = this.x + Math.random() * this.width;\n\t\tthis.vector.y = this.y + Math.random() * this.height;\n\t\treturn this.vector;\n\t}\n\n\tRectZone.prototype.crossing = function(particle) {\n\t\tif (this.crossType == \"dead\") {\n\t\t\tif (particle.p.x + particle.radius < this.x)\n\t\t\t\tparticle.dead = true;\n\t\t\telse if (particle.p.x - particle.radius > this.x + this.width)\n\t\t\t\tparticle.dead = true;\n\n\t\t\tif (particle.p.y + particle.radius < this.y)\n\t\t\t\tparticle.dead = true;\n\t\t\telse if (particle.p.y - particle.radius > this.y + this.height)\n\t\t\t\tparticle.dead = true;\n\t\t} else if (this.crossType == \"bound\") {\n\t\t\tif (particle.p.x - particle.radius < this.x) {\n\t\t\t\tparticle.p.x = this.x + particle.radius;\n\t\t\t\tparticle.v.x *= -1;\n\t\t\t} else if (particle.p.x + particle.radius > this.x + this.width) {\n\t\t\t\tparticle.p.x = this.x + this.width - particle.radius;\n\t\t\t\tparticle.v.x *= -1;\n\t\t\t}\n\t\t\t\n\t\t\tif (particle.p.y - particle.radius < this.y) {\n\t\t\t\tparticle.p.y = this.y + particle.radius;\n\t\t\t\tparticle.v.y *= -1;\n\t\t\t} else if (particle.p.y + particle.radius > this.y + this.height) {\n\t\t\t\tparticle.p.y = this.y + this.height - particle.radius;\n\t\t\t\tparticle.v.y *= -1;\n\t\t\t}\n\t\t} else if (this.crossType == \"cross\") {\n\t\t\tif (particle.p.x + particle.radius < this.x && particle.v.x <= 0)\n\t\t\t\tparticle.p.x = this.x + this.width + particle.radius;\n\t\t\telse if (particle.p.x - particle.radius > this.x + this.width && particle.v.x >= 0)\n\t\t\t\tparticle.p.x = this.x - particle.radius;\n\n\t\t\tif (particle.p.y + particle.radius < this.y && particle.v.y <= 0)\n\t\t\t\tparticle.p.y = this.y + this.height + particle.radius;\n\t\t\telse if (particle.p.y - particle.radius > this.y + this.height && particle.v.y >= 0)\n\t\t\t\tparticle.p.y = this.y - particle.radius;\n\t\t}\n\t}\n\n\tProton.RectZone = RectZone;\n\n\n\n\tfunction ImageZone(imageData, x, y, d) {\n\t\tImageZone._super_.call(this);\n\t\tthis.reset(imageData, x, y, d);\n\t}\n\n\n\tProton.Util.inherits(ImageZone, Proton.Zone);\n\tImageZone.prototype.reset = function(imageData, x, y, d) {\n\t\tthis.imageData = imageData;\n\t\tthis.x = Proton.Util.initValue(x, 0);\n\t\tthis.y = Proton.Util.initValue(y, 0);\n\t\tthis.d = Proton.Util.initValue(d, 2);\n\t\tthis.vectors = [];\n\t\tthis.setVectors();\n\t}\n\n\tImageZone.prototype.setVectors = function() {\n\t\tvar i, j;\n\t\tvar length1 = this.imageData.width;\n\t\tvar length2 = this.imageData.height;\n\t\tfor ( i = 0; i < length1; i += this.d) {\n\t\t\tfor ( j = 0; j < length2; j += this.d) {\n\t\t\t\tvar index = ((j >> 0) * length1 + (i >> 0)) * 4;\n\t\t\t\tif (this.imageData.data[index + 3] > 0) {\n\t\t\t\t\tthis.vectors.push({\n\t\t\t\t\t\tx : i + this.x,\n\t\t\t\t\t\ty : j + this.y\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.vector;\n\t}\n\n\tImageZone.prototype.getBound = function(x, y) {\n\t\tvar index = ((y >> 0) * this.imageData.width + (x >> 0)) * 4;\n\t\tif (this.imageData.data[index + 3] > 0)\n\t\t\treturn true;\n\t\telse\n\t\t\treturn false;\n\t}\n\n\tImageZone.prototype.getPosition = function() {\n\t\treturn this.vector.copy(this.vectors[Math.floor(Math.random() * this.vectors.length)]);\n\t}\n\n\tImageZone.prototype.getColor = function(x, y) {\n\t\tx -= this.x;\n\t\ty -= this.y;\n\t\tvar i = ((y >> 0) * this.imageData.width + (x >> 0)) * 4;\n\t\treturn {\n\t\t\tr : this.imageData.data[i],\n\t\t\tg : this.imageData.data[i + 1],\n\t\t\tb : this.imageData.data[i + 2],\n\t\t\ta : this.imageData.data[i + 3]\n\t\t};\n\t}\n\n\tImageZone.prototype.crossing = function(particle) {\n\t\tif (this.crossType == \"dead\") {\n\t\t\tif (this.getBound(particle.p.x - this.x, particle.p.y - this.y))\n\t\t\t\tparticle.dead = true;\n\t\t\telse\n\t\t\t\tparticle.dead = false;\n\t\t} else if (this.crossType == \"bound\") {\n\t\t\tif (!this.getBound(particle.p.x - this.x, particle.p.y - this.y))\n\t\t\t\tparticle.v.negate();\n\t\t}\n\t}\n\n\tProton.ImageZone = ImageZone;\n\n\n\n\tvar Debug = Debug || {\n\t\taddEventListener : function(proton, fun) {\n\t\t\tproton.addEventListener(Proton.PROTON_UPDATE, function() {\n\t\t\t\tfun();\n\t\t\t});\n\t\t},\n\n\t\tsetStyle : function(c) {\n\t\t\tvar color = c || '#ff0000';\n\t\t\tvar rgb = Proton.Util.hexToRGB(color);\n\t\t\tvar style = 'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + 0.5 + ')';\n\t\t\t\n\t\t\treturn style;\n\t\t},\n\n\t\tdrawZone : function(proton, canvas, zone, clear) {\n\t\t\tvar context = canvas.getContext('2d');\n\t\t\tvar style = this.setStyle();\n\n\t\t\tthis.addEventListener(proton, function() {\n\t\t\t\tif (clear)\n\t\t\t\t//\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t\t\tif ( zone instanceof Proton.PointZone) {\n\t\t\t\t\tcontext.beginPath();\n\t\t\t\t\tcontext.fillStyle = style;\n\t\t\t\t\tcontext.arc(zone.x, zone.y, 10, 0, Math.PI * 2, true);\n\t\t\t\t\tcontext.fill();\n\t\t\t\t\tcontext.closePath();\n\t\t\t\t} else if ( zone instanceof Proton.LineZone) {\n\t\t\t\t\tcontext.beginPath();\n\t\t\t\t\tcontext.strokeStyle = style;\n\t\t\t\t\tcontext.moveTo(zone.x1, zone.y1);\n\t\t\t\t\tcontext.lineTo(zone.x2, zone.y2);\n\t\t\t\t\tcontext.stroke();\n\t\t\t\t\tcontext.closePath();\n\t\t\t\t} else if ( zone instanceof Proton.RectZone) {\n\t\t\t\t\tcontext.beginPath();\n\t\t\t\t\tcontext.strokeStyle = style;\n\t\t\t\t\tcontext.drawRect(zone.x, zone.y, zone.width, zone.height);\n\t\t\t\t\tcontext.stroke();\n\t\t\t\t\tcontext.closePath();\n\t\t\t\t} else if ( zone instanceof Proton.CircleZone) {\n\t\t\t\t\tcontext.beginPath();\n\t\t\t\t\tcontext.strokeStyle = style;\n\t\t\t\t\tcontext.arc(zone.x, zone.y, zone.radius, 0, Math.PI * 2, true);\n\t\t\t\t\tcontext.stroke();\n\t\t\t\t\tcontext.closePath();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tdrawEmitter : function(proton, canvas, emitter, clear) {\n\t\t\tvar context = canvas.getContext('2d');\n\t\t\tvar style = this.setStyle();\n\t\t\tthis.addEventListener(proton, function() {\n\t\t\t\tif (clear)\n\t\t\t\t//\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.fillStyle = style;\n\t\t\t\tcontext.arc(emitter.p.x, emitter.p.y, 10, 0, Math.PI * 2, true);\n\t\t\t\tcontext.fill();\n\t\t\t\tcontext.closePath();\n\t\t\t});\n\t\t},\n\n\t\ttest : {},\n\n\t\tsetTest : function(id, value) {\n\t\t\tthis.test[id] = value;\n\t\t},\n\n\t\tgetTest : function(id) {\n\t\t\tif (this.test.hasOwnProperty(id))\n\t\t\t\treturn this.test[id];\n\t\t\telse\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tProton.Debug = Debug;\n\n\n// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n\n// requestAnimationFrame polyfill by Erik Möller\n// fixes from Paul Irish and Tino Zijdel\n( function() {\n\t\tvar lastTime = 0;\n\t\tvar vendors = ['ms', 'moz', 'webkit', 'o'];\n\t\tfor (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n\t\t\twindow.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n\t\t\twindow.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n\t\t}\n\n\t\tif (!window.requestAnimationFrame)\n\t\t\twindow.requestAnimationFrame = function(callback, element) {\n\t\t\t\tvar currTime = new Date().getTime();\n\t\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\n\t\t\t\tvar id = window.setTimeout(function() {\n\t\t\t\t\tcallback(currTime + timeToCall);\n\t\t\t\t}, timeToCall);\n\t\t\t\tlastTime = currTime + timeToCall;\n\t\t\t\treturn id;\n\t\t\t};\n\n\t\tif (!window.cancelAnimationFrame)\n\t\t\twindow.cancelAnimationFrame = function(id) {\n\t\t\t\tclearTimeout(id);\n\t\t\t};\n\t}()); \n\n    return Proton;\n}));;/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time >= prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n;/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\n\nvar TWEEN = TWEEN || (function () {\n\n\tvar _tweens = [];\n\n\treturn {\n\n\t\tgetAll: function () {\n\n\t\t\treturn _tweens;\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\t_tweens = [];\n\n\t\t},\n\n\t\tadd: function (tween) {\n\n\t\t\t_tweens.push(tween);\n\n\t\t},\n\n\t\tremove: function (tween) {\n\n\t\t\tvar i = _tweens.indexOf(tween);\n\n\t\t\tif (i !== -1) {\n\t\t\t\t_tweens.splice(i, 1);\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function (time, preserve) {\n\n\t\t\tif (_tweens.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar i = 0;\n\n\t\t\ttime = time !== undefined ? time : TWEEN.now();\n\n\t\t\twhile (i < _tweens.length) {\n\n\t\t\t\tif (_tweens[i].update(time) || preserve) {\n\t\t\t\t\ti++;\n\t\t\t\t} else {\n\t\t\t\t\t_tweens.splice(i, 1);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\t};\n\n})();\n\n//removed polyfill\n\nTWEEN.now = Date.now;\n\nTWEEN.Tween = function (object) {\n\n\tvar _object = object;\n\tvar _valuesStart = {};\n\tvar _valuesEnd = {};\n\tvar _valuesStartRepeat = {};\n\tvar _duration = 1000;\n\tvar _repeat = 0;\n\tvar _repeatDelayTime;\n\tvar _yoyo = false;\n\tvar _isPlaying = false;\n\tvar _reversed = false;\n\tvar _delayTime = 0;\n\tvar _startTime = null;\n\tvar _easingFunction = TWEEN.Easing.Linear.None;\n\tvar _interpolationFunction = TWEEN.Interpolation.Linear;\n\tvar _chainedTweens = [];\n\tvar _onStartCallback = null;\n\tvar _onStartCallbackFired = false;\n\tvar _onUpdateCallback = null;\n\tvar _onCompleteCallback = null;\n\tvar _onStopCallback = null;\n\n\t// Set all starting values present on the target object\n\tfor (var field in object) {\n\t\t_valuesStart[field] = parseFloat(object[field], 10);\n\t}\n\n\tthis.to = function (properties, duration) {\n\n\t\tif (duration !== undefined) {\n\t\t\t_duration = duration;\n\t\t}\n\n\t\t_valuesEnd = properties;\n\n\t\treturn this;\n\n\t};\n\n\tthis.start = function (time) {\n\n\t\tTWEEN.add(this);\n\n\t\t_isPlaying = true;\n\n\t\t_onStartCallbackFired = false;\n\n\t\t_startTime = time !== undefined ? time : TWEEN.now();\n\t\t_startTime += _delayTime;\n\n\t\tfor (var property in _valuesEnd) {\n\n\t\t\t// Check if an Array was provided as property value\n\t\t\tif (_valuesEnd[property] instanceof Array) {\n\n\t\t\t\tif (_valuesEnd[property].length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Create a local copy of the Array with the start value at the front\n\t\t\t\t_valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);\n\n\t\t\t}\n\n\t\t\t// If `to()` specifies a property that doesn't exist in the source object,\n\t\t\t// we should not set that property in the object\n\t\t\tif (_object[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t_valuesStart[property] = _object[property];\n\n\t\t\tif ((_valuesStart[property] instanceof Array) === false) {\n\t\t\t\t_valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n\t\t\t}\n\n\t\t\t_valuesStartRepeat[property] = _valuesStart[property] || 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.stop = function () {\n\n\t\tif (!_isPlaying) {\n\t\t\treturn this;\n\t\t}\n\n\t\tTWEEN.remove(this);\n\t\t_isPlaying = false;\n\n\t\tif (_onStopCallback !== null) {\n\t\t\t_onStopCallback.call(_object, _object);\n\t\t}\n\n\t\tthis.stopChainedTweens();\n\t\treturn this;\n\n\t};\n\n\tthis.end = function () {\n\n\t\tthis.update(_startTime + _duration);\n\t\treturn this;\n\n\t};\n\n\tthis.stopChainedTweens = function () {\n\n\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t_chainedTweens[i].stop();\n\t\t}\n\n\t};\n\n\tthis.delay = function (amount) {\n\n\t\t_delayTime = amount;\n\t\treturn this;\n\n\t};\n\n\tthis.repeat = function (times) {\n\n\t\t_repeat = times;\n\t\treturn this;\n\n\t};\n\n\tthis.repeatDelay = function (amount) {\n\n\t\t_repeatDelayTime = amount;\n\t\treturn this;\n\n\t};\n\n\tthis.yoyo = function (yoyo) {\n\n\t\t_yoyo = yoyo;\n\t\treturn this;\n\n\t};\n\n\n\tthis.easing = function (easing) {\n\n\t\t_easingFunction = easing;\n\t\treturn this;\n\n\t};\n\n\tthis.interpolation = function (interpolation) {\n\n\t\t_interpolationFunction = interpolation;\n\t\treturn this;\n\n\t};\n\n\tthis.chain = function () {\n\n\t\t_chainedTweens = arguments;\n\t\treturn this;\n\n\t};\n\n\tthis.onStart = function (callback) {\n\n\t\t_onStartCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onUpdate = function (callback) {\n\n\t\t_onUpdateCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onComplete = function (callback) {\n\n\t\t_onCompleteCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onStop = function (callback) {\n\n\t\t_onStopCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.update = function (time) {\n\n\t\tvar property;\n\t\tvar elapsed;\n\t\tvar value;\n\n\t\tif (time < _startTime) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (_onStartCallbackFired === false) {\n\n\t\t\tif (_onStartCallback !== null) {\n\t\t\t\t_onStartCallback.call(_object, _object);\n\t\t\t}\n\n\t\t\t_onStartCallbackFired = true;\n\t\t}\n\n\t\telapsed = (time - _startTime) / _duration;\n\t\telapsed = elapsed > 1 ? 1 : elapsed;\n\n\t\tvalue = _easingFunction(elapsed);\n\n\t\tfor (property in _valuesEnd) {\n\n\t\t\t// Don't update properties that do not exist in the source object\n\t\t\tif (_valuesStart[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar start = _valuesStart[property] || 0;\n\t\t\tvar end = _valuesEnd[property];\n\n\t\t\tif (end instanceof Array) {\n\n\t\t\t\t_object[property] = _interpolationFunction(end, value);\n\n\t\t\t} else {\n\n\t\t\t\t// Parses relative end values with start as base (e.g.: +10, -3)\n\t\t\t\tif (typeof (end) === 'string') {\n\n\t\t\t\t\tif (end.charAt(0) === '+' || end.charAt(0) === '-') {\n\t\t\t\t\t\tend = start + parseFloat(end, 10);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend = parseFloat(end, 10);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Protect against non numeric properties.\n\t\t\t\tif (typeof (end) === 'number') {\n\t\t\t\t\t_object[property] = start + (end - start) * value;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (_onUpdateCallback !== null) {\n\t\t\t_onUpdateCallback.call(_object, value);\n\t\t}\n\n\t\tif (elapsed === 1) {\n\n\t\t\tif (_repeat > 0) {\n\n\t\t\t\tif (isFinite(_repeat)) {\n\t\t\t\t\t_repeat--;\n\t\t\t\t}\n\n\t\t\t\t// Reassign starting values, restart by making startTime = now\n\t\t\t\tfor (property in _valuesStartRepeat) {\n\n\t\t\t\t\tif (typeof (_valuesEnd[property]) === 'string') {\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property], 10);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_yoyo) {\n\t\t\t\t\t\tvar tmp = _valuesStartRepeat[property];\n\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesEnd[property];\n\t\t\t\t\t\t_valuesEnd[property] = tmp;\n\t\t\t\t\t}\n\n\t\t\t\t\t_valuesStart[property] = _valuesStartRepeat[property];\n\n\t\t\t\t}\n\n\t\t\t\tif (_yoyo) {\n\t\t\t\t\t_reversed = !_reversed;\n\t\t\t\t}\n\n\t\t\t\tif (_repeatDelayTime !== undefined) {\n\t\t\t\t\t_startTime = time + _repeatDelayTime;\n\t\t\t\t} else {\n\t\t\t\t\t_startTime = time + _delayTime;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tif (_onCompleteCallback !== null) {\n\n\t\t\t\t\t_onCompleteCallback.call(_object, _object);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t\t\t// Make the chained tweens start exactly at the time they should,\n\t\t\t\t\t// even if the `update()` method was called way past the duration of the tween\n\t\t\t\t\t_chainedTweens[i].start(_startTime + _duration);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n};\n\n\nTWEEN.Easing = {\n\n\tLinear: {\n\n\t\tNone: function (k) {\n\n\t\t\treturn k;\n\n\t\t}\n\n\t},\n\n\tQuadratic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k * (2 - k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * (--k * (k - 2) - 1);\n\n\t\t}\n\n\t},\n\n\tCubic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tQuartic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn 1 - (--k * k * k * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * ((k -= 2) * k * k * k - 2);\n\n\t\t}\n\n\t},\n\n\tQuintic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tSinusoidal: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.cos(k * Math.PI / 2);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sin(k * Math.PI / 2);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\n\n\t\t}\n\n\t},\n\n\tExponential: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\n\n\t\t}\n\n\t},\n\n\tCircular: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.sqrt(1 - k * k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sqrt(1 - (--k * k));\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn - 0.5 * (Math.sqrt(1 - k * k) - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\n\t\t}\n\n\t},\n\n\tElastic: {\n\n\t\tIn: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tk *= 2;\n\n\t\t\tif (k < 1) {\n\t\t\t\treturn -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t\t}\n\n\t\t\treturn 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n\n\t\t}\n\n\t},\n\n\tBack: {\n\n\t\tIn: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn k * k * ((s + 1) * k - s);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tvar s = 1.70158 * 1.525;\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\n\t\t}\n\n\t},\n\n\tBounce: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - TWEEN.Easing.Bounce.Out(1 - k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k < (1 / 2.75)) {\n\t\t\t\treturn 7.5625 * k * k;\n\t\t\t} else if (k < (2 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n\t\t\t} else if (k < (2.5 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n\t\t\t} else {\n\t\t\t\treturn 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n\t\t\t}\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k < 0.5) {\n\t\t\t\treturn TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n\t\t\t}\n\n\t\t\treturn TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\n\t\t}\n\n\t}\n\n};\n\nTWEEN.Interpolation = {\n\n\tLinear: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.Linear;\n\n\t\tif (k < 0) {\n\t\t\treturn fn(v[0], v[1], f);\n\t\t}\n\n\t\tif (k > 1) {\n\t\t\treturn fn(v[m], v[m - 1], m - f);\n\t\t}\n\n\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n\n\t},\n\n\tBezier: function (v, k) {\n\n\t\tvar b = 0;\n\t\tvar n = v.length - 1;\n\t\tvar pw = Math.pow;\n\t\tvar bn = TWEEN.Interpolation.Utils.Bernstein;\n\n\t\tfor (var i = 0; i <= n; i++) {\n\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n\t\t}\n\n\t\treturn b;\n\n\t},\n\n\tCatmullRom: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n\t\tif (v[0] === v[m]) {\n\n\t\t\tif (k < 0) {\n\t\t\t\ti = Math.floor(f = m * (1 + k));\n\t\t\t}\n\n\t\t\treturn fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n\n\t\t} else {\n\n\t\t\tif (k < 0) {\n\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n\t\t\t}\n\n\t\t\tif (k > 1) {\n\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n\t\t\t}\n\n\t\t\treturn fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n\n\t\t}\n\n\t},\n\n\tUtils: {\n\n\t\tLinear: function (p0, p1, t) {\n\n\t\t\treturn (p1 - p0) * t + p0;\n\n\t\t},\n\n\t\tBernstein: function (n, i) {\n\n\t\t\tvar fc = TWEEN.Interpolation.Utils.Factorial;\n\n\t\t\treturn fc(n) / fc(i) / fc(n - i);\n\n\t\t},\n\n\t\tFactorial: (function () {\n\n\t\t\tvar a = [1];\n\n\t\t\treturn function (n) {\n\n\t\t\t\tvar s = 1;\n\n\t\t\t\tif (a[n]) {\n\t\t\t\t\treturn a[n];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = n; i > 1; i--) {\n\t\t\t\t\ts *= i;\n\t\t\t\t}\n\n\t\t\t\ta[n] = s;\n\t\t\t\treturn s;\n\n\t\t\t};\n\n\t\t})(),\n\n\t\tCatmullRom: function (p0, p1, p2, p3, t) {\n\n\t\t\tvar v0 = (p2 - p0) * 0.5;\n\t\t\tvar v1 = (p3 - p1) * 0.5;\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t * t2;\n\n\t\t\treturn (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n\n\t\t}\n\n\t}\n\n};\n\n// UMD (Universal Module Definition)\n(function (root) {\n\n\tif (typeof define === 'function' && define.amd) {\n\n\t\t// AMD\n\t\tdefine([], function () {\n\t\t\treturn TWEEN;\n\t\t});\n\n\t} else if (typeof module !== 'undefined' && typeof exports === 'object') {\n\n\t\t// Node.js\n\t\tmodule.exports = TWEEN;\n\n\t} else if (root !== undefined) {\n\n\t\t// Global variable\n\t\troot.TWEEN = TWEEN;\n\n\t}\n\n})(this);\n"]}